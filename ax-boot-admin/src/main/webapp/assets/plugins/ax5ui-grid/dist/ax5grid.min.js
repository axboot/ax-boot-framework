"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"grid",version:"1.3.4"},function(){var n=function(){var n,o=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,frozenColumnIndex:0,frozenRowIndex:0,showLineNumber:!1,showRowSelector:!1,multipleSelect:!0,height:0,columnMinWidth:100,lineNumberColumnWidth:30,rowSelectorColumnWidth:26,sortable:void 0,remoteSort:!1,header:{align:!1,columnHeight:26,columnPadding:3,columnBorderWidth:1},body:{align:!1,columnHeight:26,columnPadding:3,columnBorderWidth:1,grouping:!1},rightSum:!1,footSum:!1,page:{height:25,display:!0,navigationItemCount:5},scroller:{size:15,barMinSize:15,trackPadding:4},columnKeys:{selected:"__selected__",modified:"__modified__",deleted:"__deleted__"}},this.xvar={bodyTrHeight:0,scrollContentWidth:0,scrollContentHeight:0},this.columns=[],this.colGroup=[],this.footSumColumns=[],this.bodyGrouping={},this.list=[],this.page={},this.selectedDataIndexs=[],this.deletedList=[],this.sortInfo={},this.focusedColumn={},this.selectedColumn={},this.isInlineEditing=!1,this.inlineEditing={},this.headerTable={},this.leftHeaderData={},this.headerData={},this.rightHeaderData={},this.bodyRowTable={},this.leftBodyRowData={},this.bodyRowData={},this.rightBodyRowData={},this.bodyRowMap={},this.bodyGroupingTable={},this.leftBodyGroupingData={},this.bodyGroupingData={},this.rightBodyGroupingData={},this.footSumTable={},this.leftFootSumData={},this.footSumData={},this.needToPaintSum=!0,n=this.config;var a=function(){var e={instanceId:this.id};return this.$target.html(t.tmpl.get("main",e)),this.$={container:{hidden:this.$target.find('[data-ax5grid-container="hidden"]'),root:this.$target.find('[data-ax5grid-container="root"]'),header:this.$target.find('[data-ax5grid-container="header"]'),body:this.$target.find('[data-ax5grid-container="body"]'),page:this.$target.find('[data-ax5grid-container="page"]'),scroller:this.$target.find('[data-ax5grid-container="scroller"]')},panel:{"aside-header":this.$target.find('[data-ax5grid-panel="aside-header"]'),"left-header":this.$target.find('[data-ax5grid-panel="left-header"]'),header:this.$target.find('[data-ax5grid-panel="header"]'),"header-scroll":this.$target.find('[data-ax5grid-panel-scroll="header"]'),"right-header":this.$target.find('[data-ax5grid-panel="right-header"]'),"top-aside-body":this.$target.find('[data-ax5grid-panel="top-aside-body"]'),"top-left-body":this.$target.find('[data-ax5grid-panel="top-left-body"]'),"top-body":this.$target.find('[data-ax5grid-panel="top-body"]'),"top-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="top-body"]'),"top-right-body":this.$target.find('[data-ax5grid-panel="top-right-body"]'),"aside-body":this.$target.find('[data-ax5grid-panel="aside-body"]'),"aside-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="aside-body"]'),"left-body":this.$target.find('[data-ax5grid-panel="left-body"]'),"left-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="left-body"]'),body:this.$target.find('[data-ax5grid-panel="body"]'),"body-scroll":this.$target.find('[data-ax5grid-panel-scroll="body"]'),"right-body":this.$target.find('[data-ax5grid-panel="right-body"]'),"right-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="right-body"]'),"bottom-aside-body":this.$target.find('[data-ax5grid-panel="bottom-aside-body"]'),"bottom-left-body":this.$target.find('[data-ax5grid-panel="bottom-left-body"]'),"bottom-body":this.$target.find('[data-ax5grid-panel="bottom-body"]'),"bottom-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="bottom-body"]'),"bottom-right-body":this.$target.find('[data-ax5grid-panel="bottom-right-body"]')},livePanelKeys:[],scroller:{vertical:this.$target.find('[data-ax5grid-scroller="vertical"]'),"vertical-bar":this.$target.find('[data-ax5grid-scroller="vertical-bar"]'),horizontal:this.$target.find('[data-ax5grid-scroller="horizontal"]'),"horizontal-bar":this.$target.find('[data-ax5grid-scroller="horizontal-bar"]'),corner:this.$target.find('[data-ax5grid-scroller="corner"]')},page:{navigation:this.$target.find('[data-ax5grid-page="navigation"]'),status:this.$target.find('[data-ax5grid-page="status"]')},form:{clipboard:this.$target.find('[data-ax5grid-form="clipboard"]')},resizer:{vertical:this.$target.find('[data-ax5grid-resizer="vertical"]'),horizontal:this.$target.find('[data-ax5grid-resizer="horizontal"]')}},this.$.container.root.css({height:this.config.height}),this},l=function(e){this.columns=i.deepCopy(e),this.headerTable=t.util.makeHeaderTable.call(this,this.columns),this.xvar.frozenColumnIndex=n.frozenColumnIndex>this.columns.length?this.columns.length:n.frozenColumnIndex,this.bodyRowTable=t.util.makeBodyRowTable.call(this,this.columns),this.bodyRowMap=t.util.makeBodyRowMap.call(this,this.bodyRowTable),this.xvar.bodyTrHeight=this.bodyRowTable.rows.length*this.config.body.columnHeight;for(var o={},a=0,l=this.headerTable.rows.length;a<l;a++)for(var r=this.headerTable.rows[a],d=0,s=r.cols.length;d<s;d++)o[r.cols[d].colIndex]=jQuery.extend({},r.cols[d]);this.colGroup=[];for(var c in o)this.colGroup.push(o[c]);return this},r=function(){l.call(this,this.config.columns),d.call(this),this.config.footSum&&(s.call(this,this.config.footSum),this.needToPaintSum=!0),this.config.body.grouping&&c.call(this,this.config.body.grouping),h.call(this,!0),t.header.repaint.call(this,!0),t.body.repaint.call(this,!0),t.scroller.resize.call(this)},d=function(){var t,e,n,o=this.$.container.root.width(),a=0,l=[],r=this.colGroup;for(e=0,n=r.length;e<n;e++)i.isNumber(r[e].width)?a+=r[e]._width=r[e].width:"*"===r[e].width?l.push(e):"%"===i.right(r[e].width,1)&&(a+=r[e]._width=o*i.left(r[e].width,"%")/100);if(l.length>0)for(t=(o-a)/l.length,e=0,n=l.length;e<n;e++)r[l[e]]._width=t},s=function(e){i.isArray(e)?this.footSumTable=t.util.makeFootSumTable.call(this,this.footSumColumns=e):(this.footSumColumns=[],this.footSumTable={})},c=function(e){var i=jQuery.extend({},e);"by"in i&&"columns"in i?(this.bodyGrouping={by:i.by,columns:i.columns},this.bodyGroupingTable=t.util.makeBodyGroupingTable.call(this,this.bodyGrouping.columns),this.sortInfo=function(){for(var t={},e=0,i=this.bodyGrouping.by.length;e<i;e++){t[this.bodyGrouping.by[e]]={orderBy:"asc",seq:e,fixed:!0};for(var n=0,o=this.colGroup.length;n<o;n++)this.colGroup[n].key===this.bodyGrouping.by[e]&&(this.colGroup[n].sort="asc",this.colGroup[n].sortFixed=!0)}return t}.call(this)):n.body.grouping=!1},h=function(t){var e,i,o=this.$.container.root.width(),a=this.$.container.root.height(),l=o,r=a,d=n.asidePanelWidth=function(){var t=0;return n.showLineNumber&&(t+=n.lineNumberColumnWidth),n.showRowSelector&&(t+=n.rowSelectorColumnWidth),t}(),s=n.frozenPanelWidth=function(t,e){for(var i=0,n=0,o=e;n<o;n++)i+=t[n]._width;return i}(this.colGroup,n.frozenColumnIndex),c=0,h=function(t){return n.frozenRowIndex*t}(this.xvar.bodyTrHeight),u=function(t){return this.footSumColumns.length*t}.call(this,this.xvar.bodyTrHeight),g=this.headerTable.rows.length*n.header.columnHeight,f=n.page.display?n.page.height:0;(function(){e=a-g-f-u<this.list.length*this.xvar.bodyTrHeight?this.config.scroller.size:0,i=function(){for(var t=0,i=o-d-e,n=0,a=this.colGroup.length;n<a;n++)t+=this.colGroup[n]._width;return t>i?this.config.scroller.size:0}.call(this),i>0&&(e=a-g-f-u-i<this.list.length*this.xvar.bodyTrHeight?this.config.scroller.size:0)}).call(this),l=o-e,r=a-f-i;var x=r-g,p=function(t,e,i,o){var a={},r=!1;switch(i){case"aside":0===d?r=!0:(a.left=0,a.width=d);break;case"left":0===n.frozenColumnIndex?r=!0:(a.left=d,a.width=s);break;case"right":n.rightSum||(r=!0);break;default:"page"!==o&&(0===n.frozenColumnIndex?a.left=d:a.left=s+d,a.width=l-d-s-c)}if(r)return t.hide(),this;if("body"===o)switch(e){case"top":0==n.frozenRowIndex?r=!0:(a.top=0,a.height=h);break;case"bottom":n.footSum?(a.top=x-u,a.height=u):r=!0;break;default:a.top=h,a.height=x-h-u}else"header"===o?a.height=g:"page"===o&&(0==f?r=!0:a.height=f);return r?(t.hide(),this):(t.css(a),this)},m=function(t,e,i,n){var o={},a=!1;switch(n){case"vertical":e>0?(o.width=e,o.height=r,o.bottom=i+f):a=!0;break;case"horizontal":i>0?(o.width=l,o.height=i,o.right=e,o.bottom=f):a=!0;break;case"corner":e>0&&i>0?(o.width=e,o.height=i,o.bottom=f):a=!0}return a?(t.hide(),this):void t.show().css(o)};this.$.container.header.css({height:g}),this.$.container.body.css({height:x}),p.call(this,this.$.panel["aside-header"],"","aside","header"),p.call(this,this.$.panel["left-header"],"","left","header"),p.call(this,this.$.panel.header,"","","header"),p.call(this,this.$.panel["right-header"],"","right","header"),p.call(this,this.$.panel["top-aside-body"],"top","aside","body"),p.call(this,this.$.panel["top-left-body"],"top","left","body"),p.call(this,this.$.panel["top-body"],"top","","body"),p.call(this,this.$.panel["top-right-body"],"top","right","body"),p.call(this,this.$.panel["aside-body"],"","aside","body"),p.call(this,this.$.panel["left-body"],"","left","body"),p.call(this,this.$.panel.body,"","","body"),p.call(this,this.$.panel["right-body"],"","right","body"),p.call(this,this.$.panel["bottom-aside-body"],"bottom","aside","body"),p.call(this,this.$.panel["bottom-left-body"],"bottom","left","body"),p.call(this,this.$.panel["bottom-body"],"bottom","","body"),p.call(this,this.$.panel["bottom-right-body"],"bottom","right","body"),m.call(this,this.$.scroller.vertical,e,i,"vertical"),m.call(this,this.$.scroller.horizontal,e,i,"horizontal"),m.call(this,this.$.scroller.corner,e,i,"corner"),p.call(this,this.$.container.page,"","","page")},u=function(e){if(t.header.repaint.call(this),i.isFunction(this.config.remoteSort)){var n={sortInfo:[]};for(var o in e)n.sortInfo.push({key:o,orderBy:e[o].orderBy,seq:e[o].seq});n.sortInfo.sort(function(t,e){return t.seq>e.seq}),this.config.remoteSort.call(n,n)}else this.config.body.grouping?this.list=t.data.initData.call(this,t.data.sort.call(this,e,t.data.clearGroupingData.call(this,this.list))):this.list=t.data.sort.call(this,e,t.data.clearGroupingData.call(this,this.list)),t.body.repaint.call(this,!0),t.scroller.resize.call(this)};this.init=function(e){if(n=jQuery.extend(!0,{},n,e),!n.target)return console.log(ax5.info.getError("ax5grid","401","init")),this;this.onStateChanged=n.onStateChanged,this.onClick=n.onClick,this.onLoad=n.onLoad,this.onDataChanged=n.body.onDataChanged,this.$target=jQuery(n.target),function(t){i.isObject(t)&&!t.error&&(n=jQuery.extend(!0,n,t))}.call(this,i.parseJson(this.$target.attr("data-ax5grid-config"),!0));var r=this.config=n;this.config.height||(this.config.height=this.$target.height()),this.id||(this.id=this.$target.data("data-ax5grid-id")),this.id||(this.id="ax5grid-"+this.instanceId,this.$target.data("data-ax5grid-id",r.id)),a.call(this),l.call(this,r.columns),d.call(this),r.footSum&&s.call(this,r.footSum),r.body.grouping&&c.call(this,r.body.grouping),h.call(this,!0),t.header.init.call(this),t.header.repaint.call(this),t.body.init.call(this),t.body.repaint.call(this),t.scroller.init.call(this),t.scroller.resize.call(this),jQuery(window).bind("resize.ax5grid-"+this.id,function(){h.call(this),t.scroller.resize.call(this)}.bind(this)),jQuery(document.body).on("click.ax5grid-"+this.id,function(e){var n=!1,a=i.findParentNode(e.target,function(t){return!!(n=t.getAttribute("data-ax5grid-inline-edit-picker"))||"root"===t.getAttribute("data-ax5grid-container")});a&&a.getAttribute("data-ax5grid-instance")===this.id?o.focused=!0:(o.focused=!1,t.body.blur.call(this))}.bind(this));var u={33:"KEY_PAGEUP",34:"KEY_PAGEDOWN",35:"KEY_END",36:"KEY_HOME",37:"KEY_LEFT",38:"KEY_UP",39:"KEY_RIGHT",40:"KEY_DOWN"};return jQuery(window).on("keydown.ax5grid-"+this.instanceId,function(e){o.focused&&(o.isInlineEditing?e.which==ax5.info.eventKeys.ESC?o.keyDown("ESC",e.originalEvent):e.which==ax5.info.eventKeys.RETURN?o.keyDown("RETURN",e.originalEvent):e.which==ax5.info.eventKeys.TAB?(o.keyDown("TAB",e.originalEvent),i.stopEvent(e)):e.which==ax5.info.eventKeys.UP?o.keyDown("RETURN",{shiftKey:!0}):e.which==ax5.info.eventKeys.DOWN&&o.keyDown("RETURN",{}):e.metaKey||e.ctrlKey?67==e.which&&o.copySelect():u[e.which]?(o.keyDown(u[e.which],e.originalEvent),i.stopEvent(e)):e.which==ax5.info.eventKeys.ESC?o.focused&&t.body.blur.call(o):e.which==ax5.info.eventKeys.RETURN?o.keyDown("RETURN",e.originalEvent):e.which==ax5.info.eventKeys.TAB?i.stopEvent(e):e.which!=ax5.info.eventKeys.SPACE&&Object.keys(o.focusedColumn).length&&o.keyDown("INLINE_EDIT",e.originalEvent))}),setTimeout(function(){this.onLoad&&this.onLoad.call({self:this})}.bind(this)),this},this.align=function(){return h.call(this),t.scroller.resize.call(this),this},this.keyDown=function(){var e={KEY_UP:function(){t.body.moveFocus.call(this,"UP")},KEY_DOWN:function(){t.body.moveFocus.call(this,"DOWN")},KEY_LEFT:function(){t.body.moveFocus.call(this,"LEFT")},KEY_RIGHT:function(){t.body.moveFocus.call(this,"RIGHT")},KEY_HOME:function(){t.body.moveFocus.call(this,"HOME")},KEY_END:function(){t.body.moveFocus.call(this,"END")},INLINE_EDIT:function(e){t.body.inlineEdit.active.call(this,this.focusedColumn,e),/[0-9a-zA-Z]/.test(e.key)||i.stopEvent(e)},ESC:function(e){t.body.inlineEdit.keydown.call(this,"ESC")},RETURN:function(e){var i=0;for(var n in this.inlineEditing)i++,t.body.inlineEdit.keydown.call(this,"RETURN",n),1==i&&t.body.moveFocus.call(this,e.shiftKey?"UP":"DOWN")&&t.body.inlineEdit.keydown.call(this,"RETURN");0==i&&t.body.inlineEdit.keydown.call(this,"RETURN")},TAB:function(e){var i=0;for(var n in this.inlineEditing)i++,t.body.inlineEdit.keydown.call(this,"RETURN",n),1==i&&t.body.moveFocus.call(this,e.shiftKey?"LEFT":"RIGHT")&&t.body.inlineEdit.keydown.call(this,"RETURN")}};return function(t,i){return t in e&&e[t].call(this,i),this}}(),this.copySelect=function(){var t,e,i,n,o=this.$.form.clipboard,a=[],l="",r=0;for(var d in this.selectedColumn){var s=this.selectedColumn[d];if(s){"undefined"==typeof n&&(n=s.dindex,e=s.rowIndex,i=s.rowIndex),n==s.dindex&&e==s.rowIndex||r++,a[r]||(a[r]=[]);var c=this.bodyRowMap[s.rowIndex+"_"+s.colIndex];c?this.list[s.dindex].__isGrouping?a[r].push(this.list[s.dindex][s.colIndex]):a[r].push(this.list[s.dindex][c.key]):a[r].push(""),n=s.dindex,e=s.rowIndex}}a.forEach(function(t){l+=t.join("\t")+"\n"}),o.get(0).innerText=l,o.select();try{t=document.execCommand("copy")}catch(h){t=!1}return t},this.setData=function(e){return t.data.set.call(this,e),h.call(this),t.body.repaint.call(this),t.scroller.resize.call(this),t.page.navigationUpdate.call(this),t.body.scrollTo.call(this,{top:0}),this},this.getList=function(e){return t.data.getList.call(this,e)},this.setHeight=function(e){return"100%"==e&&(e=this.$target.offsetParent().innerHeight()),this.$target.css({height:e}),this.$.container.root.css({height:e}),h.call(this),t.body.repaint.call(this,"reset"),t.scroller.resize.call(this),this},this.addRow=function(e,i,n){return t.data.add.call(this,e,i,n),h.call(this),t.body.repaint.call(this,"reset"),t.body.moveFocus.call(this,this.config.body.grouping?"START":"END"),t.scroller.resize.call(this),this},this.removeRow=function(e){return t.data.remove.call(this,e),h.call(this),t.body.repaint.call(this,"reset"),t.body.moveFocus.call(this,this.config.body.grouping?"START":"END"),t.scroller.resize.call(this),this},this.updateRow=function(e,i){return t.data.update.call(this,e,i),t.body.repaintRow.call(this,i),this},this.deleteRow=function(e){return t.data.deleteRow.call(this,e),h.call(this),t.body.repaint.call(this,"reset"),t.scroller.resize.call(this),this},this.addColumn=function(){var t={first:function(t){this.config.columns=[].concat(t).concat(this.config.columns)},last:function(t){this.config.columns=this.config.columns.concat([].concat(t))}};return function(e,n){if("undefined"==typeof e)throw"_column must not be null";if("undefined"==typeof n&&(n="last"),n in t)t[n].call(this,e);else{if(!i.isNumber(n))throw"invalid argument _cindex";this.config.columns.splice(n,[].concat(e))}return r.call(this),this}}(),this.removeColumn=function(){var t={first:function(t){this.config.columns.splice(t,1)},last:function(){this.config.columns.splice(this.config.columns.length-1,1)}};return function(e){if("undefined"==typeof e&&(e="last"),e in t)t[e].call(this,e);else{if(!i.isNumber(e))throw"invalid argument _cindex";this.config.columns.splice(e,1)}return r.call(this),this}}(),this.updateColumn=function(t,e){if(!i.isNumber(e))throw"invalid argument _cindex";return this.config.columns.splice(e,1,t),r.call(this),this},this.setColumnWidth=function(e,i){return this.colGroup[this.xvar.columnResizerIndex]._width=e,this.needToPaintSum=!0,t.header.repaint.call(this),t.body.repaint.call(this,!0),t.scroller.resize.call(this),h.call(this),this},this.getColumnSortInfo=function(){var t={sortInfo:[]};for(var e in this.sortInfo)t.sortInfo.push({key:e,orderBy:this.sortInfo[e].orderBy,seq:this.sortInfo[e].seq});return t.sortInfo.sort(function(t,e){return t.seq>e.seq}),t.sortInfo},this.setColumnSort=function(e){return"undefined"!=typeof e&&(this.sortInfo=e,t.header.applySortStatus.call(this,e)),u.call(this,e||this.sortInfo),this},this.select=function(e,n){if(i.isNumber(e)){var o=e;this.config.multipleSelect?n&&n.selectedClear&&(t.body.updateRowState.call(this,["selectedClear"]),t.data.clearSelect.call(this)):(t.body.updateRowState.call(this,["selectedClear"]),t.data.clearSelect.call(this)),t.data.select.call(this,o),t.body.updateRowState.call(this,["selected"],o)}return this},this.main=function(){e.grid_instance=e.grid_instance||[],e.grid_instance.push(this),arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return n}()),t=ax5.ui.grid}(),function(){var t=ax5.ui.grid,e=ax5.util,i={focusClear:function(){var t=this;for(var e in t.focusedColumn){var i=t.focusedColumn[e];i&&t.$.panel[i.panelName].find('[data-ax5grid-tr-data-index="'+i.dindex+'"]').find('[data-ax5grid-column-rowindex="'+i.rowIndex+'"][data-ax5grid-column-colindex="'+i.colIndex+'"]').removeAttr("data-ax5grid-column-focused")}t.focusedColumn={}},clear:function(){var t=this;for(var e in t.selectedColumn){var i=t.selectedColumn[e];i&&t.$.panel[i.panelName].find('[data-ax5grid-tr-data-index="'+i.dindex+'"]').find('[data-ax5grid-column-rowindex="'+i.rowIndex+'"][data-ax5grid-column-colindex="'+i.colIndex+'"]').removeAttr("data-ax5grid-column-selected")}t.selectedColumn={}},init:function(e){var n=this;if(this.isInlineEditing)for(var o in this.inlineEditing)if(o==e.dindex+"_"+e.colIndex+"_"+e.rowIndex)return this;i.focusClear.call(n),n.focusedColumn[e.dindex+"_"+e.colIndex+"_"+e.rowIndex]={panelName:e.panelName,dindex:e.dindex,rowIndex:e.rowIndex,colIndex:e.colIndex,colspan:e.colspan},i.clear.call(n),n.xvar.selectedRange={start:[e.dindex,e.rowIndex,e.colIndex,e.colspan-1],end:null},n.selectedColumn[e.dindex+"_"+e.colIndex+"_"+e.rowIndex]=function(t){return!t&&{panelName:e.panelName,dindex:e.dindex,rowIndex:e.rowIndex,colIndex:e.colIndex,colspan:e.colspan}}(n.selectedColumn[e.dindex+"_"+e.colIndex+"_"+e.rowIndex]),this.$.panel[e.panelName].find('[data-ax5grid-tr-data-index="'+e.dindex+'"]').find('[data-ax5grid-column-rowindex="'+e.rowIndex+'"][data-ax5grid-column-colindex="'+e.colIndex+'"]').attr("data-ax5grid-column-focused","true").attr("data-ax5grid-column-selected","true"),this.isInlineEditing&&t.body.inlineEdit.deActive.call(this,"RETURN")},update:function(t){var e,n,o,a,l=this;l.xvar.selectedRange.end=[t.dindex,t.rowIndex,t.colIndex,t.colspan-1],i.clear.call(l);var r={r:{s:Math.min(l.xvar.selectedRange.start[0],l.xvar.selectedRange.end[0]),e:Math.max(l.xvar.selectedRange.start[0],l.xvar.selectedRange.end[0])},c:{s:Math.min(l.xvar.selectedRange.start[2],l.xvar.selectedRange.end[2]),e:Math.max(l.xvar.selectedRange.start[2]+l.xvar.selectedRange.start[3],l.xvar.selectedRange.end[2]+l.xvar.selectedRange.end[3])}};for(e=r.r.s;e<=r.r.e;e++)for(a=this.bodyRowTable.rows.length,o=0;o<a;o++)for(n=r.c.s;n<=r.c.e;n++){var d=[],s="";l.xvar.frozenRowIndex>e&&d.push("top"),l.xvar.frozenColumnIndex>n&&d.push("left"),d.push("body"),"top"!==d[0]&&d.push("scroll"),s=d.join("-"),l.selectedColumn[e+"_"+n+"_"+o]={panelName:s,dindex:e,rowIndex:o,colIndex:n,colspan:t.colspan},d=null,s=null}e=null,n=null,o=null;for(var c in l.selectedColumn){var h=l.selectedColumn[c];h&&l.$.panel[h.panelName].find('[data-ax5grid-tr-data-index="'+h.dindex+'"]').find('[data-ax5grid-column-rowindex="'+h.rowIndex+'"][data-ax5grid-column-colindex="'+h.colIndex+'"]').attr("data-ax5grid-column-selected","true")}}},n={on:function(t){var o=this;this.inlineEditing[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]||(i.init.call(o,t),this.$.container.body.on("mousemove.ax5grid-"+this.instanceId,'[data-ax5grid-column-attr="default"]',function(t){this.getAttribute("data-ax5grid-column-rowIndex")&&(i.update.call(o,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))}),e.stopEvent(t))}).on("mouseup.ax5grid-"+this.instanceId,function(){n.off.call(o)}).on("mouseleave.ax5grid-"+this.instanceId,function(){n.off.call(o)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1))},off:function(){this.$.container.body.off("mousemove.ax5grid-"+this.instanceId).off("mouseup.ax5grid-"+this.instanceId).off("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},o=function(t,e,i){var n=this,o=this.config,a={selected:function(t){for(var e=this.$.livePanelKeys.length;e--;)this.$.panel[this.$.livePanelKeys[e]].find('[data-ax5grid-tr-data-index="'+t+'"]').attr("data-ax5grid-selected",this.list[t][o.columnKeys.selected])},selectedClear:function(){for(var t=this.selectedDataIndexs.length;t--;)for(var e=this.selectedDataIndexs[t],i=this.$.livePanelKeys.length;i--;)this.$.panel[this.$.livePanelKeys[i]].find('[data-ax5grid-tr-data-index="'+e+'"]').attr("data-ax5grid-selected",!1),this.list[e][o.columnKeys.selected]=!1},cellChecked:function(t,e){var i=(e.key,e.rowIndex),n=e.colIndex,o=function(){var e=[];return this.xvar.frozenRowIndex>t&&e.push("top"),this.xvar.frozenColumnIndex>n&&e.push("left"),e.push("body"),"top"!==e[0]&&e.push("scroll"),e.join("-")}.call(this);this.$.panel[o].find('[data-ax5grid-tr-data-index="'+t+'"]').find('[data-ax5grid-column-rowIndex="'+i+'"][data-ax5grid-column-colIndex="'+n+'"]').find('[data-ax5grid-editor="checkbox"]').attr("data-ax5grid-checked",""+e.checked)}};t.forEach(function(t){if(!a[t])throw"invaild state name";a[t].call(n,e,i)})},a=function(){var i=this;this.$.container.body.on("click","[data-ax5grid-column-attr]",function(e){var n,a,l,r,d,s,c,h={"default":function(e){var n=i.bodyRowMap[e.rowIndex+"_"+e.colIndex],a={self:i,page:i.page,list:i.list,item:i.list[e.dindex],dindex:e.dindex,rowIndex:e.rowIndex,colIndex:e.colIndex,column:n,value:i.list[e.dindex][n.key]};if(n.editor&&"checkbox"==n.editor.type){var l,r,d=t.data.getValue.call(i,e.dindex,n.key);r=n.editor.config&&n.editor.config.trueValue?(l=!(d==n.editor.config.trueValue))?n.editor.config.trueValue:n.editor.config.falseValue:l=0==d||"false"==d||d<"1"?"true":"false",t.data.setValue.call(i,e.dindex,n.key,r),o.call(i,["cellChecked"],e.dindex,{key:n.key,rowIndex:e.rowIndex,colIndex:e.colIndex,editorConfig:n.editor.config,checked:l})}else i.config.body.onClick&&i.config.body.onClick.call(a)},rowSelector:function(e){i.config.multipleSelect||i.selectedDataIndexs[0]===e.dindex||(t.body.updateRowState.call(i,["selectedClear"]),t.data.clearSelect.call(i)),t.data.select.call(i,e.dindex,void 0,{internalCall:!0}),o.call(i,["selected"],e.dindex)},lineNumber:function(t){}};n=this.getAttribute("data-ax5grid-panel-name"),a=this.getAttribute("data-ax5grid-column-attr"),l=Number(this.getAttribute("data-ax5grid-column-row")),r=Number(this.getAttribute("data-ax5grid-column-col")),s=Number(this.getAttribute("data-ax5grid-column-rowIndex")),c=Number(this.getAttribute("data-ax5grid-column-colIndex")),d=Number(this.getAttribute("data-ax5grid-data-index")),a in h&&h[a]({panelName:n,attr:a,row:l,col:r,dindex:d,rowIndex:s,colIndex:c})}),this.$.container.body.on("dblclick","[data-ax5grid-column-attr]",function(e){var n,o,a,l,r,d,s,c={"default":function(n){if(this.isInlineEditing)for(var o in this.inlineEditing)if(o==n.dindex+"_"+n.colIndex+"_"+n.rowIndex)return this;var a=i.bodyRowMap[n.rowIndex+"_"+n.colIndex],l="";a&&(i.list[r].__isGrouping||(l=t.data.getValue.call(i,r,a.key))),t.body.inlineEdit.active.call(i,i.focusedColumn,e,l)},rowSelector:function(t){},lineNumber:function(t){}};n=this.getAttribute("data-ax5grid-panel-name"),o=this.getAttribute("data-ax5grid-column-attr"),a=Number(this.getAttribute("data-ax5grid-column-row")),l=Number(this.getAttribute("data-ax5grid-column-col")),d=Number(this.getAttribute("data-ax5grid-column-rowIndex")),s=Number(this.getAttribute("data-ax5grid-column-colIndex")),r=Number(this.getAttribute("data-ax5grid-data-index")),o in c&&c[o]({panelName:n,attr:o,row:a,col:l,dindex:r,rowIndex:d,colIndex:s})}),this.$.container.body.on("mouseover","tr",function(){return}),this.$.container.body.on("mousedown",'[data-ax5grid-column-attr="default"]',function(t){this.getAttribute("data-ax5grid-column-rowIndex")&&n.on.call(i,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))})}).on("dragstart",function(t){return e.stopEvent(t),!1}),l.call(this)},l=function(){var e=this.config,i=t.util.divideTableByFrozenColumnIndex(this.bodyRowTable,this.xvar.frozenColumnIndex);if(this.asideBodyRowData=function(t){for(var i={rows:[]},n=0,o=t.rows.length;n<o;n++)if(i.rows[n]={cols:[]},0===n){var a={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},l={};e.showLineNumber&&(l=jQuery.extend({},a,{width:e.lineNumberColumnWidth,_width:e.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),i.rows[n].cols.push(l)),e.showRowSelector&&(l=jQuery.extend({},a,{width:e.rowSelectorColumnWidth,_width:e.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),i.rows[n].cols.push(l))}return i}.call(this,this.bodyRowTable),this.leftBodyRowData=i.leftData,this.bodyRowData=i.rightData,e.body.grouping){var n=t.util.divideTableByFrozenColumnIndex(this.bodyGroupingTable,this.xvar.frozenColumnIndex);this.asideBodyGroupingData=function(t){for(var i={rows:[]},n=0,o=t.rows.length;n<o;n++)if(i.rows[n]={cols:[]},0===n){var a={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},l={};e.showLineNumber&&(l=jQuery.extend({},a,{width:e.lineNumberColumnWidth,_width:e.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),i.rows[n].cols.push(l)),e.showRowSelector&&(l=jQuery.extend({},a,{width:e.rowSelectorColumnWidth,_width:e.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),i.rows[n].cols.push(l))}return i}.call(this,this.bodyGroupingTable),this.leftBodyGroupingData=n.leftData,this.bodyGroupingData=n.rightData}if(this.leftFootSumData={},this.footSumData={},this.config.footSum){var o=t.util.divideTableByFrozenColumnIndex(this.footSumTable,this.xvar.frozenColumnIndex);this.leftFootSumData=o.leftData,this.footSumData=o.rightData}},r=function(i,n,o,a,l){var r=a.key;if("__d-index__"===r)return o+1;if("__d-checkbox__"===r)return'<div class="checkBox"></div>';if(a.editor&&function(e){return e.type in t.inlineEditor&&"inline"==t.inlineEditor[e.type].editMode}(a.editor))return l=l||t.data.getValue.call(this,o,r),e.isFunction(a.editor.disabled)&&a.editor.disabled.call({list:i,dindex:o,item:i[o],key:r,value:l})?l:t.inlineEditor[a.editor.type].getHtml(this,a.editor,l);if(a.formatter){var d={key:r,value:l||t.data.getValue.call(this,o,r),dindex:o,item:n,list:i};return e.isFunction(a.formatter)?a.formatter.call(d):t.formatter[a.formatter].call(d)}var s="&nbsp;";return"undefined"!=typeof l?s=l:(l=t.data.getValue.call(this,o,r),"undefined"!=typeof l&&(s=l)),s},d=function(i,n,o){var a,l,r=o.key,d=o.label;return"undefined"==typeof r?(l={key:r,list:i.__groupingList,groupBy:i.__groupingBy},a=e.isFunction(d)?d.call(l):d,i[o.colIndex]=a,a):"__d-index__"===r?n+1:"__d-checkbox__"===r?"&nbsp;":o.collector?(l={key:r,list:i.__groupingList},a=e.isFunction(o.collector)?o.collector.call(l):t.collector[o.collector].call(l),i[o.colIndex]=a,o.formatter?(l.value=a,e.isFunction(o.formatter)?o.collector.call(l):t.formatter[o.formatter].call(l)):a):"&nbsp;"},s=function(i,n){var o=n.key,a=n.label;if("undefined"==typeof o)return a;if("__d-index__"===o||"__d-checkbox__"===o)return"&nbsp;";if(n.collector){var l,r={key:o,list:i};return l=e.isFunction(n.collector)?n.collector.call(r):t.collector[n.collector].call(r),n.formatter?(r.value=l,e.isFunction(n.formatter)?n.collector.call(r):t.formatter[n.formatter].call(r)):l}return"&nbsp;"},c=function(i){var n=this.config,o=this.list;i&&(l.call(this),this.xvar.paintStartRowIndex=void 0);var a=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex;if(this.xvar.dataRowCount===o.length&&this.xvar.paintStartRowIndex===a)return this;var c="undefined"==typeof this.xvar.paintStartRowIndex,h=this.asideBodyRowData,u=this.leftBodyRowData,g=this.bodyRowData,f=this.leftFootSumData,x=this.footSumData,p=this.asideBodyGroupingData,m=this.leftBodyGroupingData,y=this.bodyGroupingData,v=n.body.align,b=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1;this.xvar.scrollContentHeight=this.xvar.bodyTrHeight*(this.list.length-this.xvar.frozenRowIndex),this.$.livePanelKeys=[];var w=function(t,i,o,a,l,s){var h=this.$.panel[t];if(!c&&!s)return this.$.livePanelKeys.push(t),!1;var u,g,f,x,p,m,y,b,w,I,_,C=[],R=function(){return"undefined"!=typeof s&&"undefined"!=typeof s.paintStartRowIndex||(s={paintStartRowIndex:0,paintRowCount:l.length},!1)}();for(C.push('<table border="0" cellpadding="0" cellspacing="0">'),C.push("<colgroup>"),u=0,g=i.length;u<g;u++)C.push('<col style="width:'+i[u]._width+'px;"  />');for(C.push("<col  />"),C.push("</colgroup>"),f=s.paintStartRowIndex,x=function(){var t;return t=l.length,s.paintRowCount+s.paintStartRowIndex<t&&(t=s.paintRowCount+s.paintStartRowIndex),t}();f<x;f++){var E,S=!1;a&&"__isGrouping"in l[f]?(E=a,S=!0):E=o;for(p=0,m=E.rows.length;p<m;p++){for(C.push('<tr class="tr-'+f%4+'"',S?' data-ax5grid-grouping-tr="true"':"",' data-ax5grid-tr-data-index="'+f+'"',' data-ax5grid-selected="'+(l[f][n.columnKeys.selected]||"false")+'">'),y=0,b=E.rows[p].cols.length;y<b;y++)w=E.rows[p].cols[y],I=n.body.columnHeight*w.rowspan-n.body.columnBorderWidth,_=w.align||v,C.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+f+'" ','data-ax5grid-column-row="'+p+'" ','data-ax5grid-column-col="'+y+'" ','data-ax5grid-column-rowIndex="'+w.rowIndex+'" ','data-ax5grid-column-colIndex="'+w.colIndex+'" ','data-ax5grid-column-attr="'+(w.columnAttr||"default")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn[f+"_"+w.colIndex+"_"+w.rowIndex],this.selectedColumn[f+"_"+w.colIndex+"_"+w.rowIndex]),'colspan="'+w.colspan+'" ','rowspan="'+w.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:l[f],index:f})+" ":t.styleClass+" "),n.body.columnBorderWidth&&(i+="hasBorder "),y==b-1&&(i+="isLastColumn "),i}.call(this,w)+'" ','style="height: '+I+'px;min-height: 1px;">'),C.push(function(t){var e=n.body.columnHeight-2*n.body.columnPadding-n.body.columnBorderWidth;
return w.multiLine||(t=n.body.columnHeight-n.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(w.multiLine?"multiLine":"")+'" '+(_?'data-ax5grid-text-align="'+_+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(I),S?d.call(this,l[f],f,w):r.call(this,l,l[f],f,w),"</span>"),C.push("</td>");C.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+f+'" ','data-ax5grid-column-attr="default" ','style="height: '+n.body.columnHeight+'px;min-height: 1px;" ',"></td>"),C.push("</tr>")}}return C.push("</table>"),R&&h.css({paddingTop:(s.paintStartRowIndex-this.xvar.frozenRowIndex)*s.bodyTrHeight}),h.html(C.join("")),this.$.livePanelKeys.push(t),!0},I=function(t,i,o,a,l){var r=this.$.panel[t];if(!c&&!l)return this.$.livePanelKeys.push(t),!1;var d,h,u,g,f,x,p,m,y,b=[];for(b.push('<table border="0" cellpadding="0" cellspacing="0">'),b.push("<colgroup>"),d=0,h=i.length;d<h;d++)b.push('<col style="width:'+i[d]._width+'px;"  />');for(b.push("<col  />"),b.push("</colgroup>"),u=0,g=o.rows.length;u<g;u++){for(b.push('<tr class="tr-sum">'),f=0,x=o.rows[u].cols.length;f<x;f++)p=o.rows[u].cols[f],m=n.body.columnHeight*p.rowspan-n.body.columnBorderWidth,y=p.align||v,b.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+f+'" ','data-ax5grid-column-rowIndex="'+u+'" ','data-ax5grid-column-colIndex="'+p.colIndex+'" ','data-ax5grid-column-attr="'+(p.columnAttr||"sum")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn["sum_"+p.colIndex+"_"+u],this.selectedColumn["sum_"+p.colIndex+"_"+u]),'colspan="'+p.colspan+'" ','rowspan="'+p.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),n.body.columnBorderWidth&&(i+="hasBorder "),f==x-1&&(i+="isLastColumn "),i}.call(this,p)+'" ','style="height: '+m+'px;min-height: 1px;">'),b.push(function(t){var e=n.body.columnHeight-2*n.body.columnPadding-n.body.columnBorderWidth;return p.multiLine||(t=n.body.columnHeight-n.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(p.multiLine?"multiLine":"")+'" '+(y?'data-ax5grid-text-align="'+y+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(m),s.call(this,a,p),"</span>"),b.push("</td>");b.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+n.body.columnHeight+'px;min-height: 1px;" ',"></td>"),b.push("</tr>")}return b.push("</table>"),r.html(b.join("")),this.$.livePanelKeys.push(t),!0},_={paintStartRowIndex:a,paintRowCount:b,bodyTrHeight:this.xvar.bodyTrHeight};n.asidePanelWidth>0&&(this.xvar.frozenRowIndex>0&&w.call(this,"top-aside-body",this.asideColGroup,h,p,o.slice(0,this.xvar.frozenRowIndex)),w.call(this,"aside-body-scroll",this.asideColGroup,h,p,o,_),n.footSum),this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&w.call(this,"top-left-body",this.leftHeaderColGroup,u,m,o.slice(0,this.xvar.frozenRowIndex)),w.call(this,"left-body-scroll",this.leftHeaderColGroup,u,m,o,_),n.footSum&&this.needToPaintSum&&I.call(this,"bottom-left-body",this.leftHeaderColGroup,f,o)),this.xvar.frozenRowIndex>0&&w.call(this,"top-body-scroll",this.headerColGroup,g,y,o.slice(0,this.xvar.frozenRowIndex)),w.call(this,"body-scroll",this.headerColGroup,g,y,o,_),n.footSum&&this.needToPaintSum&&I.call(this,"bottom-body-scroll",this.headerColGroup,x,o,_),n.rightSum,this.xvar.paintStartRowIndex=a,this.xvar.paintRowCount=b,this.xvar.dataRowCount=o.length,this.needToPaintSum=!1,t.page.statusUpdate.call(this)},h=function(i,n,o,a,l){var c=this,h=this.config,u=this.list,g=this.$.panel[i].find('[data-ax5grid-tr-data-index="'+n+'"]').find('[data-ax5grid-column-rowindex="'+o+'"][data-ax5grid-column-colindex="'+a+'"]').find("[data-ax5grid-cellholder]"),f=this.colGroup,x=f[a];g.html(r.call(this,u,u[n],n,x)),x.editor&&x.editor.updateWith&&x.editor.updateWith.forEach(function(e){f.forEach(function(i){if(i.key==e){var o=i.rowIndex,a=i.colIndex,l=t.util.findPanelByColumnIndex.call(c,n,a,o).panelName,d=c.$.panel[l].find('[data-ax5grid-tr-data-index="'+n+'"]').find('[data-ax5grid-column-rowindex="'+o+'"][data-ax5grid-column-colindex="'+a+'"]').find("[data-ax5grid-cellholder]");d.html(r.call(c,u,u[n],n,i))}})});var p=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,m=this.leftFootSumData,y=this.footSumData,v=(this.asideBodyGroupingData,this.leftBodyGroupingData),b=this.bodyGroupingData,w=h.body.align,I=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1,_={paintStartRowIndex:p,paintRowCount:I,bodyTrHeight:this.xvar.bodyTrHeight},C=function(t,i,n,o,a){var l,r,d,c,u,g,f,x,p,m=this.$.panel[t],y=[];for(y.push('<table border="0" cellpadding="0" cellspacing="0">'),y.push("<colgroup>"),l=0,r=i.length;l<r;l++)y.push('<col style="width:'+i[l]._width+'px;"  />');for(y.push("<col  />"),y.push("</colgroup>"),d=0,c=n.rows.length;d<c;d++){for(y.push('<tr class="tr-sum">'),u=0,g=n.rows[d].cols.length;u<g;u++)f=n.rows[d].cols[u],x=h.body.columnHeight*f.rowspan-h.body.columnBorderWidth,p=f.align||w,y.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-column-row="'+d+'" ','data-ax5grid-column-col="'+u+'" ','data-ax5grid-column-rowIndex="'+d+'" ','data-ax5grid-column-colIndex="'+f.colIndex+'" ','data-ax5grid-column-attr="'+(f.columnAttr||"sum")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn["sum_"+f.colIndex+"_"+d],this.selectedColumn["sum_"+f.colIndex+"_"+d]),'colspan="'+f.colspan+'" ','rowspan="'+f.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),h.body.columnBorderWidth&&(i+="hasBorder "),u==g-1&&(i+="isLastColumn "),i}.call(this,f)+'" ','style="height: '+x+'px;min-height: 1px;">'),y.push(function(t){var e=h.body.columnHeight-2*h.body.columnPadding-h.body.columnBorderWidth;return f.multiLine||(t=h.body.columnHeight-h.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(f.multiLine?"multiLine":"")+'" '+(p?'data-ax5grid-text-align="'+p+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(x),s.call(this,o,f),"</span>"),y.push("</td>");y.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+h.body.columnHeight+'px;min-height: 1px;" ',"></td>"),y.push("</tr>")}return y.push("</table>"),m.html(y.join("")),!0},R=function(t,i,n,o,a){var l,r,s,c,u,g,f,x,p,m=this.$.panel[t],y=[];for(l=a.paintStartRowIndex,r=function(){var t;return t=o.length,a.paintRowCount+a.paintStartRowIndex<t&&(t=a.paintRowCount+a.paintStartRowIndex),t}();l<r;l++)if(n&&"__isGrouping"in o[l]){var v=n;for(y=[],s=0,c=v.rows.length;s<c;s++){for(u=0,g=v.rows[s].cols.length;u<g;u++)f=v.rows[s].cols[u],x=h.body.columnHeight*f.rowspan-h.body.columnBorderWidth,p=f.align||w,y.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+l+'" ','data-ax5grid-column-row="'+s+'" ','data-ax5grid-column-col="'+u+'" ','data-ax5grid-column-rowIndex="'+f.rowIndex+'" ','data-ax5grid-column-colIndex="'+f.colIndex+'" ','data-ax5grid-column-attr="'+(f.columnAttr||"default")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn[l+"_"+f.colIndex+"_"+f.rowIndex],this.selectedColumn[l+"_"+f.colIndex+"_"+f.rowIndex]),'colspan="'+f.colspan+'" ','rowspan="'+f.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:o[l],index:l})+" ":t.styleClass+" "),h.body.columnBorderWidth&&(i+="hasBorder "),u==g-1&&(i+="isLastColumn "),i}.call(this,f)+'" ','style="height: '+x+'px;min-height: 1px;">'),y.push(function(t){var e=h.body.columnHeight-2*h.body.columnPadding-h.body.columnBorderWidth;return f.multiLine||(t=h.body.columnHeight-h.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(f.multiLine?"multiLine":"")+'" '+(p?'data-ax5grid-text-align="'+p+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(x),d.call(this,o[l],l,f),"</span>"),y.push("</td>");y.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+l+'" ','data-ax5grid-column-attr="default" ','style="height: '+h.body.columnHeight+'px;min-height: 1px;" ',"></td>")}m.find('tr[data-ax5grid-tr-data-index="'+l+'"]').html(y.join(""))}};h.body.grouping&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&R.call(this,"top-left-body",this.leftHeaderColGroup,v,u.slice(0,this.xvar.frozenRowIndex)),R.call(this,"left-body-scroll",this.leftHeaderColGroup,v,u,_)),this.xvar.frozenRowIndex>0&&R.call(this,"top-body-scroll",this.headerColGroup,b,u.slice(0,this.xvar.frozenRowIndex)),R.call(this,"body-scroll",this.headerColGroup,b,u,_)),this.xvar.frozenColumnIndex>0&&h.footSum&&this.needToPaintSum&&C.call(this,"bottom-left-body",this.leftHeaderColGroup,m,u),h.footSum&&this.needToPaintSum&&C.call(this,"bottom-body-scroll",this.headerColGroup,y,u,_)},u=function(t){var i=this.config,n=this.list,o=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,a=(this.asideBodyRowData,this.leftBodyRowData),l=this.bodyRowData,c=this.leftFootSumData,h=this.footSumData,u=(this.asideBodyGroupingData,this.leftBodyGroupingData),g=this.bodyGroupingData,f=i.body.align,x=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1,p={paintStartRowIndex:o,paintRowCount:x,bodyTrHeight:this.xvar.bodyTrHeight},m=function(t,n,o,a){var l,r,d,c,h,u,g,x,p,m=this.$.panel[t],y=[];for(y.push('<table border="0" cellpadding="0" cellspacing="0">'),y.push("<colgroup>"),l=0,r=n.length;l<r;l++)y.push('<col style="width:'+n[l]._width+'px;"  />');for(y.push("<col  />"),y.push("</colgroup>"),d=0,c=o.rows.length;d<c;d++){for(y.push('<tr class="tr-sum">'),h=0,u=o.rows[d].cols.length;h<u;h++)g=o.rows[d].cols[h],x=i.body.columnHeight*g.rowspan-i.body.columnBorderWidth,p=g.align||f,y.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-column-row="'+d+'" ','data-ax5grid-column-col="'+h+'" ','data-ax5grid-column-rowIndex="'+d+'" ','data-ax5grid-column-colIndex="'+g.colIndex+'" ','data-ax5grid-column-attr="'+(g.columnAttr||"sum")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn["sum_"+g.colIndex+"_"+d],this.selectedColumn["sum_"+g.colIndex+"_"+d]),'colspan="'+g.colspan+'" ','rowspan="'+g.rowspan+'" ','class="'+function(t){var n="";return t.styleClass&&(n+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),i.body.columnBorderWidth&&(n+="hasBorder "),h==u-1&&(n+="isLastColumn "),n}.call(this,g)+'" ','style="height: '+x+'px;min-height: 1px;">'),y.push(function(t){var e=i.body.columnHeight-2*i.body.columnPadding-i.body.columnBorderWidth;return g.multiLine||(t=i.body.columnHeight-i.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(g.multiLine?"multiLine":"")+'" '+(p?'data-ax5grid-text-align="'+p+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(x),s.call(this,a,g),"</span>"),y.push("</td>");y.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>"),y.push("</tr>")}return y.push("</table>"),m.html(y.join("")),!0},y=function(t,n,o,a,l){var r,s,c,h,u,g,x,p,m,y=this.$.panel[t],v=[];for(r=l.paintStartRowIndex,s=function(){var t;return t=a.length,l.paintRowCount+l.paintStartRowIndex<t&&(t=l.paintRowCount+l.paintStartRowIndex),t}();r<s;r++)if(o&&"__isGrouping"in a[r]){var b=o;for(v=[],c=0,h=b.rows.length;c<h;c++){for(u=0,g=b.rows[c].cols.length;u<g;u++)x=b.rows[c].cols[u],p=i.body.columnHeight*x.rowspan-i.body.columnBorderWidth,m=x.align||f,v.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+r+'" ','data-ax5grid-column-row="'+c+'" ','data-ax5grid-column-col="'+u+'" ','data-ax5grid-column-rowIndex="'+x.rowIndex+'" ','data-ax5grid-column-colIndex="'+x.colIndex+'" ','data-ax5grid-column-attr="'+(x.columnAttr||"default")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn[r+"_"+x.colIndex+"_"+x.rowIndex],this.selectedColumn[r+"_"+x.colIndex+"_"+x.rowIndex]),'colspan="'+x.colspan+'" ','rowspan="'+x.rowspan+'" ','class="'+function(t){var n="";return t.styleClass&&(n+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:a[r],index:r})+" ":t.styleClass+" "),i.body.columnBorderWidth&&(n+="hasBorder "),u==g-1&&(n+="isLastColumn "),n}.call(this,x)+'" ','style="height: '+p+'px;min-height: 1px;">'),v.push(function(t){var e=i.body.columnHeight-2*i.body.columnPadding-i.body.columnBorderWidth;return x.multiLine||(t=i.body.columnHeight-i.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(x.multiLine?"multiLine":"")+'" '+(m?'data-ax5grid-text-align="'+m+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(p),d.call(this,a[r],r,x),"</span>"),v.push("</td>");v.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+r+'" ','data-ax5grid-column-attr="default" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>")}y.find('tr[data-ax5grid-tr-data-index="'+r+'"]').html(v.join(""))}},v=function(t,n,o,a,l){var l,d,s,c,h,u,g,x,p=this.$.panel[t],m=[],y=o;for(d=0,s=y.rows.length;d<s;d++){for(c=0,h=y.rows[d].cols.length;c<h;c++)u=y.rows[d].cols[c],g=i.body.columnHeight*u.rowspan-i.body.columnBorderWidth,x=u.align||f,m.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+l+'" ','data-ax5grid-column-row="'+d+'" ','data-ax5grid-column-col="'+c+'" ','data-ax5grid-column-rowIndex="'+u.rowIndex+'" ','data-ax5grid-column-colIndex="'+u.colIndex+'" ','data-ax5grid-column-attr="'+(u.columnAttr||"default")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn[l+"_"+u.colIndex+"_"+u.rowIndex],this.selectedColumn[l+"_"+u.colIndex+"_"+u.rowIndex]),'colspan="'+u.colspan+'" ','rowspan="'+u.rowspan+'" ','class="'+function(t){var n="";return t.styleClass&&(n+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:a[l],index:l})+" ":t.styleClass+" "),i.body.columnBorderWidth&&(n+="hasBorder "),c==h-1&&(n+="isLastColumn "),n}.call(this,u)+'" ','style="height: '+g+'px;min-height: 1px;">'),m.push(function(t){var e=i.body.columnHeight-2*i.body.columnPadding-i.body.columnBorderWidth;return u.multiLine||(t=i.body.columnHeight-i.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(u.multiLine?"multiLine":"")+'" '+(x?'data-ax5grid-text-align="'+x+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(g),r.call(this,a,a[l],l,u),"</span>"),m.push("</td>");m.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+l+'" ','data-ax5grid-column-attr="default" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>")}p.find('tr[data-ax5grid-tr-data-index="'+l+'"]').html(m.join(""))};this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&v.call(this,"top-left-body",this.leftHeaderColGroup,a,n,t),v.call(this,"left-body-scroll",this.leftHeaderColGroup,a,n,t)),this.xvar.frozenRowIndex>0&&v.call(this,"top-body-scroll",this.headerColGroup,l,n,t),v.call(this,"body-scroll",this.headerColGroup,l,n,t),i.body.grouping&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&y.call(this,"top-left-body",this.leftHeaderColGroup,u,n.slice(0,this.xvar.frozenRowIndex)),y.call(this,"left-body-scroll",this.leftHeaderColGroup,u,n,p)),this.xvar.frozenRowIndex>0&&y.call(this,"top-body-scroll",this.headerColGroup,g,n.slice(0,this.xvar.frozenRowIndex)),y.call(this,"body-scroll",this.headerColGroup,g,n,p)),this.xvar.frozenColumnIndex>0&&i.footSum&&this.needToPaintSum&&m.call(this,"bottom-left-body",this.leftHeaderColGroup,c,n),i.footSum&&this.needToPaintSum&&m.call(this,"bottom-body-scroll",this.headerColGroup,h,n,p)},g=function(t,e){var i=this.config;i.asidePanelWidth>0&&"top"in t&&this.$.panel["aside-body-scroll"].css({top:t.top}),this.xvar.frozenColumnIndex>0&&"top"in t&&this.$.panel["left-body-scroll"].css({top:t.top}),this.xvar.frozenRowIndex>0&&"left"in t&&this.$.panel["top-body-scroll"].css({left:t.left}),this.$.panel["body-scroll"].css(t),i.footSum&&"left"in t&&this.$.panel["bottom-body-scroll"].css({left:t.left}),!e&&"top"in t&&c.call(this)},f=function(){i.focusClear.call(this),i.clear.call(this),this.isInlineEditing&&p.deActive.call(this)},x=function(e){var n={UD:function(e){var n,o,a,l=!0;for(var r in this.focusedColumn){n=jQuery.extend({},this.focusedColumn[r],!0);break}if(!n)return!1;for(o=this.bodyRowMap[n.rowIndex+"_"+n.colIndex],i.focusClear.call(this),i.clear.call(this),e>0?n.rowIndex+(o.rowspan-1)+e>this.bodyRowTable.rows.length-1?(n.dindex=n.dindex+e,n.rowIndex=0,n.dindex>this.list.length-1&&(n.dindex=this.list.length-1,l=!1)):n.rowIndex=n.rowIndex+e:n.rowIndex+e<0?(n.dindex=n.dindex+e,n.rowIndex=this.bodyRowTable.rows.length-1,n.dindex<0&&(n.dindex=0,l=!1)):n.rowIndex=n.rowIndex+e,a=0;"undefined"==typeof this.bodyRowMap[n.rowIndex+"_"+n.colIndex];){if(0==n.rowIndex||a%2==(e>0?0:1)?n.colIndex--:n.rowIndex--,n.rowIndex<=0&&n.colIndex<=0){l=!1;break}a++}var d=t.util.findPanelByColumnIndex.call(this,n.dindex,n.colIndex);return n.panelName=d.panelName,function(){n.dindex+1>this.xvar.frozenRowIndex&&(n.dindex<=this.xvar.paintStartRowIndex?(g.call(this,{top:-(n.dindex-this.xvar.frozenRowIndex)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)):n.dindex+1>this.xvar.paintStartRowIndex+(this.xvar.paintRowCount-2)&&(g.call(this,{top:-(n.dindex-this.xvar.frozenRowIndex-this.xvar.paintRowCount+3)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)))}.call(this),this.focusedColumn[n.dindex+"_"+n.colIndex+"_"+n.rowIndex]=n,this.$.panel[n.panelName].find('[data-ax5grid-tr-data-index="'+n.dindex+'"]').find('[data-ax5grid-column-rowindex="'+n.rowIndex+'"][data-ax5grid-column-colindex="'+n.colIndex+'"]').attr("data-ax5grid-column-focused","true"),l},LR:function(e){var n,o,a=!0,l=0,r=!1,d="";for(var s in this.focusedColumn){n=jQuery.extend({},this.focusedColumn[s],!0);break}if(!n)return!1;for(o=this.bodyRowMap[n.rowIndex+"_"+n.colIndex],i.focusClear.call(this),i.clear.call(this),e<0?(n.colIndex=n.colIndex+e,n.colIndex<0&&(n.colIndex=0,a=!1)):(n.colIndex=n.colIndex+(o.colspan-1)+e,n.colIndex>this.colGroup.length-1&&(n.colIndex=this.colGroup.length-1,a=!1)),"undefined"==typeof this.bodyRowMap[n.rowIndex+"_"+n.colIndex]&&(n.rowIndex=0),l=0;"undefined"==typeof this.bodyRowMap[n.rowIndex+"_"+n.colIndex];){if(n.colIndex--,n.rowIndex<=0&&n.colIndex<=0){a=!1;break}l++}var c=t.util.findPanelByColumnIndex.call(this,n.dindex,n.colIndex);n.panelName=c.panelName,d=c.containerPanelName,r=c.isScrollPanel,this.focusedColumn[n.dindex+"_"+n.colIndex+"_"+n.rowIndex]=n;var h=this.$.panel[n.panelName].find('[data-ax5grid-tr-data-index="'+n.dindex+'"]').find('[data-ax5grid-column-rowindex="'+n.rowIndex+'"][data-ax5grid-column-colindex="'+n.colIndex+'"]').attr("data-ax5grid-column-focused","true");if(h&&r){var u=function(){return h.position().left+h.outerWidth()>Math.abs(this.$.panel[n.panelName].position().left)+this.$.panel[d].width()?h.position().left+h.outerWidth()-this.$.panel[d].width():Math.abs(this.$.panel[n.panelName].position().left)>h.position().left?h.position().left:void 0}.call(this);"undefined"!=typeof u&&(t.header.scrollTo.call(this,{left:-u}),g.call(this,{left:-u}),t.scroller.resize.call(this))}return a},INDEX:function(e){var n,o,a,l=!0;for(var r in this.focusedColumn){n=jQuery.extend({},this.focusedColumn[r],!0);break}for(n||(n={rowIndex:0,colIndex:0}),o=this.bodyRowMap[n.rowIndex+"_"+n.colIndex],i.focusClear.call(this),i.clear.call(this),"end"==e&&(e=this.list.length-1),n.dindex=e,n.rowIndex=0,a=0;"undefined"==typeof this.bodyRowMap[n.rowIndex+"_"+n.colIndex]&&(0==n.rowIndex||a%2==(_dy>0?0:1)?n.colIndex--:n.rowIndex--,!(n.rowIndex<=0&&n.colIndex<=0));)a++;var d=t.util.findPanelByColumnIndex.call(this,n.dindex,n.colIndex);return n.panelName=d.panelName,function(){n.dindex+1>this.xvar.frozenRowIndex&&(n.dindex<this.xvar.paintStartRowIndex?(g.call(this,{top:-(n.dindex-this.xvar.frozenRowIndex)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)):n.dindex+1>this.xvar.paintStartRowIndex+(this.xvar.paintRowCount-2)&&(g.call(this,{top:-(n.dindex-this.xvar.frozenRowIndex-this.xvar.paintRowCount+3)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)))}.call(this),this.focusedColumn[n.dindex+"_"+n.colIndex+"_"+n.rowIndex]=n,this.$.panel[n.panelName].find('[data-ax5grid-tr-data-index="'+n.dindex+'"]').find('[data-ax5grid-column-rowindex="'+n.rowIndex+'"][data-ax5grid-column-colindex="'+n.colIndex+'"]').attr("data-ax5grid-column-focused","true"),l}},o={UP:function(){return n.UD.call(this,-1)},DOWN:function(){return n.UD.call(this,1)},LEFT:function(){return n.LR.call(this,-1)},RIGHT:function(){return n.LR.call(this,1)},HOME:function(){return n.INDEX.call(this,0)},END:function(){return n.INDEX.call(this,"end")},position:function(t){return n.INDEX.call(this,t)}};return e in o?o[e].call(this):o.position.call(this,e)},p={active:function(i,n,a){var l,r,d,s,c,h,u,g=this;for(var f in i){if(s=i[f].panelName,l=i[f].dindex,r=i[f].colIndex,d=i[f].rowIndex,c=i[f].colspan,h=this.colGroup[r],!(u=h.editor))return this;if(e.isFunction(u.disabled)&&u.disabled.call({list:this.list,dindex:l,item:this.list[l],key:h.key,value:a}))return this;if(!function(e,i){if(e.type in t.inlineEditor)return"popup"==t.inlineEditor[e.type].editMode}(u)){if("checkbox"==u.type){var x,p;p=u.config&&u.config.trueValue?(x=!(a==u.config.trueValue))?u.config.trueValue:u.config.falseValue:x=0==a||"false"==a||a<"1"?"true":"false",t.data.setValue.call(g,l,h.key,p),o.call(g,["cellChecked"],l,{key:h.key,rowIndex:d,colIndex:r,editorConfig:h.editor.config,checked:x})}return this}if(this.list[l].__isGrouping)return!1;if(f in this.inlineEditing)return!1;this.inlineEditing[f]={panelName:s,columnKey:f,column:i[f],useReturnToSave:t.inlineEditor[u.type].useReturnToSave},this.isInlineEditing=!0}if(this.isInlineEditing){var m=function(t,i){return"money"==i.type?e.number(t,{money:!0}):t||""}.call(this,a,u);return this.inlineEditing[f].$inlineEditorCell=this.$.panel[s].find('[data-ax5grid-tr-data-index="'+l+'"]').find('[data-ax5grid-column-rowindex="'+d+'"][data-ax5grid-column-colindex="'+r+'"]').find("[data-ax5grid-cellholder]"),this.inlineEditing[f].$inlineEditor=t.inlineEditor[u.type].init(this,f,u,this.inlineEditing[f].$inlineEditorCell,m),!0}},deActive:function(i,n,o){if(!this.inlineEditing[n])return this;var a=this.inlineEditing[n].panelName,l=this.inlineEditing[n].column.dindex,r=this.inlineEditing[n].column.rowIndex,d=this.inlineEditing[n].column.colIndex,s=this.bodyRowMap[this.inlineEditing[n].column.rowIndex+"_"+this.inlineEditing[n].column.colIndex],c=function(t){return"undefined"==typeof o?"SELECT"==t.get(0).tagName||"INPUT"==t.get(0).tagName||"TEXTAREA"==t.get(0).tagName?t.val():(i="CANCEL",!1):o}(this.inlineEditing[n].$inlineEditor),h=function(t,i){return"money"==i.type?e.number(t):t}.call(this,c,s.editor),u={CANCEL:function(t,e,i){u.__clear.call(this)},RETURN:function(e,i,n){t.data.setValue.call(this,e,i.key,n)?(u.__clear.call(this),t.body.repaintCell.call(this,a,l,r,d,n)):u.__clear.call(this)},__clear:function(){this.isInlineEditing=!1;var t=this.inlineEditing[n].$inlineEditor.data("binded-ax5ui");"ax5picker"==t?this.inlineEditing[n].$inlineEditor.ax5picker("close"):"ax5select"==t&&this.inlineEditing[n].$inlineEditor.ax5select("close"),this.inlineEditing[n].$inlineEditor.remove(),this.inlineEditing[n].$inlineEditor=null,this.inlineEditing[n].$inlineEditorCell=null,this.inlineEditing[n]=void 0,delete this.inlineEditing[n]}};i in u?u[i||"RETURN"].call(this,l,s,h):u.__clear.call(this)},keydown:function(e,i){var n={ESC:function(){for(var t in this.inlineEditing)p.deActive.call(this,"CANCEL",t)},RETURN:function(){if(this.isInlineEditing)this.inlineEditing[i]&&this.inlineEditing[i].useReturnToSave&&p.deActive.call(this,"RETURN",i);else for(var e in this.focusedColumn){var n=this.focusedColumn[e],o=this.bodyRowMap[n.rowIndex+"_"+n.colIndex],a=n.dindex,l="";o&&(this.list[a].__isGrouping||(l=t.data.getValue.call(this,a,o.key)));var r=this.colGroup[n.colIndex];"inline"!==t.inlineEditor[r.editor.type].editMode&&t.body.inlineEdit.active.call(this,this.focusedColumn,null,l)}}};e in n&&n[e].call(this,e)}};t.body={init:a,repaint:c,repaintCell:h,repaintRow:u,updateRowState:o,scrollTo:g,blur:f,moveFocus:x,inlineEdit:p}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(){for(var t=0,i=this.list.length;i--;)"__groupingList"in this.list[i]||(t+=e.number(this.list[i][this.key]));return t},n=function(){for(var t=0,i=this.list.length,n=0;i--;)"__groupingList"in this.list[i]||(t+=e.number(this.list[i][this.key]),n++);return e.number(t/(n||1),{round:2})};t.collector={sum:i,avg:n}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(){},n=function(t){for(var e=0,i=t.length,n=[];e<i;e++)t[e]&&!t[e].__isGrouping&&(t[e][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(e),n.push(jQuery.extend({},t[e])));return n},o=function(t){this.selectedDataIndexs=[];var i=0,n=t.length,o=[],a=0;if(this.config.body.grouping)for(var l,r,d=e.map(this.bodyGrouping.by,function(){return{key:this,compareString:"",grouping:!1,list:[]}}),s=0,c=d.length,h=[];i<n+1;i++)if(s=0,t[i]&&t[i][this.config.columnKeys.deleted])this.deletedList.push(t[i]);else{for(l="",h=[];s<c;s++){if(t[i]&&(l+="$|$"+t[i][d[s].key]),a>0&&l!=d[s].compareString){for(var u={keys:[],labels:[],list:d[s].list},g=0;g<s+1;g++)u.keys.push(d[g].key),u.labels.push(t[i-1][d[g].key]);h.push(u),d[s].list=[]}d[s].list.push(t[i]),d[s].compareString=l}for(r=h.length;r--;)o.push({__isGrouping:!0,__groupingList:h[r].list,__groupingBy:{keys:h[r].keys,labels:h[r].labels}});t[i]&&(t[i][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(i),o.push(t[i]),a++)}else for(;i<n;i++)t[i]&&t[i][this.config.columnKeys.deleted]?this.deletedList.push(t[i]):t[i]&&(t[i][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(i),o.push(t[i]));return o},a=function(i){return e.isArray(i)?(this.page=null,this.list=o.call(this,!this.config.remoteSort&&Object.keys(this.sortInfo).length?p.call(this,this.sortInfo,i):i),this.deletedList=[]):"page"in i&&(this.page=jQuery.extend({},i.page),this.list=o.call(this,!this.config.remoteSort&&Object.keys(this.sortInfo).length?p.call(this,this.sortInfo,i.list):i.list),this.deletedList=[]),this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this.config.body.grouping,this},l=function(t){return{list:this.list,page:this.page}},r=function(e){var i=[],n=0,o=this.list.length;switch(e){case"modified":for(;n<o;n++)this.list[n]&&!this.list[n].__isGrouping&&this.list[n][this.config.columnKeys.modified]&&i.push(jQuery.extend({},this.list[n]));break;case"selected":for(;n<o;n++)this.list[n]&&!this.list[n].__isGrouping&&this.list[n][this.config.columnKeys.selected]&&i.push(jQuery.extend({},this.list[n]));break;case"deleted":i=[].concat(this.deletedList);break;default:i=t.data.clearGroupingData.call(this,this.list)}return i},d=function(i,a,l){var r=this.config.body.grouping?n.call(this,this.list):this.list,d={first:function(){r=[].concat(i).concat(r)},last:function(){r=r.concat([].concat(i))}};if("undefined"==typeof a&&(a="last"),a in d)i[this.config.columnKeys.modified]=!0,d[a].call(this,i);else{if(!e.isNumber(a))throw"invalid argument _dindex";r=r.splice(a,[].concat(i))}return this.config.body.grouping?r=o.call(this,p.call(this,this.sortInfo,r)):l&&l.sort&&Object.keys(this.sortInfo).length&&(r=p.call(this,this.sortInfo,r)),this.list=r,this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},s=function(i){var a=this.config.body.grouping?n.call(this,this.list):this.list,l={first:function(){a.splice(i,1)},last:function(){var t=a.length-1;a.splice(t,1)}};if("undefined"==typeof i&&(i="last"),i in l)l[i].call(this,i);else{if(!e.isNumber(i))throw"invalid argument _dindex";a.splice(i,1)}return this.config.body.grouping?a=o.call(this,p.call(this,this.sortInfo,a)):Object.keys(this.sortInfo).length&&(a=p.call(this,this.sortInfo,a)),this.list=a,this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},c=function(i){var a=this.config.body.grouping?n.call(this,this.list):this.list,l={first:function(){a[0][this.config.columnKeys.deleted]=!0},last:function(){a[a.length-1][this.config.columnKeys.deleted]=!0},selected:function(){for(var t=a.length;t--;)a[t][this.config.columnKeys.selected]&&(a[t][this.config.columnKeys.deleted]=!0)}};if("undefined"==typeof i&&(i="last"),i in l)l[i].call(this,i);else{if(!e.isNumber(i))throw"invalid argument _dindex";a[i][this.config.columnKeys.deleted]=!0}return a=this.config.body.grouping?o.call(this,p.call(this,this.sortInfo,a)):Object.keys(this.sortInfo).length?o.call(this,p.call(this,this.sortInfo,a)):o.call(this,a),this.list=a,this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},h=function(t,i){if(!e.isNumber(i))throw"invalid argument _dindex";this.needToPaintSum=!0,this.list.splice(i,1,t),this.config.body.grouping&&(this.list=o.call(this,n.call(this,this.list)))},u=function(e,i,n){if(this.needToPaintSum=!0,/[\.\[\]]/.test(i))try{this.list[e][this.config.columnKeys.modified]=!0,Function("val","this"+t.util.getRealPathForDataItem(i)+" = val;").call(this.list[e],n)}catch(o){}else this.list[e][this.config.columnKeys.modified]=!0,this.list[e][i]=n;return this.onDataChanged&&this.onDataChanged.call({self:this,list:this.list,dindex:e,item:this.list[e],key:i,value:n}),!0},g=function(e,i,n){if(/[\.\[\]]/.test(i))try{n=Function("","return this"+t.util.getRealPathForDataItem(i)+";").call(this.list[e])}catch(o){}else n=this.list[e][i];return n},f=function(){this.selectedDataIndexs=[]},x=function(t,e,i){var n=this.config;return!this.list[t].__isGrouping&&("undefined"==typeof e?(this.list[t][n.columnKeys.selected]=!this.list[t][n.columnKeys.selected])&&this.selectedDataIndexs.push(t):(this.list[t][n.columnKeys.selected]=e)&&this.selectedDataIndexs.push(t),this.onDataChanged&&i&&i.internalCall&&this.onDataChanged.call({self:this,list:this.list,dindex:t,item:this.list[t],key:n.columnKeys.selected,value:this.list[t][n.columnKeys.selected]}),this.list[t][n.columnKeys.selected])},p=function(i,n){var o=n||this.list,a=[];for(var l in i)a[i[l].seq]={key:l,order:i[l].orderBy};a=e.filter(a,function(){return"undefined"!=typeof this});var r,d,s=0,c=a.length;return o.sort(function(t,e){for(s=0;s<c;s++){if(r=t[a[s].key],d=e[a[s].key],("undefined"==typeof r?"undefined":_typeof(r))!==("undefined"==typeof d?"undefined":_typeof(d))&&(r=""+r,d=""+d),r<d)return"asc"===a[s].order?-1:1;if(r>d)return"asc"===a[s].order?1:-1}}),n?o:(this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,
this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this)};t.data={init:i,set:a,get:l,getList:r,setValue:u,getValue:g,clearSelect:f,select:x,add:d,remove:s,deleteRow:c,update:h,sort:p,initData:o,clearGroupingData:n}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(){return e.number(this.value,{money:!0})};t.formatter={money:i}}(),function(){var t=ax5.ui.grid,e=ax5.util,i={on:function(n,o){var a=this,l=$(n),r=l.offset().left,d=a.$.container.root.offset().left;a.xvar.columnResizerIndex=o;var s={min:-a.colGroup[o]._width+2,max:a.colGroup[o+1]?a.colGroup[o+1]._width:a.$.container.root.width()-2};jQuery(document.body).bind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(e){var i=t.util.getMousePosition(e);a.xvar.__da=i.clientX-a.xvar.mousePosition.clientX,s.min>a.xvar.__da?a.xvar.__da=s.min:s.max<a.xvar.__da&&(a.xvar.__da=s.max),a.xvar.columnResizerLived||a.$.resizer.horizontal.addClass("live"),a.xvar.columnResizerLived=!0,a.$.resizer.horizontal.css({left:r+a.xvar.__da-d})}).bind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(t){i.off.call(a),e.stopEvent(t)}).bind("mouseleave.ax5grid-"+this.instanceId,function(t){i.off.call(a),e.stopEvent(t)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){this.$.resizer.horizontal.removeClass("live"),this.xvar.columnResizerLived=!1,this.setColumnWidth(this.colGroup[this.xvar.columnResizerIndex]._width+this.xvar.__da,this.xvar.columnResizerIndex),jQuery(document.body).unbind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},n=function(){var n=this;this.$.container.header.on("click","[data-ax5grid-column-attr]",function(e){var i=this.getAttribute("data-ax5grid-column-key"),o=this.getAttribute("data-ax5grid-column-colindex"),a=(this.getAttribute("data-ax5grid-column-rowindex"),n.colGroup[o]);i&&a&&(a.sortable!==!0&&n.config.sortable!==!0||a.sortable===!1||a.sortFixed||r.call(n,a.key)),t.body.blur.call(n)}),this.$.container.header.on("mousedown","[data-ax5grid-column-resizer]",function(o){var a=this.getAttribute("data-ax5grid-column-resizer");n.xvar.mousePosition=t.util.getMousePosition(o),i.on.call(n,this,Number(a)),e.stopEvent(o)}).on("dragstart",function(t){return e.stopEvent(t),!1}),o.call(this)},o=function(){var e=this.config,i=t.util.divideTableByFrozenColumnIndex(this.headerTable,this.config.frozenColumnIndex);this.asideHeaderData=function(t){for(var i=[],n={rows:[]},o=0,a=t.rows.length;o<a;o++)if(n.rows[o]={cols:[]},0===o){var l={label:"",colspan:1,rowspan:t.rows.length,key:"__dindex__",colIndex:null},r={};e.showLineNumber&&(r=jQuery.extend({},l,{label:"&nbsp;",width:e.lineNumberColumnWidth,_width:e.lineNumberColumnWidth}),i.push(r),n.rows[o].cols.push(r)),e.showRowSelector&&(r=jQuery.extend({},l,{label:"",width:e.rowSelectorColumnWidth,_width:e.rowSelectorColumnWidth}),i.push(r),n.rows[o].cols.push(r))}return this.asideColGroup=i,n}.call(this,this.headerTable),this.leftHeaderData=i.leftData,this.headerData=i.rightData},a=function(t){var i=this.config,n=this.colGroup;t&&(o.call(this),this.xvar.paintStartRowIndex=void 0);var a=this.asideHeaderData,l=this.leftHeaderData,r=this.headerData,d=i.header.align;this.leftHeaderColGroup=n.slice(0,this.config.frozenColumnIndex),this.headerColGroup=n.slice(this.config.frozenColumnIndex);var s=function(t,o,a){var l=0,r=[];r.push('<table border="0" cellpadding="0" cellspacing="0">'),r.push("<colgroup>");for(var s=0,c=o.length;s<c;s++)r.push('<col style="width:'+o[s]._width+'px;"  />'),l+=o[s]._width;r.push("<col  />"),r.push("</colgroup>");for(var h=0,u=a.rows.length;h<u;h++){var g="";r.push('<tr class="'+g+'">');for(var f=0,x=a.rows[h].cols.length;f<x;f++){var p=a.rows[h].cols[f],m=i.header.columnHeight*p.rowspan-i.header.columnBorderWidth,y=d||p.align;r.push("<td ",'data-ax5grid-column-attr="'+(p.columnAttr||"default")+'" ','data-ax5grid-column-row="'+h+'" ','data-ax5grid-column-col="'+f+'" ',function(){return"undefined"!=typeof p.key?'data-ax5grid-column-key="'+p.key+'" ':""}(),'data-ax5grid-column-colindex="'+p.colIndex+'" ','data-ax5grid-column-rowindex="'+p.rowIndex+'" ','colspan="'+p.colspan+'" ','rowspan="'+p.rowspan+'" ','class="'+function(t){var n="";return t.styleClass&&(n+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key})+" ":t.styleClass+" "),i.header.columnBorderWidth&&(n+="hasBorder "),f==x-1&&(n+="isLastColumn "),n}.call(this,p)+'" ','style="height: '+m+'px;min-height: 1px;">'),r.push(function(){var t=i.header.columnHeight-2*i.header.columnPadding-i.header.columnBorderWidth;return'<span data-ax5grid-cellHolder="" '+(y?'data-ax5grid-text-align="'+y+'"':"")+' style="height: '+(i.header.columnHeight-i.header.columnBorderWidth)+"px;line-height: "+t+'px;">'}(),function(){var t="";return e.isNothing(p.key)||e.isNothing(p.colIndex)||i.sortable!==!0&&p.sortable!==!0||p.sortable===!1||(t+='<span data-ax5grid-column-sort="'+p.colIndex+'" data-ax5grid-column-sort-order="'+(n[p.colIndex].sort||"")+'" />'),t}(),p.label||"&nbsp;","</span>"),e.isNothing(p.colIndex)||i.enableFilter&&r.push('<span data-ax5grid-column-filter="'+p.colIndex+'" data-ax5grid-column-filter-value=""  />'),r.push("</td>")}r.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','style="height: '+i.header.columnHeight+'px;min-height: 1px;" ',"></td>"),r.push("</tr>")}return r.push("</table>"),t.html(r.join("")),function(){for(var n=i.header.columnHeight*a.rows.length-i.header.columnBorderWidth,l=0,r=[],d=0,s=o.length;d<s;d++){var c=o[d];e.isNothing(c.colIndex)||(l+=c._width,r.push('<div data-ax5grid-column-resizer="'+c.colIndex+'" style="height:'+n+"px;left: "+(l-4)+'px;"  />'))}t.append(r)}.call(this),l};i.asidePanelWidth>0&&s(this.$.panel["aside-header"],this.asideColGroup,a),i.frozenColumnIndex>0&&s(this.$.panel["left-header"],this.leftHeaderColGroup,l),this.xvar.scrollContentWidth=s(this.$.panel["header-scroll"],this.headerColGroup,r),i.rightSum},l=function(t){return this.$.panel["header-scroll"].css(t),this},r=function(t){var e="",i={},n=0;for(var o in this.sortInfo)this.sortInfo[o].fixed&&(i[o]=this.sortInfo[o],n++);for(var a=0,l=this.colGroup.length;a<l;a++)this.colGroup[a].key==t?(""==e&&(e="undefined"==typeof this.colGroup[a].sort?"desc":"desc"===this.colGroup[a].sort?"asc":void 0),this.colGroup[a].sort=e):this.config.multiSort||(this.colGroup[a].sort=void 0),"undefined"!=typeof this.colGroup[a].sort&&(i[this.colGroup[a].key]||(i[this.colGroup[a].key]={seq:n++,orderBy:this.colGroup[a].sort}));return this.setColumnSort(i),this},d=function(t){for(var e=0,i=this.colGroup.length;e<i;e++)for(var n in t)this.colGroup[e].key==n&&(this.colGroup[e].sort=t[n].orderBy);return this};t.header={init:n,repaint:a,scrollTo:l,toggleSort:r,applySortStatus:d}}(),function(){var t=ax5.ui.grid,e={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){return'<input type="text" data-ax5grid-editor="text" value="'+n+'" >'},init:function(e,i,n,o,a){var l;return o.append(l=jQuery(this.getHtml(e,i,n,a))),this.bindUI(e,i,l,n,o,a),l.on("blur",function(){t.body.inlineEdit.deActive.call(e,"RETURN",i)}),l},bindUI:function(t,e,i,n,o,a){i.focus().select()}},i={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){return'<input type="text" data-ax5grid-editor="money" value="'+n+'" >'},init:function(e,i,n,o,a){var l;return o.append(l=jQuery(this.getHtml(e,i,n,a))),this.bindUI(e,i,l,n,o,a),l.on("blur",function(){t.body.inlineEdit.deActive.call(e,"RETURN",i)}),l},bindUI:function(t,e,i,n,o,a){i.data("binded-ax5ui","ax5formater"),i.ax5formatter({pattern:"money"}),i.focus().select()}},n={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){return'<input type="text" data-ax5grid-editor="number" value="'+n+'" >'},init:function(e,i,n,o,a){var l;return o.append(l=jQuery(this.getHtml(e,i,n,a))),this.bindUI(e,i,l,n,o,a),l.on("blur",function(){t.body.inlineEdit.deActive.call(e,"RETURN",i)}),l},bindUI:function(t,e,i,n,o,a){i.data("binded-ax5ui","ax5formater"),i.ax5formatter({pattern:"number"}),i.focus().select()}},o={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){return'<input type="text" data-ax5grid-editor="calendar" value="'+n+'" >'},init:function(t,e,i,n,o){var a;return n.append(a=jQuery(this.getHtml(t,e,i,o))),this.bindUI(t,e,a,i,n,o),a},bindUI:function(e,i,n,o,a,l){var r=e;n.data("binded-ax5ui","ax5picker"),n.ax5picker({direction:"auto",content:{type:"date",formatter:{pattern:"date"}},onStateChanged:function(){"open"==this.state?this.self.activePicker.attr("data-ax5grid-inline-edit-picker","date"):"close"==this.state&&t.body.inlineEdit.deActive.call(r,"RETURN",i)}}),n.focus().select()}},a={useReturnToSave:!1,editMode:"popup",getHtml:function(t,e,i,n){var o=[];return o.push('<div data-ax5select="ax5grid-editor" data-ax5select-config="{}">'),o.push("</div>"),o.join("")},init:function(t,e,i,n,o){var a;return n.append(a=jQuery(this.getHtml(t,e,i,o))),this.bindUI(t,e,a,i,n,o),a},bindUI:function(e,i,n,o,a,l){var r={columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}};jQuery.extend(!0,r,o.config),r.options.forEach(function(t){t[r.columnKeys.optionValue]==l&&(t[r.columnKeys.optionSelected]=!0)});var d=e;n.data("binded-ax5ui","ax5select"),n.ax5select({columnKeys:r.columnKeys,options:r.options,onStateChanged:function(){"open"==this.state?this.self.activeSelectOptionGroup.attr("data-ax5grid-inline-edit-picker","select"):"changeValue"==this.state?t.body.inlineEdit.deActive.call(d,"RETURN",i,this.value[0][r.columnKeys.optionValue]):"close"==this.state&&t.body.inlineEdit.deActive.call(d,"ESC",i)}}),n.ax5select("open"),n.ax5select("setValue",l),n.find("a").focus()}},l={editMode:"inline",getHtml:function(t,e,i){var n,o=t.config.body.columnHeight-2*t.config.body.columnPadding-t.config.body.columnBorderWidth;n=e.config&&e.config.trueValue?i==e.config.trueValue?"true":"false":0==i||"false"==i||i<"1"?"false":"true";var a={marginTop:2,height:o-4};return jQuery.extend(!0,a,e.config),a.marginTop=(o-a.height)/2,'<div data-ax5grid-editor="checkbox" data-ax5grid-checked="'+n+'" style="height:'+a.height+"px;width:"+a.height+"px;margin-top:"+a.marginTop+'px;"></div>'}};t.inlineEditor={text:e,money:i,number:n,date:o,select:a,checkbox:l}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(t){var e=function(t){this.page.currentPage!=t&&(this.page.selectPage=t,this.config.page.onChange&&this.config.page.onChange.call({self:this,page:this.page,data:this.data}))},i={first:function(){e.call(this,0)},prev:function(){var t=this.page.currentPage-1;t<0&&(t=0),e.call(this,t)},next:function(){var t=this.page.currentPage+1;t>this.page.totalPages-1&&(t=this.page.totalPages-1),e.call(this,t)},last:function(){e.call(this,this.page.totalPages-1)}};t in i?i[t].call(this):e.call(this,t-1)},n=function(){var e=this;if(this.page){var n={hasPage:!1,currentPage:this.page.currentPage,pageSize:this.page.pageSize,totalElements:this.page.totalElements,totalPages:this.page.totalPages,firstIcon:this.config.page.firstIcon,prevIcon:this.config.page.prevIcon||"",nextIcon:this.config.page.nextIcon||"",lastIcon:this.config.page.lastIcon},o=this.config.page.navigationItemCount;n["@paging"]=function(){var t=[],e=n.currentPage-Math.floor(o/2);e<0&&(e=0);var i=n.currentPage+o;i>n.totalPages&&(i=n.totalPages),i-e>o&&(i=e+o),i-e<o&&(e=i-o),e<0&&(e=0);for(var a=e,l=i;a<l;a++)t.push({pageNo:a+1,selected:n.currentPage==a});return t}(),n["@paging"].length>0&&(n.hasPage=!0),this.$.page.navigation.html(t.tmpl.get("page_navigation",n)),this.$.page.navigation.find("[data-ax5grid-page-move]").on("click",function(){var t=this.getAttribute("data-ax5grid-page-move");i.call(e,t)})}else this.$.page.navigation.empty()},o=function(){var i=this.xvar.paintStartRowIndex,n=this.xvar.paintStartRowIndex+this.xvar.paintRowCount-1,o=this.xvar.dataRowCount;n>o&&(n=o),this.$.page.status.html(t.tmpl.get("page_status",{fromRowIndex:e.number(i+1,{money:!0}),toRowIndex:e.number(n,{money:!0}),totalElements:e.number(o,{money:!0})}))};t.page={navigationUpdate:n,statusUpdate:o}}(),function(){var t=ax5.ui.grid,e=ax5.util,i={vertical:function(t,e){var i=e._content_height-e._panel_height,n=e._vertical_scroller_height-e.verticalScrollBarHeight,o=i*t.top/n;return o<0?o=0:i<o&&(o=i),{top:-o}},horizontal:function(t,e){var i=e._content_width-e._panel_width,n=e._horizontal_scroller_width-e.horizontalScrollBarWidth,o=i*t.left/n;return o<0?o=0:i<o&&(o=i),{left:-o}}},n={vertical:function(e,n){var o="vertical",a=n._content_height-n._panel_height,l=n._vertical_scroller_height-n.verticalScrollBarHeight,r=l*e/a;if(-r>l){r=-l;var d=i[o].call(this,{top:-r},{_content_width:n._content_width,_content_height:n._content_height,_panel_width:n._panel_width,_panel_height:n._panel_height,_horizontal_scroller_width:n._horizontal_scroller_width,_vertical_scroller_height:n._vertical_scroller_height,verticalScrollBarHeight:n.verticalScrollBarHeight,horizontalScrollBarWidth:n.horizontalScrollBarWidth});t.body.scrollTo.call(this,d)}return-r},horizontal:function(e,n){var o="horizontal",a=n._content_width-n._panel_width,l=n._horizontal_scroller_width-n.horizontalScrollBarWidth,r=l*e/a;if(-r>l){r=-l;var d=i[o].call(this,{left:-r},{_content_width:n._content_width,_content_height:n._content_height,_panel_width:n._panel_width,_panel_height:n._panel_height,_horizontal_scroller_width:n._horizontal_scroller_width,_vertical_scroller_height:n._vertical_scroller_height,verticalScrollBarHeight:n.verticalScrollBarHeight,horizontalScrollBarWidth:n.horizontalScrollBarWidth});t.header.scrollTo.call(this,d),t.body.scrollTo.call(this,d)}return-r}},o={click:function(e,n,o,a){var l=this,r=e.offset(),d={width:n.outerWidth(),height:n.outerHeight()},s={width:e.innerWidth(),height:e.innerHeight()},c=l.$.scroller.vertical.innerHeight(),h=l.$.panel.body.height(),u=l.$.scroller.horizontal.innerWidth(),g=l.$.panel.body.width(),f=l.xvar.scrollContentHeight,x=l.xvar.scrollContentWidth,p=l.$.scroller["vertical-bar"].outerHeight(),m=l.$.scroller["horizontal-bar"].outerWidth(),y={vertical:function(e){var i=t.util.getMousePosition(e),n=i.clientY-r.top;return n<0?n=0:n+d.height>s.height&&(n=s.height-d.height),{top:n}},horizontal:function(e){var i=t.util.getMousePosition(e),n=i.clientX-r.left;return n<0?n=0:n+d.width>s.width&&(n=s.width-d.width),{left:n}}},v=y[o](a);n.css(v);var b=i[o].call(l,v,{_content_width:x,_content_height:f,_panel_width:g,_panel_height:h,_horizontal_scroller_width:u,_vertical_scroller_height:c,verticalScrollBarHeight:p,horizontalScrollBarWidth:m});"horizontal"===o&&t.header.scrollTo.call(l,b),t.body.scrollTo.call(l,b)},on:function(e,n,a){var l=this,r=n.position(),d={width:n.outerWidth(),height:n.outerHeight()},s={width:e.innerWidth(),height:e.innerHeight()},c=l.$.scroller.vertical.innerHeight(),h=l.$.panel.body.height(),u=l.$.scroller.horizontal.innerWidth(),g=l.$.panel.body.width(),f=l.xvar.scrollContentHeight,x=l.xvar.scrollContentWidth,p=l.$.scroller["vertical-bar"].outerHeight(),m=l.$.scroller["horizontal-bar"].outerWidth(),y={vertical:function(e){var i=t.util.getMousePosition(e);l.xvar.__da=i.clientY-l.xvar.mousePosition.clientY;var n=r.top+l.xvar.__da;return n<0?n=0:n+d.height>s.height&&(n=s.height-d.height),{top:n}},horizontal:function(e){var i=t.util.getMousePosition(e);l.xvar.__da=i.clientX-l.xvar.mousePosition.clientX;var n=r.left+l.xvar.__da;return n<0?n=0:n+d.width>s.width&&(n=s.width-d.width),{left:n}}};l.xvar.__da=0,jQuery(document.body).bind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(e){var o=y[a](e);n.css(o);var r=i[a].call(l,o,{_content_width:x,_content_height:f,_panel_width:g,_panel_height:h,_horizontal_scroller_width:u,_vertical_scroller_height:c,verticalScrollBarHeight:p,horizontalScrollBarWidth:m});"horizontal"===a&&t.header.scrollTo.call(l,r),t.body.scrollTo.call(l,r)}).bind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(t){o.off.call(l)}).bind("mouseleave.ax5grid-"+this.instanceId,function(t){o.off.call(l)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){jQuery(document.body).unbind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},a={wheel:function(e){var i,n,o=this,a=o.$.panel["body-scroll"].position(),l=o.$.panel.body.height(),d=o.$.panel.body.width(),s=o.xvar.scrollContentHeight,c=o.xvar.scrollContentWidth,h=!1,u=!1;return i=a.left-e.x,n=a.top-e.y,n>=0?(n=0,h=!0):n<=l-s?(n=l-s,n>=0&&(n=0),h=!0):0==e.y&&(h=!0),i>=0?(i=0,u=!0):i<=d-c?(i=d-c,i>=0&&(i=0),u=!0):0==e.x&&(u=!0),t.header.scrollTo.call(this,{left:i}),t.body.scrollTo.call(this,{left:i,top:n}),r.call(this),!h||!u},on:function(){var i=this,n=i.$.panel["body-scroll"].position(),o=i.$.panel.body.height(),l=i.$.panel.body.width(),d=i.xvar.scrollContentHeight,s=i.xvar.scrollContentWidth,c=function(e){var a,r,c=t.util.getMousePosition(e);return i.xvar.__x_da=c.clientX-i.xvar.mousePosition.clientX,i.xvar.__y_da=c.clientY-i.xvar.mousePosition.clientY,a=n.left+i.xvar.__x_da,r=n.top+i.xvar.__y_da,r>=0?r=0:r<=o-d&&(r=o-d,r>=0&&(r=0)),a>=0?a=0:a<=l-s&&(a=l-s,a>=0&&(a=0)),{left:a,top:r}};this.xvar.__x_da=0,this.xvar.__y_da=0,jQuery(document.body).bind("touchmove.ax5grid-"+this.instanceId,function(n){var o=c(n);t.header.scrollTo.call(i,{left:o.left}),t.body.scrollTo.call(i,o,"noRepaint"),r.call(i),e.stopEvent(n)}).bind("touchend.ax5grid-"+this.instanceId,function(n){var o=c(n);t.header.scrollTo.call(i,{left:o.left}),t.body.scrollTo.call(i,o),r.call(i),e.stopEvent(n),a.off.call(i)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){jQuery(document.body).unbind("touchmove.ax5grid-"+this.instanceId).unbind("touchend.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},l=function(){var i=this,n=this.config.scroller.trackPadding;this.$.scroller["vertical-bar"].css({width:this.config.scroller.size-(n+1),left:n/2}),this.$.scroller["horizontal-bar"].css({height:this.config.scroller.size-(n+1),top:n/2}),this.$.scroller["vertical-bar"].bind(t.util.ENM.mousedown,function(e){this.xvar.mousePosition=t.util.getMousePosition(e),o.on.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical")}.bind(this)).bind("dragstart",function(t){return e.stopEvent(t),!1}),this.$.scroller.vertical.bind("click",function(t){t.target&&"vertical"==t.target.getAttribute("data-ax5grid-scroller")&&o.click.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical",t)}.bind(this)),this.$.scroller["horizontal-bar"].bind(t.util.ENM.mousedown,function(e){this.xvar.mousePosition=t.util.getMousePosition(e),o.on.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal")}.bind(this)).bind("dragstart",function(t){return e.stopEvent(t),!1}),this.$.scroller.horizontal.bind("click",function(t){t.target&&"horizontal"==t.target.getAttribute("data-ax5grid-scroller")&&o.click.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal",t)}.bind(this)),this.$.container.body.bind("mousewheel DOMMouseScroll",function(t){var i=t.originalEvent,n={x:0,y:0};i.detail?n.y=10*i.detail:"undefined"==typeof i.deltaY?(n.y=-i.wheelDelta,n.x=0):(n.y=i.deltaY,n.x=i.deltaX),a.wheel.call(this,n)&&e.stopEvent(t)}.bind(this)),document.addEventListener&&ax5.info.supportTouch&&this.$.container.body.on("touchstart","[data-ax5grid-panel]",function(e){i.xvar.mousePosition=t.util.getMousePosition(e),a.on.call(i)})},r=function(){var t=this.$.scroller.vertical.height(),e=this.$.scroller.horizontal.width(),i=this.$.panel.body.height(),o=this.$.panel.body.width(),a=this.xvar.scrollContentHeight,l=this.xvar.scrollContentWidth,r=i*t/a,d=o*e/l;r<this.config.scroller.barMinSize&&(r=this.config.scroller.barMinSize),d<this.config.scroller.barMinSize&&(d=this.config.scroller.barMinSize),this.$.scroller["vertical-bar"].css({top:n.vertical.call(this,this.$.panel["body-scroll"].position().top,{_content_width:l,_content_height:a,_panel_width:o,_panel_height:i,_horizontal_scroller_width:e,_vertical_scroller_height:t,verticalScrollBarHeight:r,horizontalScrollBarWidth:d}),height:r}),this.$.scroller["horizontal-bar"].css({left:n.horizontal.call(this,this.$.panel["body-scroll"].position().left,{_content_width:l,_content_height:a,_panel_width:o,_panel_height:i,_horizontal_scroller_width:e,_vertical_scroller_height:t,verticalScrollBarHeight:r,horizontalScrollBarWidth:d}),width:d}),t=null,e=null,i=null,o=null,a=null,l=null,r=null,d=null};t.scroller={init:l,resize:r}}(),function(){var t=ax5.ui.grid,e=function(){return'<div data-ax5grid-container="root" data-ax5grid-instance="{{instanceId}}">\n            <div data-ax5grid-container="hidden">\n                <textarea data-ax5grid-form="clipboard"></textarea>\n            </div>\n            <div data-ax5grid-container="header">\n                <div data-ax5grid-panel="aside-header"></div>\n                <div data-ax5grid-panel="left-header"></div>\n                <div data-ax5grid-panel="header">\n                    <div data-ax5grid-panel-scroll="header"></div>\n                </div>\n                <div data-ax5grid-panel="right-header"></div>\n            </div>\n            <div data-ax5grid-container="body">\n                <div data-ax5grid-panel="top-aside-body"></div>\n                <div data-ax5grid-panel="top-left-body"></div>\n                <div data-ax5grid-panel="top-body">\n                    <div data-ax5grid-panel-scroll="top-body"></div>\n                </div>\n                <div data-ax5grid-panel="top-right-body"></div>\n                <div data-ax5grid-panel="aside-body">\n                    <div data-ax5grid-panel-scroll="aside-body"></div>\n                </div>\n                <div data-ax5grid-panel="left-body">\n                    <div data-ax5grid-panel-scroll="left-body"></div>\n                </div>\n                <div data-ax5grid-panel="body">\n                    <div data-ax5grid-panel-scroll="body"></div>\n                </div>\n                <div data-ax5grid-panel="right-body">\n                  <div data-ax5grid-panel-scroll="right-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-aside-body"></div>\n                <div data-ax5grid-panel="bottom-left-body"></div>\n                <div data-ax5grid-panel="bottom-body">\n                    <div data-ax5grid-panel-scroll="bottom-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-right-body"></div>\n            </div>\n            <div data-ax5grid-container="page">\n                <div data-ax5grid-page="holder">\n                    <div data-ax5grid-page="navigation"></div>\n                    <div data-ax5grid-page="status"></div>\n                </div>\n            </div>\n            <div data-ax5grid-container="scroller">\n                <div data-ax5grid-scroller="vertical">\n                    <div data-ax5grid-scroller="vertical-bar"></div>    \n                </div>\n                <div data-ax5grid-scroller="horizontal">\n                    <div data-ax5grid-scroller="horizontal-bar"></div>\n                </div>\n                <div data-ax5grid-scroller="corner"></div>\n            </div>\n            <div data-ax5grid-resizer="vertical"></div>\n            <div data-ax5grid-resizer="horizontal"></div>\n        </div>'},i=function(){return'<div data-ax5grid-page-navigation="holder">\n            {{#hasPage}}\n            <div data-ax5grid-page-navigation="cell">    \n                {{#firstIcon}}<button data-ax5grid-page-move="first">{{{firstIcon}}}</button>{{/firstIcon}}\n                <button data-ax5grid-page-move="prev">{{{prevIcon}}}</button>\n            </div>\n            <div data-ax5grid-page-navigation="cell-paging">\n                {{#@paging}}\n                <button data-ax5grid-page-move="{{pageNo}}" data-ax5grid-page-selected="{{selected}}">{{pageNo}}</button>\n                {{/@paging}}\n            </div>\n            <div data-ax5grid-page-navigation="cell">\n                <button data-ax5grid-page-move="next">{{{nextIcon}}}</button>\n                {{#lastIcon}}<button data-ax5grid-page-move="last">{{{lastIcon}}}</button>{{/lastIcon}}\n            </div>\n            {{/hasPage}}\n        </div>'},n=function(){return"<span>{{fromRowIndex}} - {{toRowIndex}} of {{totalElements}}</span>"};t.tmpl={main:e,page_navigation:i,page_status:n,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(t,e){for(var i={rows:[]},n={rows:[]},o=0,a=t.rows.length;o<a;o++){var l=t.rows[o];i.rows[o]={cols:[]},n.rows[o]={cols:[]};for(var r=0,d=l.cols.length;r<d;r++){var s=jQuery.extend({},l.cols[r]),c=s.colIndex,h=s.colIndex+s.colspan;if(c<e)if(h<=e)i.rows[o].cols.push(s);else{var u=jQuery.extend({},s),g=jQuery.extend({},u);u.colspan=e-u.colIndex,g.colIndex=e,g.colspan=s.colspan-u.colspan,i.rows[o].cols.push(u),n.rows[o].cols.push(g)}else n.rows[o].cols.push(s)}}return{leftData:i,rightData:n}},n=function(t){var e,i=t.originalEvent?t.originalEvent:t;return e="changedTouches"in i?i.changedTouches[0]:i,{clientX:e.pageX,clientY:e.pageY}},o={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},a=function(t){var i=e.deepCopy(t),n=this.config,o={rows:[]},a=0,l=function h(t,e,i){for(var l={cols:[]},r=0,d=t.length;r<d;r++){var s=t[r],c=1;s.hidden||(s.colspan=1,s.rowspan=1,s.rowIndex=e,s.colIndex=function(){return i?(a=i.colIndex+r+1,i.colIndex+r):a++}(),l.cols.push(s),"columns"in s?c=h(s.columns,e+1,s):s.width="width"in s?s.width:n.columnMinWidth,s.colspan=c)}return l.cols.length>0?(o.rows[e]||(o.rows[e]={cols:[]}),o.rows[e].cols=o.rows[e].cols.concat(l.cols),l.cols.length-1+c):c};l(i,0);for(var r=0,d=o.rows.length;r<d;r++)for(var s=0,c=o.rows[r].cols.length;s<c;s++)"columns"in o.rows[r].cols[s]||(o.rows[r].cols[s].rowspan=d-r);return o},l=function(t){var i=e.deepCopy(t),n={rows:[]},o=0,a=function l(t,e,i){for(var a={cols:[]},r=0,d=t.length,s=(function u(t){for(var n=0,r=t.length;n<r;n++){var d=t[n],s=1;d.hidden||("key"in d?(d.colspan=1,d.rowspan=1,d.rowIndex=e,d.colIndex=function(){return i?(o=i.colIndex+n+1,i.colIndex+n):o++}(),a.cols.push(d),"columns"in d&&(s=l(d.columns,e+1,d)),d.colspan=s):"columns"in d&&u(d.columns,e))}});r<d;r++){var c=t[r],h=1;c.hidden||("key"in c?(c.colspan=1,c.rowspan=1,c.rowIndex=e,c.colIndex=function(){return i?(o=i.colIndex+r+1,i.colIndex+r):o++}(),a.cols.push(c),"columns"in c&&(h=l(c.columns,e+1,c)),c.colspan=h):"columns"in c&&s(c.columns,e))}return a.cols.length>0?(n.rows[e]||(n.rows[e]={cols:[]}),n.rows[e].cols=n.rows[e].cols.concat(a.cols),a.cols.length-1+h):h};return a(i,0),function(t){for(var e=0,i=t.rows.length;e<i;e++)for(var n=t.rows[e],o=0,a=n.cols.length;o<a;o++){var l=n.cols[o];"columns"in l||(l.rowspan=i-e)}}(n),n},r=function(t){var e={};return t.rows.forEach(function(t){t.cols.forEach(function(t){e[t.rowIndex+"_"+t.colIndex]=jQuery.extend({},t)})}),e},d=function(t){for(var e={rows:[]},i=0,n=t.length;i<n;i++){var o=t[i];e.rows[i]={cols:[]};for(var a=0,l=0,r=o.length;l<r&&!(a>this.columns.length);l++){var d=o[l].colspan||1;o[l].label||o[l].key?e.rows[i].cols.push({colspan:d,rowspan:1,colIndex:a,columnAttr:"sum",align:o[l].align,label:o[l].label,key:o[l].key,collector:o[l].collector,formatter:o[l].formatter}):e.rows[i].cols.push({colIndex:a,colspan:d,rowspan:1,label:"&nbsp;"}),a+=d}if(a-=1,a<this.columns.length+1)for(var l=a;l<this.columns.length+1;l++)e.rows[i].cols.push({colIndex:l+1,colspan:1,rowspan:1,label:"&nbsp;"})}return e},s=function(t){var e={rows:[]},i=0;e.rows[i]={cols:[]};for(var n=0,o=0,a=t.length;o<a&&!(n>this.columns.length);o++){var l=t[o].colspan||1;t[o].label||t[o].key?e.rows[i].cols.push({colspan:l,rowspan:1,rowIndex:0,colIndex:n,columnAttr:"default",align:t[o].align,label:t[o].label,key:t[o].key,collector:t[o].collector,formatter:t[o].formatter}):e.rows[i].cols.push({rowIndex:0,colIndex:n,colspan:l,rowspan:1,label:"&nbsp;"}),n+=l}if(n-=1,n<this.columns.length+1)for(var o=n;o<this.columns.length+1;o++)e.rows[i].cols.push({rowIndex:0,colIndex:o+1,colspan:1,rowspan:1,label:"&nbsp;"});return e},c=function(t,e,i){var n,o=!1,a=[];return this.xvar.frozenRowIndex>t&&a.push("top"),this.xvar.frozenColumnIndex>e&&a.push("left"),a.push("body"),(this.xvar.frozenColumnIndex<=e||this.xvar.frozenRowIndex<=t)&&(n=a.join("-"),a.push("scroll"),o=!0),{panelName:a.join("-"),containerPanelName:n,isScrollPanel:o}},h=function(t){var e=[],i=[].concat(t.split(/[\.\[\]]/g));return i.forEach(function(t){""!==t&&e.push('["'+t.replace(/['\"]/g,"")+'"]')}),i=null,e.join("")};t.util={divideTableByFrozenColumnIndex:i,getMousePosition:n,ENM:o,makeHeaderTable:a,makeBodyRowTable:l,makeBodyRowMap:r,makeFootSumTable:d,makeBodyGroupingTable:s,findPanelByColumnIndex:c,getRealPathForDataItem:h}}();