"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){var t=ax5.ui,e=ax5.util,i=void 0;t.addClass({className:"grid",version:"${VERSION}"},function(){return function(){var n=this,o=void 0,l={33:"KEY_PAGEUP",34:"KEY_PAGEDOWN",35:"KEY_END",36:"KEY_HOME",37:"KEY_LEFT",38:"KEY_UP",39:"KEY_RIGHT",40:"KEY_DOWN"};this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,debounceTime:250,appendDebouncer:null,appendDebounceTimes:0,appendProgressIcon:"...",appendProgress:!1,frozenColumnIndex:0,frozenRowIndex:0,showLineNumber:!1,showRowSelector:!1,multipleSelect:!0,virtualScrollY:!0,virtualScrollX:!0,height:0,columnMinWidth:100,lineNumberColumnWidth:30,rowSelectorColumnWidth:26,sortable:void 0,remoteSort:!1,header:{display:!0,align:!1,columnHeight:26,columnPadding:3,columnBorderWidth:1},body:{align:!1,columnHeight:26,columnPadding:3,columnBorderWidth:1,grouping:!1,mergeCells:!1},rightSum:!1,footSum:!1,page:{height:25,display:!0,navigationItemCount:5},scroller:{size:15,barMinSize:15,trackPadding:4},columnKeys:{selected:"__selected__",modified:"__modified__",deleted:"__deleted__",disableSelection:"__disable_selection__"},tree:{use:!1,hashDigit:8,indentWidth:10,arrowWidth:15,iconWidth:18,icons:{openedArrow:"▾",collapsedArrow:"▸",groupIcon:"⊚",collapsedGroupIcon:"⊚",itemIcon:"⊙"},columnKeys:{parentKey:"pid",selfKey:"id",collapse:"collapse",hidden:"hidden",parentHash:"__hp__",selfHash:"__hs__",children:"__children__",depth:"__depth__"}}},this.xvar={bodyTrHeight:0,scrollContentWidth:0,scrollContentHeight:0},this.columns=[],this.colGroup=[],this.footSumColumns=[],this.bodyGrouping={},this.list=[],this.proxyList=null,this.page={},this.selectedDataIndexs=[],this.deletedList=[],this.sortInfo={},this.focusedColumn={},this.selectedColumn={},this.isInlineEditing=!1,this.inlineEditing={},this.listIndexMap={},this.gridContextMenu=null,this.headerTable={},this.leftHeaderData={},this.headerData={},this.rightHeaderData={},this.bodyRowTable={},this.leftBodyRowData={},this.bodyRowData={},this.rightBodyRowData={},this.bodyRowMap={},this.bodyGroupingTable={},this.leftBodyGroupingData={},this.bodyGroupingData={},this.rightBodyGroupingData={},this.bodyGroupingMap={},this.footSumTable={},this.leftFootSumData={},this.footSumData={},this.needToPaintSum=!0,o=this.config;var a=function(){var t={instanceId:this.id};return this.$target.html(i.tmpl.get("main",t)),this.$={container:{hidden:this.$target.find('[data-ax5grid-container="hidden"]'),root:this.$target.find('[data-ax5grid-container="root"]'),header:this.$target.find('[data-ax5grid-container="header"]'),body:this.$target.find('[data-ax5grid-container="body"]'),page:this.$target.find('[data-ax5grid-container="page"]'),scroller:this.$target.find('[data-ax5grid-container="scroller"]')},panel:{"aside-header":this.$target.find('[data-ax5grid-panel="aside-header"]'),"left-header":this.$target.find('[data-ax5grid-panel="left-header"]'),header:this.$target.find('[data-ax5grid-panel="header"]'),"header-scroll":this.$target.find('[data-ax5grid-panel-scroll="header"]'),"right-header":this.$target.find('[data-ax5grid-panel="right-header"]'),"top-aside-body":this.$target.find('[data-ax5grid-panel="top-aside-body"]'),"top-left-body":this.$target.find('[data-ax5grid-panel="top-left-body"]'),"top-body":this.$target.find('[data-ax5grid-panel="top-body"]'),"top-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="top-body"]'),"top-right-body":this.$target.find('[data-ax5grid-panel="top-right-body"]'),"aside-body":this.$target.find('[data-ax5grid-panel="aside-body"]'),"aside-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="aside-body"]'),"left-body":this.$target.find('[data-ax5grid-panel="left-body"]'),"left-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="left-body"]'),body:this.$target.find('[data-ax5grid-panel="body"]'),"body-scroll":this.$target.find('[data-ax5grid-panel-scroll="body"]'),"right-body":this.$target.find('[data-ax5grid-panel="right-body"]'),"right-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="right-body"]'),"bottom-aside-body":this.$target.find('[data-ax5grid-panel="bottom-aside-body"]'),"bottom-left-body":this.$target.find('[data-ax5grid-panel="bottom-left-body"]'),"bottom-body":this.$target.find('[data-ax5grid-panel="bottom-body"]'),"bottom-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="bottom-body"]'),"bottom-right-body":this.$target.find('[data-ax5grid-panel="bottom-right-body"]')},livePanelKeys:[],scroller:{vertical:this.$target.find('[data-ax5grid-scroller="vertical"]'),"vertical-bar":this.$target.find('[data-ax5grid-scroller="vertical-bar"]'),horizontal:this.$target.find('[data-ax5grid-scroller="horizontal"]'),"horizontal-bar":this.$target.find('[data-ax5grid-scroller="horizontal-bar"]'),corner:this.$target.find('[data-ax5grid-scroller="corner"]')},page:{navigation:this.$target.find('[data-ax5grid-page="navigation"]'),status:this.$target.find('[data-ax5grid-page="status"]')},form:{clipboard:this.$target.find('[data-ax5grid-form="clipboard"]')},resizer:{vertical:this.$target.find('[data-ax5grid-resizer="vertical"]'),horizontal:this.$target.find('[data-ax5grid-resizer="horizontal"]')}},this.$.container.root.css({height:this.config.height||this.config._height}),this},r=function(t){this.columns=e.deepCopy(t),this.headerTable=i.util.makeHeaderTable.call(this,this.columns),this.xvar.frozenColumnIndex=o.frozenColumnIndex||0,this.bodyRowTable=i.util.makeBodyRowTable.call(this,this.columns),this.bodyRowMap=i.util.makeBodyRowMap.call(this,this.bodyRowTable),this.xvar.bodyTrHeight=this.bodyRowTable.rows.length*this.config.body.columnHeight;for(var n={},l=0,a=this.headerTable.rows.length;l<a;l++)for(var r=this.headerTable.rows[l],s=0,d=r.cols.length;s<d;s++)n[r.cols[s].colIndex]=jQuery.extend({},r.cols[s]);this.colGroup=[];for(var c in n)this.colGroup.push(n[c]);return this},s=function(){r.call(this,this.config.columns),d.call(this),this.config.footSum&&(c.call(this,this.config.footSum),this.needToPaintSum=!0),this.config.body.grouping&&h.call(this,this.config.body.grouping),u.call(this,!0),i.header.repaint.call(this,!0),i.body.repaint.call(this,!0),i.scroller.resize.call(this)},d=function(){var t=this.$.container.root.width()-function(){var t=0;return o.showLineNumber&&(t+=o.lineNumberColumnWidth),o.showRowSelector&&(t+=o.rowSelectorColumnWidth),t+=o.scroller.size}(),i=0,n=void 0,l=[],a=this.colGroup,r=void 0,s=void 0;for(r=0,s=a.length;r<s;r++)e.isNumber(a[r].width)?i+=a[r]._width=a[r].width:"*"===a[r].width?l.push(r):"%"===e.right(a[r].width,1)&&(i+=a[r]._width=t*e.left(a[r].width,"%")/100);if(l.length>0)for(n=(t-i)/l.length,r=0,s=l.length;r<s;r++)a[l[r]]._width=n},c=function(t){e.isArray(t)?this.footSumTable=i.util.makeFootSumTable.call(this,this.footSumColumns=t):(this.footSumColumns=[],this.footSumTable={})},h=function(t){var e=jQuery.extend({},t);"by"in e&&"columns"in e?(this.bodyGrouping={by:e.by,columns:e.columns},this.bodyGroupingTable=i.util.makeBodyGroupingTable.call(this,this.bodyGrouping.columns),this.sortInfo=function(){for(var t={},e=0,i=this.bodyGrouping.by.length;e<i;e++){t[this.bodyGrouping.by[e]]={orderBy:"asc",seq:e,fixed:!0};for(var n=0,o=this.colGroup.length;n<o;n++)this.colGroup[n].key===this.bodyGrouping.by[e]&&(this.colGroup[n].sort="asc",this.colGroup[n].sortFixed=!0)}return t}.call(this)):o.body.grouping=!1},u=function(t){if(Math.min(this.$target.innerWidth(),this.$target.innerHeight())<5)return!1;this.config.height||this.$.container.root.css({height:this.config._height=this.$target.height()});var e=this.$.container.root.width(),i=this.$.container.root.height(),n=e,l=i,a=o.asidePanelWidth=function(){var t=0;return o.showLineNumber&&(t+=o.lineNumberColumnWidth),o.showRowSelector&&(t+=o.rowSelectorColumnWidth),t}(),r=o.frozenPanelWidth=function(t,e){for(var i=0,n=0,o=e;n<o;n++)i+=t[n]._width;return i}(this.colGroup,o.frozenColumnIndex),s=void 0,d=void 0,c=void 0,h=0,u=function(t){return o.frozenRowIndex*t}(this.xvar.bodyTrHeight),g=function(t){return this.footSumColumns.length*t}.call(this,this.xvar.bodyTrHeight),f=o.header.display?this.headerTable.rows.length*o.header.columnHeight:0,x=o.page.display?o.page.height:0;(function(){s=i-f-x-g<this.list.length*this.xvar.bodyTrHeight?this.config.scroller.size:0,d=function(){for(var t=0,i=e-a-s,n=0,o=this.colGroup.length;n<o;n++)t+=this.colGroup[n]._width;return t>i?this.config.scroller.size:0}.call(this),d>0&&(s=i-f-x-g-d<this.list.length*this.xvar.bodyTrHeight?this.config.scroller.size:0)}).call(this),n=e-s,l=i-x-d,c=l-f;var p=function(t,e,i,l){var s={},d=!1;switch(i){case"aside":0===a?d=!0:(s.left=0,s.width=a);break;case"left":0===o.frozenColumnIndex?d=!0:(s.left=a,s.width=r);break;case"right":o.rightSum||(d=!0);break;default:"page"!==l&&(0===o.frozenColumnIndex?s.left=a:s.left=r+a,s.width=n-a-r-h)}if(d)return t.hide(),this;if("body"===l)switch(e){case"top":0==o.frozenRowIndex?d=!0:(s.top=0,s.height=u);break;case"bottom":o.footSum?(s.top=c-g,s.height=g):d=!0;break;default:s.top=u,s.height=c-u-g}else"header"===l?s.height=f:"page"===l&&(0==x?d=!0:s.height=x);return d?(t.hide(),this):(t.show().css(s),this)},m=function(t,e,i,o){var a={},r=!1;switch(o){case"vertical":e>0?(a.width=e,a.height=l,a.bottom=i+x):r=!0;break;case"horizontal":i>0?(a.width=n,a.height=i,a.right=e,a.bottom=x):r=!0;break;case"corner":e>0&&i>0?(a.width=e,a.height=i,a.bottom=x):r=!0}return r?(t.hide(),this):void t.show().css(a)};return this.$.container.header.css({height:f}),this.$.container.body.css({height:c}),p.call(this,this.$.panel["aside-header"],"","aside","header"),p.call(this,this.$.panel["left-header"],"","left","header"),p.call(this,this.$.panel.header,"","","header"),p.call(this,this.$.panel["right-header"],"","right","header"),p.call(this,this.$.panel["top-aside-body"],"top","aside","body"),p.call(this,this.$.panel["top-left-body"],"top","left","body"),p.call(this,this.$.panel["top-body"],"top","","body"),p.call(this,this.$.panel["top-right-body"],"top","right","body"),p.call(this,this.$.panel["aside-body"],"","aside","body"),p.call(this,this.$.panel["left-body"],"","left","body"),p.call(this,this.$.panel.body,"","","body"),p.call(this,this.$.panel["right-body"],"","right","body"),p.call(this,this.$.panel["bottom-aside-body"],"bottom","aside","body"),p.call(this,this.$.panel["bottom-left-body"],"bottom","left","body"),p.call(this,this.$.panel["bottom-body"],"bottom","","body"),p.call(this,this.$.panel["bottom-right-body"],"bottom","right","body"),m.call(this,this.$.scroller.vertical,s,d,"vertical"),m.call(this,this.$.scroller.horizontal,s,d,"horizontal"),m.call(this,this.$.scroller.corner,s,d,"corner"),p.call(this,this.$.container.page,"","","page"),this.xvar.bodyHeight=this.$.panel.body.height(),this.xvar.bodyWidth=this.$.panel.body.width(),!0},g=function(t){if(i.header.repaint.call(this),e.isFunction(this.config.remoteSort)){var n={sortInfo:[]};for(var o in t)n.sortInfo.push({key:o,orderBy:t[o].orderBy,seq:t[o].seq});n.sortInfo.sort(function(t,e){return t.seq>e.seq}),this.config.remoteSort.call(n,n)}else this.config.body.grouping?this.list=i.data.initData.call(this,i.data.sort.call(this,t,i.data.clearGroupingData.call(this,this.list))):this.list=i.data.sort.call(this,t,i.data.clearGroupingData.call(this,this.list)),i.body.repaint.call(this,!0),i.scroller.resize.call(this)};this.init=function(t){if(o=jQuery.extend(!0,{},o,t),!o.target)return console.log(ax5.info.getError("ax5grid","401","init")),this;this.onStateChanged=o.onStateChanged,this.onClick=o.onClick,this.onLoad=o.onLoad,this.onDataChanged=o.body.onDataChanged,this.$target=jQuery(o.target),function(t){e.isObject(t)&&!t.error&&(o=jQuery.extend(!0,o,t))}.call(this,e.parseJson(this.$target.attr("data-ax5grid-config"),!0));var s=this.config=o;return this.config.height||(this.config._height=this.$target.height()),this.id||(this.id=this.$target.data("data-ax5grid-id")),this.id||(this.id="ax5grid-"+this.instanceId,this.$target.data("data-ax5grid-id",s.id)),i.data.init.call(this),this.config.tree.use&&(this.sortInfo={},this.sortInfo[this.config.tree.columnKeys.selfHash]={orderBy:"asc",seq:0,fixed:!0}),a.call(this),r.call(this,s.columns),d.call(this),s.footSum&&c.call(this,s.footSum),s.body.grouping&&h.call(this,s.body.grouping),u.call(this,!0),i.header.init.call(this),i.header.repaint.call(this),i.body.init.call(this),i.body.repaint.call(this),i.scroller.init.call(this),i.scroller.resize.call(this),jQuery(window).bind("resize.ax5grid-"+this.id,function(){u.call(n),i.scroller.resize.call(n),i.body.repaint.call(n)}),jQuery(document.body).on("click.ax5grid-"+this.id,function(t){var o=!1,l=e.findParentNode(t.target,function(t){return!!(o=t.getAttribute("data-ax5grid-inline-edit-picker"))||"root"===t.getAttribute("data-ax5grid-container")});l&&l.getAttribute("data-ax5grid-instance")===this.id?n.focused=!0:(n.focused=!1,i.body.blur.call(this))}.bind(this)),jQuery(window).on("keydown.ax5grid-"+this.instanceId,function(t){n.focused&&(n.isInlineEditing?t.which==ax5.info.eventKeys.ESC?n.keyDown("ESC",t.originalEvent):t.which==ax5.info.eventKeys.RETURN?n.keyDown("RETURN",t.originalEvent):t.which==ax5.info.eventKeys.TAB?(n.keyDown("TAB",t.originalEvent),e.stopEvent(t)):t.which==ax5.info.eventKeys.UP?n.keyDown("RETURN",{shiftKey:!0}):t.which==ax5.info.eventKeys.DOWN&&n.keyDown("RETURN",{}):t.metaKey||t.ctrlKey?67==t.which&&n.copySelect():l[t.which]?(n.keyDown(l[t.which],t.originalEvent),e.stopEvent(t)):t.which==ax5.info.eventKeys.ESC?n.focused&&i.body.blur.call(n):t.which==ax5.info.eventKeys.RETURN?n.keyDown("RETURN",t.originalEvent):t.which==ax5.info.eventKeys.TAB?e.stopEvent(t):t.which!=ax5.info.eventKeys.SPACE&&Object.keys(n.focusedColumn).length&&n.keyDown("INLINE_EDIT",t.originalEvent))}),setTimeout(function(){this.onLoad&&this.onLoad.call({self:this})}.bind(this)),this},this.align=function(){return u.call(this)&&(i.body.repaint.call(this),i.scroller.resize.call(this)),this},this.keyDown=function(){var t={KEY_UP:function(){i.body.moveFocus.call(this,"UP")},KEY_DOWN:function(){i.body.moveFocus.call(this,"DOWN")},KEY_LEFT:function(){i.body.moveFocus.call(this,"LEFT")},KEY_RIGHT:function(){i.body.moveFocus.call(this,"RIGHT")},KEY_HOME:function(){i.body.moveFocus.call(this,"HOME")},KEY_END:function(){i.body.moveFocus.call(this,"END")},INLINE_EDIT:function(t){i.body.inlineEdit.active.call(this,this.focusedColumn,t),/[0-9a-zA-Z]/.test(t.key)||e.stopEvent(t)},ESC:function(t){i.body.inlineEdit.keydown.call(this,"ESC")},RETURN:function(t){var n=0;for(var o in this.inlineEditing)n++,i.body.inlineEdit.keydown.call(this,"RETURN",o),1==n&&i.body.moveFocus.call(this,t.shiftKey?"UP":"DOWN")&&i.body.inlineEdit.keydown.call(this,"RETURN");0==n&&(i.body.inlineEdit.keydown.call(this,"RETURN"),e.stopEvent(t))},TAB:function(t){var e=0;for(var n in this.inlineEditing)e++,i.body.inlineEdit.keydown.call(this,"RETURN",n,{moveFocus:!0}),1==e&&i.body.moveFocus.call(this,t.shiftKey?"LEFT":"RIGHT")&&i.body.inlineEdit.keydown.call(this,"RETURN",void 0,{moveFocus:!0})}};return function(e,i){return e in t&&t[e].call(this,i),this}}(),this.copySelect=function(){var t=void 0,e=this.$.form.clipboard,i=[],n="",o=void 0,l=void 0,a=void 0,r=0;for(var s in this.selectedColumn){var d=this.selectedColumn[s];if(d){"undefined"==typeof a&&(a=d.dindex,o=d.rowIndex,l=d.rowIndex),a==d.dindex&&o==d.rowIndex||r++,i[r]||(i[r]=[]);var c=this.bodyRowMap[d.rowIndex+"_"+d.colIndex];c?this.list[d.dindex].__isGrouping?i[r].push(this.list[d.dindex][d.colIndex]):i[r].push(this.list[d.dindex][c.key]):i[r].push(""),a=d.dindex,o=d.rowIndex}}i.forEach(function(t){n+=t.join("\t")+"\n"}),e.get(0).innerText=n,e.select();try{t=document.execCommand("copy")}catch(e){t=!1}return t},this.setData=function(t){var e="undefined"==typeof this.xvar.paintStartRowIndex;return i.data.set.call(this,t),u.call(this),i.body.repaint.call(this),i.scroller.resize.call(this),i.page.navigationUpdate.call(this),e||i.body.scrollTo.call(this,{top:0}),e=null,this},this.getList=function(t){return i.data.getList.call(this,t)},this.setHeight=function(t){return"100%"==t&&(t=this.$target.offsetParent().innerHeight()),this.$target.css({height:t}),this.$.container.root.css({height:t}),u.call(this),i.body.repaint.call(this,"reset"),i.scroller.resize.call(this),this},this.addRow=function(t,e,n){return i.data.add.call(this,t,e,n),u.call(this),i.body.repaint.call(this,"reset"),i.body.moveFocus.call(this,this.config.body.grouping?"START":"END"),i.scroller.resize.call(this),this},this.appendToList=function(t){return i.data.append.call(this,t,function(){u.call(this),i.body.repaint.call(this),i.scroller.resize.call(this)}.bind(this)),this},this.removeRow=function(t){return i.data.remove.call(this,t),u.call(this),i.body.repaint.call(this,"reset"),i.body.moveFocus.call(this,this.config.body.grouping?"START":"END"),i.scroller.resize.call(this),this},this.updateRow=function(t,e){return i.data.update.call(this,t,e),i.body.repaintRow.call(this,e),this},this.deleteRow=function(t){return i.data.deleteRow.call(this,t),u.call(this),i.body.repaint.call(this,"reset"),i.scroller.resize.call(this),this},this.setValue=function(t,e,n){if(i.data.setValue.call(this,t,e,n)){var o=function(t,e,n,o,l){for(var a=0,r=e.length;a<r;a++)for(var s=0,d=e[a].cols.length;s<d;s++)e[a].cols[s].key==o&&(this.xvar.frozenRowIndex>n?i.body.repaintCell.call(this,"top-"+t,n,a,s,l):i.body.repaintCell.call(this,t+"-scroll",n,a,s,l))};o.call(this,"left-body",this.leftBodyRowData.rows,t,e,n),o.call(this,"body",this.bodyRowData.rows,t,e,n)}return this},this.addColumn=function(){var t={first:function(t){this.config.columns=[].concat(t).concat(this.config.columns)},last:function(t){this.config.columns=this.config.columns.concat([].concat(t))}};return function(i,n){if("undefined"==typeof i)throw"_column must not be null";if("undefined"==typeof n&&(n="last"),n in t)t[n].call(this,i);else{if(!e.isNumber(n))throw"invalid argument _cindex";this.config.columns.splice(n,[].concat(i))}return s.call(this),this}}(),this.removeColumn=function(){var t={first:function(t){this.config.columns.splice(t,1)},last:function(){this.config.columns.splice(this.config.columns.length-1,1)}};return function(i){if("undefined"==typeof i&&(i="last"),i in t)t[i].call(this,i);else{if(!e.isNumber(i))throw"invalid argument _cindex";this.config.columns.splice(i,1)}return s.call(this),this}}(),this.updateColumn=function(t,i){if(!e.isNumber(i))throw"invalid argument _cindex";return this.config.columns.splice(i,1,t),s.call(this),this},this.setColumnWidth=function(t,e){return this.colGroup[this.xvar.columnResizerIndex]._width=t,this.needToPaintSum=!0,i.header.repaint.call(this),i.body.repaint.call(this,!0),i.scroller.resize.call(this),u.call(this),this},this.getColumnSortInfo=function(){var t={sortInfo:[]};for(var e in this.sortInfo)t.sortInfo.push({key:e,orderBy:this.sortInfo[e].orderBy,seq:this.sortInfo[e].seq});return t.sortInfo.sort(function(t,e){return t.seq>e.seq}),t.sortInfo},this.setColumnSort=function(t){return"undefined"!=typeof t&&(this.sortInfo=t,i.header.applySortStatus.call(this,t)),g.call(this,t||this.sortInfo),this},this.select=function(t,n){if(e.isNumber(t)){var o=t;this.config.multipleSelect?n&&n.selectedClear&&this.clearSelect():this.clearSelect(),i.data.select.call(this,o,n&&n.selected),i.body.updateRowState.call(this,["selected"],o)}return this},this.clearSelect=function(){return i.body.updateRowState.call(this,["selectedClear"]),i.data.clearSelect.call(this),this},this.selectAll=function(t){return i.data.selectAll.call(this,t&&t.selected,t),i.body.updateRowStateAll.call(this,["selected"]),this},this.exportExcel=function(t){var e=[];return e.push('<table border="1">'),e.push(i.header.getExcelString.call(this)),e.push(i.body.getExcelString.call(this)),e.push("</table>"),"undefined"==typeof t?e.join(""):(i.excel.export.call(this,[e.join("")],t),this)},this.focus=function(t){if(i.body.moveFocus.call(this,t)){var e=void 0;for(var n in this.focusedColumn){e=jQuery.extend({},this.focusedColumn[n],!0);break}e&&this.select(e.dindex,{selectedClear:!0})}else if("undefined"==typeof this.selectedDataIndexs[0])this.select(0);else{var o=this.selectedDataIndexs[0],l={UP:function(){o>0&&(this.select(o-1,{selectedClear:!0}),i.body.moveFocus.call(this,o-1))},DOWN:function(){o<this.list.length-1&&(this.select(o+1,{selectedClear:!0}),i.body.moveFocus.call(this,o+1))},HOME:function(){this.select(0,{selectedClear:!0}),i.body.moveFocus.call(this,0)},END:function(){this.select(this.list.length-1,{selectedClear:!0}),i.body.moveFocus.call(this,this.list.length-1)}};t in l&&l[t].call(this)}return this},this.destroy=function(){var e=this.instanceId;return this.$target.empty(),this.list=[],t.grid_instance=ax5.util.filter(t.grid_instance,function(){return this.instanceId!=e}),null},this.main=function(){t.grid_instance=t.grid_instance||[],t.grid_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)}}()),i=ax5.ui.grid}(),function(){var t=ax5.ui.grid,e=ax5.util,i={focusClear:function(){var t=this,e=void 0;for(var i in t.focusedColumn)e=t.focusedColumn[i],e&&t.$.panel[e.panelName].find('[data-ax5grid-tr-data-index="'+e.dindex+'"]').find('[data-ax5grid-column-rowindex="'+e.rowIndex+'"][data-ax5grid-column-colindex="'+e.colIndex+'"]').removeAttr("data-ax5grid-column-focused");t.focusedColumn={}},clear:function(){var t=this,e=void 0;for(var i in t.selectedColumn)e=t.selectedColumn[i],e&&t.$.panel[e.panelName].find('[data-ax5grid-tr-data-index="'+e.dindex+'"]').find('[data-ax5grid-column-rowindex="'+e.rowIndex+'"][data-ax5grid-column-colindex="'+e.colIndex+'"]').removeAttr("data-ax5grid-column-selected");t.selectedColumn={}},init:function(e){var n=this;if(this.isInlineEditing)for(var o in this.inlineEditing)if(o==e.dindex+"_"+e.colIndex+"_"+e.rowIndex)return this;i.focusClear.call(n),n.focusedColumn[e.dindex+"_"+e.colIndex+"_"+e.rowIndex]={panelName:e.panelName,dindex:e.dindex,rowIndex:e.rowIndex,colIndex:e.colIndex,colspan:e.colspan},i.clear.call(n),n.xvar.selectedRange={start:[e.dindex,e.rowIndex,e.colIndex,e.colspan-1],end:null},n.selectedColumn[e.dindex+"_"+e.colIndex+"_"+e.rowIndex]=function(t){return!t&&{panelName:e.panelName,dindex:e.dindex,rowIndex:e.rowIndex,colIndex:e.colIndex,colspan:e.colspan}}(n.selectedColumn[e.dindex+"_"+e.colIndex+"_"+e.rowIndex]),this.$.panel[e.panelName].find('[data-ax5grid-tr-data-index="'+e.dindex+'"]').find('[data-ax5grid-column-rowindex="'+e.rowIndex+'"][data-ax5grid-column-colindex="'+e.colIndex+'"]').attr("data-ax5grid-column-focused","true").attr("data-ax5grid-column-selected","true"),this.isInlineEditing&&t.body.inlineEdit.deActive.call(this,"RETURN")},update:function(t){var e,n,o,l,a=this;a.xvar.selectedRange.end=[t.dindex,t.rowIndex,t.colIndex,t.colspan-1],i.clear.call(a);var r={r:{s:Math.min(a.xvar.selectedRange.start[0],a.xvar.selectedRange.end[0]),e:Math.max(a.xvar.selectedRange.start[0],a.xvar.selectedRange.end[0])},c:{s:Math.min(a.xvar.selectedRange.start[2],a.xvar.selectedRange.end[2]),e:Math.max(a.xvar.selectedRange.start[2]+a.xvar.selectedRange.start[3],a.xvar.selectedRange.end[2]+a.xvar.selectedRange.end[3])}};for(e=r.r.s;e<=r.r.e;e++)for(l=this.bodyRowTable.rows.length,o=0;o<l;o++)for(n=r.c.s;n<=r.c.e;n++){var s=[],d="";a.xvar.frozenRowIndex>e&&s.push("top"),a.xvar.frozenColumnIndex>n&&s.push("left"),s.push("body"),"top"!==s[0]&&s.push("scroll"),d=s.join("-"),a.selectedColumn[e+"_"+n+"_"+o]={panelName:d,dindex:e,rowIndex:o,colIndex:n,colspan:t.colspan},s=null,d=null}e=null,n=null,o=null;for(var c in a.selectedColumn){var h=a.selectedColumn[c];h&&a.$.panel[h.panelName].find('[data-ax5grid-tr-data-index="'+h.dindex+'"]').find('[data-ax5grid-column-rowindex="'+h.rowIndex+'"][data-ax5grid-column-colindex="'+h.colIndex+'"]').attr("data-ax5grid-column-selected","true")}}},n={on:function(t){var o=this;this.inlineEditing[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]||(i.init.call(o,t),this.$.container.body.on("mousemove.ax5grid-"+this.instanceId,'[data-ax5grid-column-attr="default"]',function(t){this.getAttribute("data-ax5grid-column-rowIndex")&&(i.update.call(o,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))}),e.stopEvent(t))}).on("mouseup.ax5grid-"+this.instanceId,function(){n.off.call(o)}).on("mouseleave.ax5grid-"+this.instanceId,function(){n.off.call(o)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1))},off:function(){this.$.container.body.off("mousemove.ax5grid-"+this.instanceId).off("mouseup.ax5grid-"+this.instanceId).off("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},o=function(t,e,i){var n=this,o=this.config,l={selected:function(t){if(this.list[t])for(var e=this.$.livePanelKeys.length;e--;)this.$.panel[this.$.livePanelKeys[e]].find('[data-ax5grid-tr-data-index="'+t+'"]').attr("data-ax5grid-selected",this.list[t][o.columnKeys.selected])},selectedClear:function(){for(var t=this.selectedDataIndexs.length;t--;)for(var e=this.selectedDataIndexs[t],i=this.$.livePanelKeys.length;i--;)this.$.panel[this.$.livePanelKeys[i]].find('[data-ax5grid-tr-data-index="'+e+'"]').attr("data-ax5grid-selected",!1),this.list[e][o.columnKeys.selected]=!1},cellChecked:function(t,e){var i=(e.key,e.rowIndex),n=e.colIndex,o=function(){var e=[];return this.xvar.frozenRowIndex>t&&e.push("top"),this.xvar.frozenColumnIndex>n&&e.push("left"),e.push("body"),"top"!==e[0]&&e.push("scroll"),e.join("-")}.call(this);this.$.panel[o].find('[data-ax5grid-tr-data-index="'+t+'"]').find('[data-ax5grid-column-rowIndex="'+i+'"][data-ax5grid-column-colIndex="'+n+'"]').find('[data-ax5grid-editor="checkbox"]').attr("data-ax5grid-checked",""+e.checked)}};t.forEach(function(t){if(!l[t])throw"invaild state name";l[t].call(n,e,i)})},l=function(e,i){var n=this,o=(this.config,{selected:function(e){t.body.repaint.call(this,!0)}});e.forEach(function(t){if(!o[t])throw"invaild state name";o[t].call(n,i)})},a=function(){var i=this;this.$.container.body.on("click","[data-ax5grid-column-attr]",function(e){var n=void 0,l=void 0,a=void 0,r=void 0,s=void 0,d=void 0,c=void 0,h={default:function(e){var n=i.bodyRowMap[e.rowIndex+"_"+e.colIndex],l={self:i,page:i.page,list:i.list,item:i.list[e.dindex],dindex:e.dindex,rowIndex:e.rowIndex,colIndex:e.colIndex,column:n,value:i.list[e.dindex][n.key]};if(n.editor&&"checkbox"==n.editor.type){var a=t.data.getValue.call(i,e.dindex,n.key),r=void 0,s=void 0;s=n.editor.config&&n.editor.config.trueValue?(r=!(a==n.editor.config.trueValue))?n.editor.config.trueValue:n.editor.config.falseValue:r=0==a||"false"==a||a<"1"?"true":"false",t.data.setValue.call(i,e.dindex,n.key,s),o.call(i,["cellChecked"],e.dindex,{key:n.key,rowIndex:e.rowIndex,colIndex:e.colIndex,editorConfig:n.editor.config,checked:r})}else i.config.body.onClick&&i.config.body.onClick.call(l)},rowSelector:function(e){return!i.list[e.dindex][i.config.columnKeys.disableSelection]&&(i.config.multipleSelect||i.selectedDataIndexs[0]===e.dindex||(o.call(i,["selectedClear"]),t.data.clearSelect.call(i)),t.data.select.call(i,e.dindex,void 0,{internalCall:!0}),void o.call(i,["selected"],e.dindex))},lineNumber:function(t){},"tree-control":function(t,e){y.call(i,t.dindex)}};n=this.getAttribute("data-ax5grid-panel-name"),l=this.getAttribute("data-ax5grid-column-attr"),a=Number(this.getAttribute("data-ax5grid-column-row")),r=Number(this.getAttribute("data-ax5grid-column-col")),d=Number(this.getAttribute("data-ax5grid-column-rowIndex")),c=Number(this.getAttribute("data-ax5grid-column-colIndex")),s=Number(this.getAttribute("data-ax5grid-data-index")),l in h&&h[l]({panelName:n,attr:l,row:a,col:r,dindex:s,rowIndex:d,colIndex:c},this)}),this.$.container.body.on("dblclick","[data-ax5grid-column-attr]",function(n){var o=void 0,l=void 0,a=void 0,r=void 0,s=void 0,d=void 0,c=void 0,h={default:function(o){if(i.isInlineEditing)for(var l in i.inlineEditing)if(l==o.dindex+"_"+o.colIndex+"_"+o.rowIndex)return this;var a=i.bodyRowMap[o.rowIndex+"_"+o.colIndex],r="";a&&(i.list[s].__isGrouping||(r=t.data.getValue.call(i,s,a.key)));var d=i.colGroup[o.colIndex].editor;if(e.isObject(d))t.body.inlineEdit.active.call(i,i.focusedColumn,n,r);else if(i.config.body.onDBLClick){var c={self:i,page:i.page,list:i.list,item:i.list[o.dindex],dindex:o.dindex,rowIndex:o.rowIndex,colIndex:o.colIndex,column:a,value:i.list[o.dindex][a.key]};i.config.body.onDBLClick.call(c)}},rowSelector:function(t){},lineNumber:function(t){}};o=this.getAttribute("data-ax5grid-panel-name"),l=this.getAttribute("data-ax5grid-column-attr"),a=Number(this.getAttribute("data-ax5grid-column-row")),r=Number(this.getAttribute("data-ax5grid-column-col")),d=Number(this.getAttribute("data-ax5grid-column-rowIndex")),c=Number(this.getAttribute("data-ax5grid-column-colIndex")),s=Number(this.getAttribute("data-ax5grid-data-index")),l in h&&h[l]({panelName:o,attr:l,row:a,col:r,dindex:s,rowIndex:d,colIndex:c})}),this.config.contextMenu&&this.$.container.body.on("contextmenu",function(t){var n=void 0,o=void 0,l=void 0,a=void 0,r=void 0,s=void 0,d={};n=e.findParentNode(t.target,function(t){if(t.getAttribute("data-ax5grid-column-attr"))return!0}),n&&(l=Number(n.getAttribute("data-ax5grid-column-rowIndex")),a=Number(n.getAttribute("data-ax5grid-column-colIndex")),o=Number(n.getAttribute("data-ax5grid-data-index")),s=i.bodyRowMap[l+"_"+a],r=i.list[o]),i.contextMenu||(i.contextMenu=new ax5.ui.menu),i.contextMenu.setConfig(i.config.contextMenu),d={element:n,dindex:o,rowIndex:l,colIndex:a,item:r,column:s},i.contextMenu.popup(t,{filter:function(){return i.config.contextMenu.popupFilter.call(this,this,d)},param:d}),e.stopEvent(t.originalEvent),n=null,o=null,l=null,a=null,r=null,s=null,d=null}),this.$.container.body.on("mousedown",'[data-ax5grid-column-attr="default"]',function(t){return!i.xvar.touchmoved&&void(this.getAttribute("data-ax5grid-column-rowIndex")&&n.on.call(i,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))}))}).on("dragstart",function(t){return e.stopEvent(t),!1}),r.call(this)},r=function(){var e=this.config,i=t.util.divideTableByFrozenColumnIndex(this.bodyRowTable,this.xvar.frozenColumnIndex);if(this.asideBodyRowData=function(t){for(var i={rows:[]},n=0,o=t.rows.length;n<o;n++)if(i.rows[n]={cols:[]},0===n){var l={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},a={};e.showLineNumber&&(a=jQuery.extend({},l,{width:e.lineNumberColumnWidth,_width:e.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),i.rows[n].cols.push(a)),e.showRowSelector&&(a=jQuery.extend({},l,{width:e.rowSelectorColumnWidth,_width:e.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),i.rows[n].cols.push(a))}return i}.call(this,this.bodyRowTable),this.leftBodyRowData=i.leftData,this.bodyRowData=i.rightData,e.body.grouping){var n=t.util.divideTableByFrozenColumnIndex(this.bodyGroupingTable,this.xvar.frozenColumnIndex);this.asideBodyGroupingData=function(t){for(var i={rows:[]},n=0,o=t.rows.length;n<o;n++)if(i.rows[n]={cols:[]},0===n){var l={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},a={};e.showLineNumber&&(a=jQuery.extend({},l,{width:e.lineNumberColumnWidth,_width:e.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),i.rows[n].cols.push(a)),e.showRowSelector&&(a=jQuery.extend({},l,{width:e.rowSelectorColumnWidth,
_width:e.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),i.rows[n].cols.push(a))}return i}.call(this,this.bodyGroupingTable),this.leftBodyGroupingData=n.leftData,this.bodyGroupingData=n.rightData,this.bodyGroupingMap=t.util.makeBodyRowMap.call(this,this.bodyGroupingTable)}if(this.leftFootSumData={},this.footSumData={},this.config.footSum){var o=t.util.divideTableByFrozenColumnIndex(this.footSumTable,this.xvar.frozenColumnIndex);this.leftFootSumData=o.leftData,this.footSumData=o.rightData}},s=function(i,n,o,l,a,r){var s=l.key,d={"<":"&lt;",">":"&gt;"};if("__d-index__"===s)return"undefined"!=typeof n.__index?n.__index+1:"";if("__d-checkbox__"===s)return'<div class="checkBox" style="max-height: '+(l.width-10)+"px;min-height: "+(l.width-10)+'px;"></div>';if(l.editor&&function(e){return e.type in t.inlineEditor&&"inline"==t.inlineEditor[e.type].editMode}(l.editor))return a=a||t.data.getValue.call(this,"undefined"==typeof n.__origin_index__?o:n.__origin_index__,s),e.isFunction(l.editor.disabled)&&l.editor.disabled.call({list:i,dindex:o,item:i[o],key:s,value:a})?a:r?a:t.inlineEditor[l.editor.type].getHtml(this,l.editor,a);var c={formatter:function(){var r={key:s,value:a||t.data.getValue.call(this,"undefined"==typeof n.__origin_index__?o:n.__origin_index__,s),dindex:o,item:n,list:i};return e.isFunction(l.formatter)?l.formatter.call(r):t.formatter[l.formatter].call(r)},default:function(){var e="";return"undefined"!=typeof a?e=a:(a=t.data.getValue.call(this,"undefined"==typeof n.__origin_index__?o:n.__origin_index__,s),null!==a&&"undefined"!=typeof a&&(e=a)),"string"!=typeof e?e:e.replace(/[<>]/g,function(t){return d[t]||t})},treeControl:function(t){var e=this.config,i=this.config.tree.columnKeys,l="";return n[i.children].length?(l+='<a data-ax5grid-data-index="'+o+'" data-ax5grid-column-attr="tree-control" data-ax5grid-tnode-arrow="" style="width: '+e.tree.arrowWidth+"px;padding-left:"+n[i.depth]*e.tree.indentWidth+'px;">',l+=n[i.collapse]?e.tree.icons.collapsedArrow:e.tree.icons.openedArrow,l+="</a>"):l+='<span data-ax5grid-tnode-arrow="" style="width: '+e.tree.arrowWidth+"px;padding-left:"+n[i.depth]*e.tree.indentWidth+'px;">&nbsp;</span>',l+='<span data-ax5grid-tnode-item="'+(n[i.children].length?"group":"item")+'" style="width: '+e.tree.iconWidth+'px;">',l+=n[i.children].length?n[i.collapse]?e.tree.icons.collapsedGroupIcon:e.tree.icons.groupIcon:e.tree.icons.itemIcon,l+="</span>",l+t}},h=l.formatter?c.formatter.call(this):c.default.call(this);return this.config.tree.use&&l.treeControl&&(h=c.treeControl.call(this,h)),h},d=function(i,n,o){var l=void 0,a=void 0,r=o.key,s=o.label;return"undefined"==typeof r?(a={key:r,list:i.__groupingList,groupBy:i.__groupingBy},l=e.isFunction(s)?s.call(a):s,i[o.colIndex]=l,l):"__d-index__"===r?"":"__d-checkbox__"===r?"":o.collector?(a={key:r,list:i.__groupingList},l=e.isFunction(o.collector)?o.collector.call(a):t.collector[o.collector].call(a),i[o.colIndex]=l,o.formatter?(a.value=l,e.isFunction(o.formatter)?o.formatter.call(a):t.formatter[o.formatter].call(a)):l):"&nbsp;"},c=function(i,n){var o=n.key,l=n.label;if("undefined"==typeof o)return l;if("__d-index__"===o||"__d-checkbox__"===o)return"&nbsp;";if(n.collector){var a={key:o,list:i},r=void 0;return r=e.isFunction(n.collector)?n.collector.call(a):t.collector[n.collector].call(a),n.formatter?(a.value=r,e.isFunction(n.formatter)?n.formatter.call(a):t.formatter[n.formatter].call(a)):r}return"&nbsp;"},h=function(i){var n=this.config,o=this.proxyList?this.proxyList:this.list;i&&(r.call(this),this.xvar.paintStartRowIndex=void 0,this.xvar.paintStartColumnIndex=void 0);var l=this.config.virtualScrollY?Math.floor(-this.$.panel["body-scroll"].position().top/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex:this.xvar.frozenRowIndex;if(isNaN(l))return this;var a=0,h=0,u=null,g=null,f=-this.$.panel["body-scroll"].position().left;if(this.config.virtualScrollX){for(var x=this.xvar.frozenColumnIndex;x<this.colGroup.length;x++)this.colGroup[x]._sx=x==this.xvar.frozenColumnIndex?0:this.colGroup[x-1]._ex,this.colGroup[x]._ex=this.colGroup[x]._sx+this.colGroup[x]._width,this.colGroup[x]._sx<=f&&this.colGroup[x]._ex>=f&&(a=x),this.colGroup[x]._sx<=f+this.xvar.bodyWidth&&this.colGroup[x]._ex>=f+this.xvar.bodyWidth&&(h=x,null===u&&(u=this.colGroup[a]._sx),null===g&&(g=this.xvar.scrollContentWidth-this.colGroup[x]._ex));null===u&&(u=0),null===g&&(g=0),this.$.panel["top-body-scroll"].css({"padding-left":u,"padding-right":g}),this.$.panel["body-scroll"].css({"padding-left":u,"padding-right":g}),this.$.panel["bottom-body-scroll"].css({"padding-left":u,"padding-right":g})}var p="undefined"==typeof this.xvar.paintStartRowIndex,m=this.headerColGroup,v=this.asideBodyRowData,y=this.leftBodyRowData,b=this.bodyRowData,w=this.leftFootSumData,I=this.footSumData,_=this.asideBodyGroupingData,C=this.leftBodyGroupingData,R=this.bodyGroupingData,S=n.body.align,E=this.config.virtualScrollY?Math.ceil(this.xvar.bodyHeight/this.xvar.bodyTrHeight)+1:o.length;if(this.xvar.dataRowCount===o.length&&this.xvar.paintStartRowIndex===l&&this.xvar.paintRowCount===E&&this.xvar.paintStartColumnIndex===a&&this.xvar.paintEndColumnIndex===h)return this;(u||g)&&(m=[].concat(m).splice(a-this.xvar.frozenColumnIndex,h-a+1+this.xvar.frozenColumnIndex),b=t.util.getTableByStartEndColumnIndex(b,a,h),n.body.grouping&&(R=t.util.getTableByStartEndColumnIndex(R,a,h)),n.footSum&&(I=t.util.getTableByStartEndColumnIndex(I,a,h)),this.xvar.paintStartColumnIndex===a&&this.xvar.paintEndColumnIndex===h||(this.needToPaintSum=!0)),!this.config.virtualScrollX&&document.addEventListener&&ax5.info.supportTouch&&(E*=2),this.xvar.scrollContentHeight=this.xvar.bodyTrHeight*(this.list.length-this.xvar.frozenRowIndex),this.$.livePanelKeys=[];var $=function(t,i,o,l,a,r){var c=this.$.panel[t];if(!p&&!r)return this.$.livePanelKeys.push(t),!1;var h=[],u=void 0,g=void 0,f=void 0,x=void 0,m=void 0,v=void 0,y=void 0,b=void 0,w=void 0,I=void 0,_=void 0,C=function(){return"undefined"!=typeof r&&"undefined"!=typeof r.paintStartRowIndex||(r={paintStartRowIndex:0,paintRowCount:a.length},!1)}();for(C&&h.push('<div style="font-size:0;line-height:0;height: '+(r.paintStartRowIndex-this.xvar.frozenRowIndex)*r.bodyTrHeight+'px;"></div>'),h.push('<table border="0" cellpadding="0" cellspacing="0">'),h.push("<colgroup>"),u=0,g=i.length;u<g;u++)h.push('<col style="width:'+i[u]._width+'px;"  />');for(h.push("<col  />"),h.push("</colgroup>"),f=r.paintStartRowIndex,x=function(){var t=void 0;return t=a.length,r.paintRowCount+r.paintStartRowIndex<t&&(t=r.paintRowCount+r.paintStartRowIndex),t}();f<x;f++)if(a[f]){var R=!1,E=void 0,$="undefined"!=typeof a[f].__origin_index__?a[f].__origin_index__:f;l&&"__isGrouping"in a[f]?(E=l,R=!0):E=o;for(m=0,v=E.rows.length;m<v;m++){for(h.push('<tr class="tr-'+f%4+'"',R?' data-ax5grid-grouping-tr="true"':"",' data-ax5grid-tr-data-index="'+f+'"',' data-ax5grid-selected="'+(a[f][n.columnKeys.selected]||"false")+'"',' data-ax5grid-disable-selection="'+(a[f][n.columnKeys.disableSelection]||"false")+'"',">"),y=0,b=E.rows[m].cols.length;y<b;y++)w=E.rows[m].cols[y],I=n.body.columnHeight*w.rowspan-n.body.columnBorderWidth,_=w.align||S,h.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+f+'" ','data-ax5grid-column-row="'+m+'" ','data-ax5grid-column-col="'+y+'" ','data-ax5grid-column-rowIndex="'+w.rowIndex+'" ','data-ax5grid-column-colIndex="'+w.colIndex+'" ','data-ax5grid-column-attr="'+(w.columnAttr||"default")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn[f+"_"+w.colIndex+"_"+w.rowIndex],this.selectedColumn[f+"_"+w.colIndex+"_"+w.rowIndex]),'colspan="'+w.colspan+'" ','rowspan="'+w.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:a[f],index:f})+" ":t.styleClass+" "),n.body.columnBorderWidth&&(i+="hasBorder "),y==b-1&&(i+="isLastColumn "),i}.call(this,w)+'" ','style="height: '+I+'px;min-height: 1px;">'),h.push(function(t){var e=n.body.columnHeight-2*n.body.columnPadding-n.body.columnBorderWidth;return w.multiLine||(t=n.body.columnHeight-n.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(w.multiLine?"multiLine":"")+'" '+(_?'data-ax5grid-text-align="'+_+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(I),R?d.call(this,a[f],f,w):s.call(this,a,a[f],f,w),"</span>"),h.push("</td>");h.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+$+'" ','data-ax5grid-column-attr="default" ','style="height: '+n.body.columnHeight+'px;min-height: 1px;" ',"></td>"),h.push("</tr>")}}return h.push("</table>"),C&&a.length&&h.push('<div style="font-size:0;line-height:0;height: '+(a.length-f)*r.bodyTrHeight+'px;"></div>'),c.empty().get(0).innerHTML=h.join(""),this.$.livePanelKeys.push(t),!0},z=function(t,i,o,l,a){var r=this.$.panel[t];if(!p&&!a)return this.$.livePanelKeys.push(t),!1;var s=[],d=void 0,h=void 0,u=void 0,g=void 0,f=void 0,x=void 0,m=void 0,v=void 0,y=void 0;for(s.push('<table border="0" cellpadding="0" cellspacing="0">'),s.push("<colgroup>"),d=0,h=i.length;d<h;d++)s.push('<col style="width:'+i[d]._width+'px;"  />');for(s.push("<col  />"),s.push("</colgroup>"),u=0,g=o.rows.length;u<g;u++){for(s.push('<tr class="tr-sum">'),f=0,x=o.rows[u].cols.length;f<x;f++)m=o.rows[u].cols[f],v=n.body.columnHeight*m.rowspan-n.body.columnBorderWidth,y=m.align||S,s.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+f+'" ','data-ax5grid-column-rowIndex="'+u+'" ','data-ax5grid-column-colIndex="'+m.colIndex+'" ','data-ax5grid-column-attr="'+(m.columnAttr||"sum")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn["sum_"+m.colIndex+"_"+u],this.selectedColumn["sum_"+m.colIndex+"_"+u]),'colspan="'+m.colspan+'" ','rowspan="'+m.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),n.body.columnBorderWidth&&(i+="hasBorder "),f==x-1&&(i+="isLastColumn "),i}.call(this,m)+'" ','style="height: '+v+'px;min-height: 1px;">'),s.push(function(t){var e=n.body.columnHeight-2*n.body.columnPadding-n.body.columnBorderWidth;return m.multiLine||(t=n.body.columnHeight-n.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(m.multiLine?"multiLine":"")+'" '+(y?'data-ax5grid-text-align="'+y+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(v),c.call(this,l,m),"</span>"),s.push("</td>");s.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+n.body.columnHeight+'px;min-height: 1px;" ',"></td>"),s.push("</tr>")}return s.push("</table>"),r.empty().get(0).innerHTML=s.join(""),this.$.livePanelKeys.push(t),!0},T=function(t,i,o,l,a){for(var r=[],s=this.$.panel[t],d={},c=void 0,h=s.find("tr"),u=0,g=h.length;u<g;u++){var f=void 0,x=void 0;if(!h[u].getAttribute("data-ax5grid-grouping-tr")){f=h[u].childNodes,x=[];for(var p=0,m=f.length;p<m;p++){var v={$:jQuery(f[p])};"null"!=v.$.attr("data-ax5grid-column-col")&&(v.dindex=v.$.attr("data-ax5grid-data-index"),v.tri=v.$.attr("data-ax5grid-column-row"),v.ci=v.$.attr("data-ax5grid-column-col"),v.rowIndex=v.$.attr("data-ax5grid-column-rowIndex"),v.colIndex=v.$.attr("data-ax5grid-column-colIndex"),v.rowspan=v.$.attr("rowspan"),v.text=v.$.text(),x.push(v)),v=null}r.push(x)}}if(r.length>1){c=!1;for(var y=function(t,o){for(var l=[],a=function(o,a){!i[o].editor&&function(){return!e.isArray(n.body.mergeCells)||ax5.util.search(n.body.mergeCells,i[o].key)>-1}()&&(d[o]&&function(){if(l.length>0){var e=!0;return l.forEach(function(i){r[t-1][i].text!=r[t][i].text&&(e=!1)}),e}return!0}()&&d[o].text==r[t][o].text?(r[t][o].rowspan=0,r[d[o].ri][o].rowspan++,c=!0):d[o]={ri:t,ci:o,text:r[t][o].text},l.push(o))},s=0,h=r[t].length;s<h;s++)a(s,h)},b=0,w=r.length;b<w;b++)y(b,w);if(c)for(var I=0,_=r.length;I<_;I++)for(var C=0,R=r[I].length;C<R;C++)0==r[I][C].rowspan?r[I][C].$.remove():r[I][C].rowspan>1&&r[I][C].$.attr("rowspan",r[I][C].rowspan).addClass("merged")}},k={paintStartRowIndex:l,paintRowCount:E,paintStartColumnIndex:a,paintEndColumnIndex:h,nopaintLeftColumnsWidth:u,nopaintRightColumnsWidth:g,bodyTrHeight:this.xvar.bodyTrHeight,virtualScrollX:this.config.virtualScrollX,virtualScrollY:this.config.virtualScrollY};n.asidePanelWidth>0&&(this.xvar.frozenRowIndex>0&&$.call(this,"top-aside-body",this.asideColGroup,v,_,o.slice(0,this.xvar.frozenRowIndex)),$.call(this,"aside-body-scroll",this.asideColGroup,v,_,o,k),n.footSum),this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&$.call(this,"top-left-body",this.leftHeaderColGroup,y,C,o.slice(0,this.xvar.frozenRowIndex),jQuery.extend({},k,{paintStartRowIndex:0,paintRowCount:this.xvar.frozenRowIndex})),$.call(this,"left-body-scroll",this.leftHeaderColGroup,y,C,o,k),n.footSum&&this.needToPaintSum&&z.call(this,"bottom-left-body",this.leftHeaderColGroup,w,o)),this.xvar.frozenRowIndex>0&&$.call(this,"top-body-scroll",m,b,R,o.slice(0,this.xvar.frozenRowIndex),jQuery.extend({},k,{paintStartRowIndex:0,paintRowCount:this.xvar.frozenRowIndex})),$.call(this,"body-scroll",m,b,R,o,k),n.footSum&&this.needToPaintSum&&z.call(this,"bottom-body-scroll",m,I,o,k),n.rightSum,n.body.mergeCells&&this.list.length&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&T.call(this,"top-left-body",this.leftHeaderColGroup,y,o.slice(0,this.xvar.frozenRowIndex)),T.call(this,"left-body-scroll",this.leftHeaderColGroup,y,o,k)),this.xvar.frozenRowIndex>0&&T.call(this,"top-body-scroll",this.headerColGroup,b,o.slice(0,this.xvar.frozenRowIndex)),T.call(this,"body-scroll",this.headerColGroup,b,o,k)),this.xvar.paintStartRowIndex=l,this.xvar.paintRowCount=E,this.xvar.paintStartColumnIndex=a,this.xvar.paintEndColumnIndex=h,this.xvar.nopaintLeftColumnsWidth=u,this.xvar.nopaintRightColumnsWidth=g,this.xvar.dataRowCount=o.length,this.needToPaintSum=!1,t.page.statusUpdate.call(this)},u=function(i,n,o,l,a){var r=this,h=this.config,u=this.list,g=this.$.panel[i].find('[data-ax5grid-tr-data-index="'+n+'"]').find('[data-ax5grid-column-rowindex="'+o+'"][data-ax5grid-column-colindex="'+l+'"]').find("[data-ax5grid-cellholder]"),f=this.colGroup,x=f[l];g.html(s.call(this,u,u[n],n,x)),x.editor&&x.editor.updateWith&&x.editor.updateWith.forEach(function(e){f.forEach(function(i){if(i.key==e){var o=i.rowIndex,l=i.colIndex,a=t.util.findPanelByColumnIndex.call(r,n,l,o).panelName,d=r.$.panel[a].find('[data-ax5grid-tr-data-index="'+n+'"]').find('[data-ax5grid-column-rowindex="'+o+'"][data-ax5grid-column-colindex="'+l+'"]').find("[data-ax5grid-cellholder]");d.html(s.call(r,u,u[n],n,i))}})});var p=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,m=this.headerColGroup,v=this.leftFootSumData,y=this.footSumData,b=this.leftBodyGroupingData,w=this.bodyGroupingData,I=h.body.align,_=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1,C={paintStartRowIndex:p,paintRowCount:_,bodyTrHeight:this.xvar.bodyTrHeight};(this.xvar.nopaintLeftColumnsWidth||this.xvar.nopaintRightColumnsWidth)&&(m=[].concat(m).splice(this.xvar.paintStartColumnIndex,this.xvar.paintEndColumnIndex-this.xvar.paintStartColumnIndex+1),h.body.grouping&&(w=t.util.getTableByStartEndColumnIndex(w,this.xvar.paintStartColumnIndex,this.xvar.paintEndColumnIndex)),h.footSum&&(y=t.util.getTableByStartEndColumnIndex(y,this.xvar.paintStartColumnIndex,this.xvar.paintEndColumnIndex)));var R=function(t,i,n,o,l){var a=this.$.panel[t],r=[],s=void 0,d=void 0,u=void 0,g=void 0,f=void 0,x=void 0,p=void 0,m=void 0,v=void 0;for(r.push('<table border="0" cellpadding="0" cellspacing="0">'),r.push("<colgroup>"),s=0,d=i.length;s<d;s++)r.push('<col style="width:'+i[s]._width+'px;"  />');for(r.push("<col  />"),r.push("</colgroup>"),u=0,g=n.rows.length;u<g;u++){for(r.push('<tr class="tr-sum">'),f=0,x=n.rows[u].cols.length;f<x;f++)p=n.rows[u].cols[f],m=h.body.columnHeight*p.rowspan-h.body.columnBorderWidth,v=p.align||I,r.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+f+'" ','data-ax5grid-column-rowIndex="'+u+'" ','data-ax5grid-column-colIndex="'+p.colIndex+'" ','data-ax5grid-column-attr="'+(p.columnAttr||"sum")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn["sum_"+p.colIndex+"_"+u],this.selectedColumn["sum_"+p.colIndex+"_"+u]),'colspan="'+p.colspan+'" ','rowspan="'+p.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),h.body.columnBorderWidth&&(i+="hasBorder "),f==x-1&&(i+="isLastColumn "),i}.call(this,p)+'" ','style="height: '+m+'px;min-height: 1px;">'),r.push(function(t){var e=h.body.columnHeight-2*h.body.columnPadding-h.body.columnBorderWidth;return p.multiLine||(t=h.body.columnHeight-h.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(p.multiLine?"multiLine":"")+'" '+(v?'data-ax5grid-text-align="'+v+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(m),c.call(this,o,p),"</span>"),r.push("</td>");r.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+h.body.columnHeight+'px;min-height: 1px;" ',"></td>"),r.push("</tr>")}return r.push("</table>"),a.empty().get(0).innerHTML=r.join(""),!0},S=function(t,i,n,o,l){var a=this.$.panel[t],r=[],s=void 0,c=void 0,u=void 0,g=void 0,f=void 0,x=void 0,p=void 0,m=void 0,v=void 0;for(s=l.paintStartRowIndex,c=function(){var t=void 0;return t=o.length,l.paintRowCount+l.paintStartRowIndex<t&&(t=l.paintRowCount+l.paintStartRowIndex),t}();s<c;s++)if(o[s]&&n&&"__isGrouping"in o[s]){var y=n;for(r=[],u=0,g=y.rows.length;u<g;u++){for(f=0,x=y.rows[u].cols.length;f<x;f++)p=y.rows[u].cols[f],m=h.body.columnHeight*p.rowspan-h.body.columnBorderWidth,v=p.align||I,r.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+s+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+f+'" ','data-ax5grid-column-rowIndex="'+p.rowIndex+'" ','data-ax5grid-column-colIndex="'+p.colIndex+'" ','data-ax5grid-column-attr="'+(p.columnAttr||"default")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn[s+"_"+p.colIndex+"_"+p.rowIndex],this.selectedColumn[s+"_"+p.colIndex+"_"+p.rowIndex]),'colspan="'+p.colspan+'" ','rowspan="'+p.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:o[s],index:s})+" ":t.styleClass+" "),h.body.columnBorderWidth&&(i+="hasBorder "),f==x-1&&(i+="isLastColumn "),i}.call(this,p)+'" ','style="height: '+m+'px;min-height: 1px;">'),r.push(function(t){var e=h.body.columnHeight-2*h.body.columnPadding-h.body.columnBorderWidth;return p.multiLine||(t=h.body.columnHeight-h.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(p.multiLine?"multiLine":"")+'" '+(v?'data-ax5grid-text-align="'+v+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(m),d.call(this,o[s],s,p),"</span>"),r.push("</td>");r.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+s+'" ','data-ax5grid-column-attr="default" ','style="height: '+h.body.columnHeight+'px;min-height: 1px;" ',"></td>")}a.find('tr[data-ax5grid-tr-data-index="'+s+'"]').empty().get(0).innerHTML=r.join("")}};h.body.grouping&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&S.call(this,"top-left-body",m,b,u.slice(0,this.xvar.frozenRowIndex),{paintStartRowIndex:0,paintRowCount:this.xvar.frozenRowIndex,bodyTrHeight:this.xvar.bodyTrHeight}),S.call(this,"left-body-scroll",m,b,u,C)),this.xvar.frozenRowIndex>0&&S.call(this,"top-body-scroll",m,w,u.slice(0,this.xvar.frozenRowIndex),{paintStartRowIndex:0,paintRowCount:this.xvar.frozenRowIndex,bodyTrHeight:this.xvar.bodyTrHeight}),S.call(this,"body-scroll",m,w,u,C)),this.xvar.frozenColumnIndex>0&&h.footSum&&this.needToPaintSum&&R.call(this,"bottom-left-body",m,v,u),h.footSum&&this.needToPaintSum&&R.call(this,"bottom-body-scroll",m,y,u,C)},g=function(t){var i=this.config,n=this.list,o=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,l=(this.asideBodyRowData,this.leftBodyRowData),a=this.bodyRowData,r=this.leftFootSumData,h=this.footSumData,u=(this.asideBodyGroupingData,this.leftBodyGroupingData),g=this.bodyGroupingData,f=i.body.align,x=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1,p={paintStartRowIndex:o,paintRowCount:x,bodyTrHeight:this.xvar.bodyTrHeight},m=function(t,n,o,l){var a=this.$.panel[t],r=[],s=void 0,d=void 0,h=void 0,u=void 0,g=void 0,x=void 0,p=void 0,m=void 0,v=void 0;for(r.push('<table border="0" cellpadding="0" cellspacing="0">'),r.push("<colgroup>"),s=0,d=n.length;s<d;s++)r.push('<col style="width:'+n[s]._width+'px;"  />');for(r.push("<col  />"),r.push("</colgroup>"),h=0,u=o.rows.length;h<u;h++){for(r.push('<tr class="tr-sum">'),g=0,x=o.rows[h].cols.length;g<x;g++)p=o.rows[h].cols[g],m=i.body.columnHeight*p.rowspan-i.body.columnBorderWidth,v=p.align||f,r.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-column-row="'+h+'" ','data-ax5grid-column-col="'+g+'" ','data-ax5grid-column-rowIndex="'+h+'" ','data-ax5grid-column-colIndex="'+p.colIndex+'" ','data-ax5grid-column-attr="'+(p.columnAttr||"sum")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn["sum_"+p.colIndex+"_"+h],this.selectedColumn["sum_"+p.colIndex+"_"+h]),'colspan="'+p.colspan+'" ','rowspan="'+p.rowspan+'" ','class="'+function(t){var n="";return t.styleClass&&(n+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),i.body.columnBorderWidth&&(n+="hasBorder "),g==x-1&&(n+="isLastColumn "),n}.call(this,p)+'" ','style="height: '+m+'px;min-height: 1px;">'),r.push(function(t){var e=i.body.columnHeight-2*i.body.columnPadding-i.body.columnBorderWidth;return p.multiLine||(t=i.body.columnHeight-i.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(p.multiLine?"multiLine":"")+'" '+(v?'data-ax5grid-text-align="'+v+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(m),c.call(this,l,p),"</span>"),r.push("</td>");r.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>"),r.push("</tr>")}return r.push("</table>"),a.empty().get(0).innerHTML=r.join(""),!0},v=function(t,n,o,l,a){var r=this.$.panel[t],s=[],c=void 0,h=void 0,u=void 0,g=void 0,x=void 0,p=void 0,m=void 0,v=void 0,y=void 0;for("undefined"!=typeof a&&"undefined"!=typeof a.paintStartRowIndex||(a={paintStartRowIndex:0,paintRowCount:l.length}),c=a.paintStartRowIndex,h=function(){var t=void 0;return t=l.length,a.paintRowCount+a.paintStartRowIndex<t&&(t=a.paintRowCount+a.paintStartRowIndex),t}();c<h;c++)if(l[c]&&o&&"__isGrouping"in l[c]){var b=o;for(s=[],u=0,g=b.rows.length;u<g;u++){for(x=0,p=b.rows[u].cols.length;x<p;x++)m=b.rows[u].cols[x],v=i.body.columnHeight*m.rowspan-i.body.columnBorderWidth,y=m.align||f,s.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+c+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+x+'" ','data-ax5grid-column-rowIndex="'+m.rowIndex+'" ','data-ax5grid-column-colIndex="'+m.colIndex+'" ','data-ax5grid-column-attr="'+(m.columnAttr||"default")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn[c+"_"+m.colIndex+"_"+m.rowIndex],this.selectedColumn[c+"_"+m.colIndex+"_"+m.rowIndex]),'colspan="'+m.colspan+'" ','rowspan="'+m.rowspan+'" ','class="'+function(t){var n="";return t.styleClass&&(n+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:l[c],index:c})+" ":t.styleClass+" "),i.body.columnBorderWidth&&(n+="hasBorder "),x==p-1&&(n+="isLastColumn "),n}.call(this,m)+'" ','style="height: '+v+'px;min-height: 1px;">'),s.push(function(t){var e=i.body.columnHeight-2*i.body.columnPadding-i.body.columnBorderWidth;return m.multiLine||(t=i.body.columnHeight-i.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(m.multiLine?"multiLine":"")+'" '+(y?'data-ax5grid-text-align="'+y+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(v),d.call(this,l[c],c,m),"</span>"),s.push("</td>");s.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+c+'" ','data-ax5grid-column-attr="default" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>")}r.find('tr[data-ax5grid-tr-data-index="'+c+'"]').empty().get(0).innerHTML=s.join("")}},y=function(t,n,o,l,a){var r=this.$.panel[t],d=[],c=void 0,h=void 0,u=void 0,g=void 0,x=void 0,p=void 0,m=void 0,v=o;for(c=0,h=v.rows.length;c<h;c++){for(u=0,g=v.rows[c].cols.length;u<g;u++)x=v.rows[c].cols[u],p=i.body.columnHeight*x.rowspan-i.body.columnBorderWidth,m=x.align||f,d.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+a+'" ','data-ax5grid-column-row="'+c+'" ','data-ax5grid-column-col="'+u+'" ','data-ax5grid-column-rowIndex="'+x.rowIndex+'" ','data-ax5grid-column-colIndex="'+x.colIndex+'" ','data-ax5grid-column-attr="'+(x.columnAttr||"default")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn[a+"_"+x.colIndex+"_"+x.rowIndex],this.selectedColumn[a+"_"+x.colIndex+"_"+x.rowIndex]),'colspan="'+x.colspan+'" ','rowspan="'+x.rowspan+'" ','class="'+function(t){var n="";return t.styleClass&&(n+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:l[a],index:a})+" ":t.styleClass+" "),i.body.columnBorderWidth&&(n+="hasBorder "),u==g-1&&(n+="isLastColumn "),n}.call(this,x)+'" ','style="height: '+p+'px;min-height: 1px;">'),d.push(function(t){var e=i.body.columnHeight-2*i.body.columnPadding-i.body.columnBorderWidth;return x.multiLine||(t=i.body.columnHeight-i.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(x.multiLine?"multiLine":"")+'" '+(m?'data-ax5grid-text-align="'+m+'"':"")+'" style="height:'+t+"px;line-height: "+e+'px;">'}(p),s.call(this,l,l[a],a,x),"</span>"),d.push("</td>");d.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+a+'" ','data-ax5grid-column-attr="default" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>")}console.log('tr[data-ax5grid-tr-data-index="'+a+'"]'),r.find('tr[data-ax5grid-tr-data-index="'+a+'"]').empty().get(0).innerHTML=d.join("")};this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>t?y.call(this,"top-left-body",this.leftHeaderColGroup,l,n.slice(0,this.xvar.frozenRowIndex),t):y.call(this,"left-body-scroll",this.leftHeaderColGroup,l,n,t)),this.xvar.frozenRowIndex>t?y.call(this,"top-body-scroll",this.headerColGroup,a,n.slice(0,this.xvar.frozenRowIndex),t):y.call(this,"body-scroll",this.headerColGroup,a,n,t),i.body.grouping&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>t?v.call(this,"top-left-body",this.leftHeaderColGroup,u,n.slice(0,this.xvar.frozenRowIndex)):v.call(this,"left-body-scroll",this.leftHeaderColGroup,u,n,p)),this.xvar.frozenRowIndex>t?v.call(this,"top-body-scroll",this.headerColGroup,g,n.slice(0,this.xvar.frozenRowIndex)):v.call(this,"body-scroll",this.headerColGroup,g,n,p)),this.xvar.frozenColumnIndex>0&&i.footSum&&this.needToPaintSum&&m.call(this,"bottom-left-body",this.leftHeaderColGroup,r,n),i.footSum&&this.needToPaintSum&&m.call(this,"bottom-body-scroll",this.headerColGroup,h,n,p)},f=function(e,i){if(this.isInlineEditing)for(var n in this.inlineEditing)t.body.inlineEdit.deActive.call(this,"ESC",n);this.config.asidePanelWidth>0&&"top"in e&&this.$.panel["aside-body-scroll"].css({top:e.top}),this.xvar.frozenColumnIndex>0&&"top"in e&&this.$.panel["left-body-scroll"].css({top:e.top}),this.xvar.frozenRowIndex>0&&"left"in e&&this.$.panel["top-body-scroll"].css({left:e.left}),this.$.panel["body-scroll"].css(e),this.config.footSum&&"left"in e&&this.$.panel["bottom-body-scroll"].css({left:e.left}),this.config.virtualScrollY&&!i&&"top"in e?h.call(this):this.config.virtualScrollX&&!i&&"left"in e&&h.call(this)},x=function(){i.focusClear.call(this),i.clear.call(this),this.isInlineEditing&&m.deActive.call(this)},p=function(e){var n={UD:function(e){var n=!0,o=void 0,l=void 0,a=void 0,r=void 0;for(var s in this.focusedColumn){o=jQuery.extend({},this.focusedColumn[s],!0);break}if(!o)return!1;for(l=this.bodyRowMap[o.rowIndex+"_"+o.colIndex],i.focusClear.call(this),i.clear.call(this),e>0?o.rowIndex+(l.rowspan-1)+e>this.bodyRowTable.rows.length-1?(o.dindex=o.dindex+e,o.rowIndex=0,o.dindex>this.list.length-1&&(o.dindex=this.list.length-1,n=!1)):o.rowIndex=o.rowIndex+e:o.rowIndex+e<0?(o.dindex=o.dindex+e,o.rowIndex=this.bodyRowTable.rows.length-1,o.dindex<0&&(o.dindex=0,n=!1)):o.rowIndex=o.rowIndex+e,a=0;"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex];){if(0==o.rowIndex||a%2==(e>0?0:1)?o.colIndex--:o.rowIndex--,o.rowIndex<=0&&o.colIndex<=0){n=!1;break}a++}if(r=t.util.findPanelByColumnIndex.call(this,o.dindex,o.colIndex),this.config.body.mergeCells&&this.list.length){for(;!(this.$.panel[r.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').get(0)||(e>0?o.dindex++:o.dindex--,o.dindex<0||o.dindex>this.list.length-1)););r=t.util.findPanelByColumnIndex.call(this,o.dindex,o.colIndex)}return o.panelName=r.panelName,function(){o.dindex+1>this.xvar.frozenRowIndex&&(o.dindex<=this.xvar.paintStartRowIndex?(f.call(this,{top:-(o.dindex-this.xvar.frozenRowIndex)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)):o.dindex+1>this.xvar.paintStartRowIndex+(this.xvar.paintRowCount-2)&&(f.call(this,{top:-(o.dindex-this.xvar.frozenRowIndex-this.xvar.paintRowCount+3)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)))}.call(this),this.focusedColumn[o.dindex+"_"+o.colIndex+"_"+o.rowIndex]=o,this.$.panel[o.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').attr("data-ax5grid-column-focused","true"),n},LR:function(e){var n=!0,o=void 0,l=void 0,a=!1,r="",s=void 0;for(var d in this.focusedColumn){o=jQuery.extend({},this.focusedColumn[d],!0);break}if(!o)return!1;if(l=this.bodyRowMap[o.rowIndex+"_"+o.colIndex],i.focusClear.call(this),i.clear.call(this),e<0?(o.colIndex=o.colIndex+e,o.colIndex<0&&(o.colIndex=0,n=!1)):(o.colIndex=o.colIndex+e,o.colIndex>this.colGroup.length-1&&(o.colIndex=this.colGroup.length-1,n=!1)),"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex]&&(o.rowIndex=0),this.list[o.dindex]&&this.list[o.dindex].__isGrouping){if(e<0){for(;"undefined"==typeof this.bodyGroupingMap[o.rowIndex+"_"+o.colIndex];)if(o.colIndex--,o.colIndex<=0){n=!1;break}}else for(;"undefined"==typeof this.bodyGroupingMap[o.rowIndex+"_"+o.colIndex];)if(o.colIndex++,o.colIndex>=this.colGroup.length){n=!1;break}}else if(e<0){for(;"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex];)if(o.colIndex--,o.colIndex<=0){n=!1;break}}else for(;"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex];)if(o.colIndex++,o.colIndex>=this.colGroup.length){n=!1;break}if(s=t.util.findPanelByColumnIndex.call(this,o.dindex,o.colIndex),this.config.body.mergeCells&&this.list.length&&o.dindex>1){
for(;!(this.$.panel[s.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').get(0)||(o.dindex--,o.dindex<0||o.dindex>this.list.length-1)););s=t.util.findPanelByColumnIndex.call(this,o.dindex,o.colIndex)}o.panelName=s.panelName;var c=function(){if(!this.config.virtualScrollX)return!1;var e=0;if(o.colIndex+1>this.xvar.frozenColumnIndex){if(o.colIndex<=this.xvar.paintStartColumnIndex&&this.colGroup[o.colIndex])return e=-this.colGroup[Number(o.colIndex)]._sx,f.call(this,{left:e}),t.header.scrollTo.call(this,{left:e}),t.scroller.resize.call(this),!0;if(o.colIndex>=this.xvar.paintEndColumnIndex&&this.colGroup[Number(o.colIndex)])return this.colGroup[Number(o.colIndex)]._ex>this.xvar.bodyWidth&&(e=this.colGroup[Number(o.colIndex)]._ex-this.xvar.bodyWidth,f.call(this,{left:-e}),t.header.scrollTo.call(this,{left:-e}),t.scroller.resize.call(this)),!0}return e=null,!1}.call(this);r=s.containerPanelName,a=s.isScrollPanel,this.focusedColumn[o.dindex+"_"+o.colIndex+"_"+o.rowIndex]=o;var h=this.$.panel[o.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').attr("data-ax5grid-column-focused","true");if(!c&&h&&a){var u=function(){return h.position().left+h.outerWidth()>Math.abs(this.$.panel[o.panelName].position().left)+this.$.panel[r].width()?h.position().left+h.outerWidth()-this.$.panel[r].width():Math.abs(this.$.panel[o.panelName].position().left)>h.position().left?h.position().left:void 0}.call(this);"undefined"!=typeof u&&(t.header.scrollTo.call(this,{left:-u}),f.call(this,{left:-u}),t.scroller.resize.call(this))}return n},INDEX:function(e){var n=!0,o=void 0,l=void 0,a=void 0;for(var r in this.focusedColumn){o=jQuery.extend({},this.focusedColumn[r],!0);break}for(o||(o={rowIndex:0,colIndex:0}),l=this.bodyRowMap[o.rowIndex+"_"+o.colIndex],i.focusClear.call(this),i.clear.call(this),"end"==e&&(e=this.list.length-1),o.dindex=e,o.rowIndex=0,a=0;"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex]&&(0==o.rowIndex||a%2==(_dy>0?0:1)?o.colIndex--:o.rowIndex--,!(o.rowIndex<=0&&o.colIndex<=0));)a++;var s=t.util.findPanelByColumnIndex.call(this,o.dindex,o.colIndex);return o.panelName=s.panelName,function(){o.dindex+1>this.xvar.frozenRowIndex&&(o.dindex<this.xvar.paintStartRowIndex?(f.call(this,{top:-(o.dindex-this.xvar.frozenRowIndex)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)):o.dindex+1>this.xvar.paintStartRowIndex+(this.xvar.paintRowCount-2)&&(f.call(this,{top:-(o.dindex-this.xvar.frozenRowIndex-this.xvar.paintRowCount+3)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)))}.call(this),this.focusedColumn[o.dindex+"_"+o.colIndex+"_"+o.rowIndex]=o,this.$.panel[o.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').attr("data-ax5grid-column-focused","true"),n}},o={UP:function(){return n.UD.call(this,-1)},DOWN:function(){return n.UD.call(this,1)},LEFT:function(){return n.LR.call(this,-1)},RIGHT:function(){return n.LR.call(this,1)},HOME:function(){return n.INDEX.call(this,0)},END:function(){return n.INDEX.call(this,"end")},position:function(t){return n.INDEX.call(this,t)}};return e in o?o[e].call(this):o.position.call(this,e)},m={active:function(i,n,l){var a,r,s,d,c,h,u,g=this;for(var f in i){if(d=i[f].panelName,a=i[f].dindex,r=i[f].colIndex,s=i[f].rowIndex,c=i[f].colspan,h=this.colGroup[r],!(u=h.editor))return this;if(e.isFunction(u.disabled)&&u.disabled.call({list:this.list,dindex:a,item:this.list[a],key:h.key,value:l}))return this;if(!function(e,i){if(e.type in t.inlineEditor)return"popup"==t.inlineEditor[e.type].editMode}(u)){if("checkbox"==u.type){var x,p;p=u.config&&u.config.trueValue?(x=!(l==u.config.trueValue))?u.config.trueValue:u.config.falseValue:x=0==l||"false"==l||l<"1"?"true":"false",t.data.setValue.call(g,a,h.key,p),o.call(g,["cellChecked"],a,{key:h.key,rowIndex:s,colIndex:r,editorConfig:h.editor.config,checked:x})}return this}if(this.list[a].__isGrouping)return!1;if(f in this.inlineEditing)return!1;this.inlineEditing[f]={editor:u,panelName:d,columnKey:f,column:i[f],useReturnToSave:t.inlineEditor[u.type].useReturnToSave},this.isInlineEditing=!0}if(this.isInlineEditing){var m=t.data.getValue.call(g,a,h.key),v=function(t,i){return e.isNothing(t)&&(t=e.isNothing(m)?"":m),"money"==i.type?e.number(t,{money:!0}):t}.call(this,l,u);return this.inlineEditing[f].$inlineEditorCell=this.$.panel[d].find('[data-ax5grid-tr-data-index="'+a+'"]').find('[data-ax5grid-column-rowindex="'+s+'"][data-ax5grid-column-colindex="'+r+'"]').find("[data-ax5grid-cellholder]"),this.inlineEditing[f].$inlineEditor=t.inlineEditor[u.type].init(this,f,u,this.inlineEditing[f].$inlineEditorCell,v),!0}},deActive:function(i,n,o){if(!this.inlineEditing[n])return this;var l=this.inlineEditing[n].panelName,a=this.inlineEditing[n].column.dindex,r=this.inlineEditing[n].column.rowIndex,s=this.inlineEditing[n].column.colIndex,d=this.bodyRowMap[this.inlineEditing[n].column.rowIndex+"_"+this.inlineEditing[n].column.colIndex],c=function(t){return"undefined"==typeof o?"SELECT"==t.get(0).tagName||"INPUT"==t.get(0).tagName||"TEXTAREA"==t.get(0).tagName?t.val():(i="CANCEL",!1):o}(this.inlineEditing[n].$inlineEditor),h=function(t,i){return"money"==i.type?e.number(t):t}.call(this,c,d.editor),u={CANCEL:function(t,e,i){u.__clear.call(this)},RETURN:function(e,i,n){t.data.setValue.call(this,e,i.key,n)?(u.__clear.call(this),t.body.repaintCell.call(this,l,a,r,s,n)):u.__clear.call(this)},__clear:function(){this.isInlineEditing=!1;var t=this.inlineEditing[n].$inlineEditor.data("binded-ax5ui");"ax5picker"==t?this.inlineEditing[n].$inlineEditor.ax5picker("close"):"ax5select"==t&&this.inlineEditing[n].$inlineEditor.ax5select("close"),this.inlineEditing[n].$inlineEditor.remove(),this.inlineEditing[n].$inlineEditor=null,this.inlineEditing[n].$inlineEditorCell=null,this.inlineEditing[n]=void 0,delete this.inlineEditing[n]}};i in u?u[i||"RETURN"].call(this,a,d,h):u.__clear.call(this)},keydown:function(e,i,n){var l={ESC:function(){for(var t in this.inlineEditing)m.deActive.call(this,"CANCEL",t)},RETURN:function(){if(this.isInlineEditing)this.inlineEditing[i]&&this.inlineEditing[i].useReturnToSave&&m.deActive.call(this,"RETURN",i);else for(var e in this.focusedColumn){var l=this.focusedColumn[e],a=this.bodyRowMap[l.rowIndex+"_"+l.colIndex],r=l.dindex,s="",d=this.colGroup[l.colIndex];if(a&&(this.list[r].__isGrouping||(s=t.data.getValue.call(this,r,a.key))),d.editor&&"inline"===t.inlineEditor[d.editor.type].editMode){if(n&&n.moveFocus);else if(a.editor&&"checkbox"==a.editor.type){s=t.data.getValue.call(this,r,a.key);var c=void 0,h=void 0;h=a.editor.config&&a.editor.config.trueValue?(c=!(s==a.editor.config.trueValue))?a.editor.config.trueValue:a.editor.config.falseValue:c=0==s||"false"==s||s<"1"?"true":"false",t.data.setValue.call(this,l.dindex,a.key,h),o.call(this,["cellChecked"],r,{key:a.key,rowIndex:l.rowIndex,colIndex:l.colIndex,editorConfig:a.editor.config,checked:c})}}else t.body.inlineEdit.active.call(this,this.focusedColumn,null,s)}}};e in l&&l[e].call(this,e,i,n)}},v=function(){var t=this.config,e=this.list,i=this.bodyRowTable,n=this.footSumTable,o=this.bodyGroupingTable,l=function(t,e,i,n){var o=[],l=void 0,a=void 0,r=void 0,c=void 0,h=void 0,u=void 0,g=void 0;for(l=0,a=n.length;l<a;l++){var f=!1,x=void 0;i&&"__isGrouping"in n[l]?(x=i,f=!0):x=e;for(r=0,c=x.rows.length;r<c;r++){for(o.push("\n<tr>"),h=0,u=x.rows[r].cols.length;h<u;h++)g=x.rows[r].cols[h],o.push("<td ",'colspan="'+g.colspan+'" ','rowspan="'+g.rowspan+'" ',">",f?d.call(this,n[l],l,g):s.call(this,n,n[l],l,g,void 0,"text"),"&nbsp;</td>");o.push("\n</tr>")}}return o.join("")},a=function(t,e,i){var n=[],o=void 0,l=void 0,a=void 0,r=void 0,s=void 0;for(o=0,l=e.rows.length;o<l;o++){for(n.push("\n<tr>"),a=0,r=e.rows[o].cols.length;a<r;a++)s=e.rows[o].cols[a],n.push("<td ",'colspan="'+s.colspan+'" ','rowspan="'+s.rowspan+'" ',">",c.call(this,i,s),"</td>");n.push("\n</tr>")}return n.join("")},r=[];return r.push(l.call(this,this.headerColGroup,i,o,e)),t.footSum&&r.push(a.call(this,this.headerColGroup,n,e)),t.rightSum,r.join("")},y=function(e,i){t.data.toggleCollapse.call(this,e,i)&&(this.proxyList=t.data.getProxyList.call(this,this.list),h.call(this))};t.body={init:a,repaint:h,repaintCell:u,repaintRow:g,updateRowState:o,updateRowStateAll:l,scrollTo:f,blur:x,moveFocus:p,inlineEdit:m,getExcelString:v,toggleCollapse:y}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(){for(var t=0,i=this.list.length;i--;)"__groupingList"in this.list[i]||(t+=e.number(this.list[i][this.key]));return t},n=function(){for(var t=0,i=this.list.length,n=0;i--;)"__groupingList"in this.list[i]||(t+=e.number(this.list[i][this.key]),n++);return e.number(t/(n||1),{round:2})};t.collector={sum:i,avg:n}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(){},n=function(t){for(var e=0,i=t.length,n=[];e<i;e++)t[e]&&!t[e].__isGrouping&&(t[e][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(e),n.push(jQuery.extend({},t[e])));return n},o=function(t){this.selectedDataIndexs=[],this.deletedList=[];var i=0,n=t.length,o=[],l=0,a=0,r=0;if(this.config.body.grouping){for(var s=e.map(this.bodyGrouping.by,function(){return{key:this,compareString:"",grouping:!1,list:[]}}),d=0,c=s.length,h=void 0,u=[],g=void 0;i<n+1;i++)if(d=0,t[i])if(t[i][this.config.columnKeys.deleted])this.deletedList.push(t[i]);else{for(h="",u=[];d<c;d++){if(t[i]&&(h+="$|$"+t[i][s[d].key]),l>0&&h!=s[d].compareString){for(var f={keys:[],labels:[],list:s[d].list},x=0;x<d+1;x++)f.keys.push(s[x].key),f.labels.push(t[i-1][s[x].key]);u.push(f),s[d].list=[]}s[d].list.push(t[i]),s[d].compareString=h}for(g=u.length;g--;)o.push({__isGrouping:!0,__groupingList:u[g].list,__groupingBy:{keys:u[g].keys,labels:u[g].labels}});t[i][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(i),t[i].__index=r,a++,l++,r++,o.push(t[i])}}else for(;i<n;i++)t[i]&&(t[i][this.config.columnKeys.deleted]?this.deletedList.push(t[i]):(t[i][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(i),t[i].__index=r,a++,r++,o.push(t[i])));return this.xvar.dataRealRowCount=a,o},l=function(t){this.selectedDataIndexs=[],this.deletedList=[];for(var i=0,n=0,o=0,l=0,a=t.length,r=this.config.tree.columnKeys,s=this.config.tree.hashDigit,d={};a--;)delete t[a][r.parentHash],delete t[a][r.selfHash];for(i=0,n=0,a=t.length;i<a;i++)t[i]&&(d[t[i][r.selfKey]]=i,(e.isNothing(t[i][r.parentKey])||"top"===t[i][r.parentKey])&&(t[i][r.parentKey]="top",t[i][r.children]=[],t[i][r.parentHash]=e.setDigit("0",s),t[i][r.selfHash]=e.setDigit("0",s)+"."+e.setDigit(n,s),t[i][r.depth]=0,t[i][r.hidden]=!1,n++));for(i=0,l=0;i<a;i++){var c=void 0,h=void 0;t[i]&&"top"!==t[i][r.parentKey]&&"undefined"==typeof t[i][r.parentHash]&&((c=t[d[t[i][r.parentKey]]])?(h=c[r.selfHash],t[i][r.children]=[],t[i][r.parentHash]=h,t[i][r.selfHash]=h+"."+e.setDigit(c[r.children].length,s),t[i][r.depth]=c[r.depth]+1,(c[r.collapse]||c[r.hidden])&&(t[i][r.hidden]=!0),c[r.children].push(t[i][r.selfKey])):(t[i][r.parentKey]="top",t[i][r.children]=[],t[i][r.parentHash]=e.setDigit("0",s),t[i][r.selfHash]=e.setDigit("0",s)+"."+e.setDigit(n,s),t[i][r.hidden]=!1,n++)),t[i]&&(t[i][this.config.columnKeys.deleted]?(this.deletedList.push(t[i]),t[i][r.hidden]=!0):t[i][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(i),t[i].__index=l,o++,l++)}return this.listIndexMap=d,this.xvar.dataRealRowCount=o,t},a=function(t){for(var e=0,i=t.length,n=[];e<i;e++)t[e]&&!t[e][this.config.tree.columnKeys.hidden]&&(t[e].__origin_index__=e,n.push(t[e]));return n},r=function(i){return e.isArray(i)?(this.page=null,this.config.tree.use?(this.list=l.call(this,i),this.proxyList=a.call(this,y.call(this,this.sortInfo,this.list))):(this.proxyList=null,this.list=o.call(this,!this.config.remoteSort&&Object.keys(this.sortInfo).length?y.call(this,this.sortInfo,i):i)),this.deletedList=[]):"page"in i&&(this.page=jQuery.extend({},i.page),this.config.tree.use?(this.list=l.call(this,i.list),this.proxyList=a.call(this,y.call(this,this.sortInfo,this.list))):this.list=o.call(this,!this.config.remoteSort&&Object.keys(this.sortInfo).length?y.call(this,this.sortInfo,i.list):i.list),this.deletedList=[]),this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this.config.body.grouping,this},s=function(t){return{list:this.list,page:this.page}},d=function(e){var i=[],n=0,o=this.list.length;switch(e){case"modified":for(;n<o;n++)this.list[n]&&!this.list[n].__isGrouping&&this.list[n][this.config.columnKeys.modified]&&i.push(jQuery.extend({},this.list[n]));break;case"selected":for(;n<o;n++)this.list[n]&&!this.list[n].__isGrouping&&this.list[n][this.config.columnKeys.selected]&&i.push(jQuery.extend({},this.list[n]));break;case"deleted":i=[].concat(this.deletedList);break;default:i=t.data.clearGroupingData.call(this,this.list)}return i},c=function(i,r,s){var d=this.config.body.grouping?n.call(this,this.list):this.list,c={first:function(){d=[].concat(i).concat(d)},last:function(){d=d.concat([].concat(i))}};if(this.config.tree.use){var h=this.list.concat([].concat(i));this.list=l.call(this,h),this.proxyList=a.call(this,y.call(this,this.sortInfo,this.list))}else{if("undefined"==typeof r&&(r="last"),r in c)i[this.config.columnKeys.modified]=!0,c[r].call(this,i);else{if(!e.isNumber(r))throw"invalid argument _dindex";if(e.isArray(i))for(var u=0,g=row.length;u<g;u++)d.splice(r+u,0,i[u]);else d.splice(r,0,i)}d=this.config.body.grouping?o.call(this,y.call(this,this.sortInfo,d)):s&&s.sort&&Object.keys(this.sortInfo).length?o.call(this,y.call(this,this.sortInfo,d)):o.call(this,d),this.list=d}return this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},h=function(i){var r=this.config.body.grouping?n.call(this,this.list):this.list,s={first:function(){this.config.tree.use?s.tree.call(this,0):r.splice(0,1)},last:function(){this.config.tree.use?s.tree.call(this,r.length-1):r.splice(r.length-1,1)},index:function(t){this.config.tree.use?s.tree.call(this,t):r.splice(t,1)},tree:function(t){var i=this.config.tree.columnKeys,n=r[t][this.config.tree.columnKeys.selfHash];r=e.filter(r,function(){return this[i.selfHash].substr(0,n.length)!=n}),i=null,n=null}};if("undefined"==typeof i&&(i="last"),i in s)s[i].call(this,i);else{if(!e.isNumber(i))throw"invalid argument _dindex";s.index.call(this,i)}return this.config.tree.use?(this.list=l.call(this,r),this.proxyList=a.call(this,y.call(this,this.sortInfo,this.list))):(r=this.config.body.grouping?o.call(this,y.call(this,this.sortInfo,r)):Object.keys(this.sortInfo).length?o.call(this,y.call(this,this.sortInfo,r)):o.call(this,r),this.list=r),this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},u=function(i){var r=this.config.body.grouping?n.call(this,this.list):this.list,s={first:function(){this.config.tree.use?s.tree.call(this,0):r[0][this.config.columnKeys.deleted]=!0},last:function(){this.config.tree.use?s.tree.call(this,r.length-1):r[r.length-1][this.config.columnKeys.deleted]=!0},selected:function(){if(this.config.tree.use)s.tree.call(this,"selected");else{for(var t=r.length;t--;)r[t][this.config.columnKeys.selected]&&(r[t][this.config.columnKeys.deleted]=!0);t=null}},tree:function(t){var e=this.config.columnKeys,i=this.config.tree.columnKeys;if("selected"===t){for(var n=r.length;n--;)if(r[n][this.config.columnKeys.selected]){r[n][this.config.columnKeys.deleted]=!0;for(var o=r[n][i.selfHash],l=r.length;l--;)r[l][i.selfHash].substr(0,o.length)===o&&(r[l][e.deleted]=!0);o=null,l=null}n=null}else{for(var a=r[t][i.selfHash],s=r.length;s--;)r[s][i.selfHash].substr(0,a.length)!==a&&(r[s][e.deleted]=!0);a=null,s=null}e=null,i=null}};if("undefined"==typeof i&&(i="last"),i in s)s[i].call(this,i);else{if(!e.isNumber(i))throw"invalid argument _dindex";r[i][this.config.columnKeys.deleted]=!0}return this.config.tree.use?(this.list=l.call(this,r),this.proxyList=a.call(this,y.call(this,this.sortInfo,this.list))):(r=this.config.body.grouping?o.call(this,y.call(this,this.sortInfo,r)):Object.keys(this.sortInfo).length?o.call(this,y.call(this,this.sortInfo,r)):o.call(this,r),this.list=r),this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},g=function(t,i){if(!e.isNumber(i))throw"invalid argument _dindex";this.needToPaintSum=!0,this.list.splice(i,1,t),this.config.body.grouping&&(this.list=o.call(this,n.call(this,this.list)))},f=function(e,i,n){var o=x.call(this,e,i);if(this.needToPaintSum=!0,o!==n){if(/[\.\[\]]/.test(i))try{this.list[e][this.config.columnKeys.modified]=!0,Function("val","this"+t.util.getRealPathForDataItem(i)+" = val;").call(this.list[e],n)}catch(t){}else this.list[e][this.config.columnKeys.modified]=!0,this.list[e][i]=n;this.onDataChanged&&this.onDataChanged.call({self:this,list:this.list,dindex:e,item:this.list[e],key:i,value:n})}return!0},x=function(e,i,n){var o=this.list;if(/[\.\[\]]/.test(i))try{n=Function("","return this"+t.util.getRealPathForDataItem(i)+";").call(o[e])}catch(t){}else n=o[e][i];return n},p=function(){this.selectedDataIndexs=[]},m=function(t,e,i){var n=this.config;return!!this.list[t]&&(!this.list[t].__isGrouping&&(!this.list[t][n.columnKeys.disableSelection]&&("undefined"==typeof e?(this.list[t][n.columnKeys.selected]=!this.list[t][n.columnKeys.selected])&&this.selectedDataIndexs.push(t):(this.list[t][n.columnKeys.selected]=e)&&this.selectedDataIndexs.push(t),this.onDataChanged&&i&&i.internalCall&&this.onDataChanged.call({self:this,list:this.list,dindex:t,item:this.list[t],key:n.columnKeys.selected,value:this.list[t][n.columnKeys.selected]}),this.list[t][n.columnKeys.selected])))},v=function(t,e){var i=this.config,n=this.list.length;if("undefined"==typeof t)for(;n--;)this.list[n].__isGrouping||e&&e.filter&&e.filter.call(this.list[n])!==!0||this.list[n][i.columnKeys.disableSelection]||(this.list[n][i.columnKeys.selected]=!this.list[n][i.columnKeys.selected])&&this.selectedDataIndexs.push(n);else for(;n--;)this.list[n].__isGrouping||e&&e.filter&&e.filter.call(this.list[n])!==!0||this.list[n][i.columnKeys.disableSelection]||(this.list[n][i.columnKeys.selected]=t)&&this.selectedDataIndexs.push(n);return this.onDataChanged&&e&&e.internalCall&&this.onDataChanged.call({self:this,list:this.list}),this.list},y=function(i,n){var o=n||this.list,l=[],a=function(e,i,n){if(/[\.\[\]]/.test(i))try{n=Function("","return this"+t.util.getRealPathForDataItem(i)+";").call(e)}catch(t){}else n=e[i];return n};for(var r in i)l[i[r].seq]={key:r,order:i[r].orderBy};l=e.filter(l,function(){return"undefined"!=typeof this});var s=0,d=l.length,c=void 0,h=void 0;return o.sort(function(t,e){for(s=0;s<d;s++){if(c=a(t,l[s].key),h=a(e,l[s].key),("undefined"==typeof c?"undefined":_typeof(c))!==("undefined"==typeof h?"undefined":_typeof(h))&&(c=""+c,h=""+h),c<h)return"asc"===l[s].order?-1:1;if(c>h)return"asc"===l[s].order?1:-1}}),n?o:(this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this)},b=function(e,i){var n=this;if(this.config.tree.use){var o=this.list.concat([].concat(e));this.list=l.call(this,o),this.proxyList=a.call(this,y.call(this,this.sortInfo,this.list)),o=null}else this.list=this.list.concat([].concat(e));if(this.appendProgress=!0,t.page.statusUpdate.call(this),this.appendDebouncer){if(!(n.appendDebounceTimes<this.config.debounceTime/10))return n.appendDebounceTimes=0,w.call(n),i(),!1;clearTimeout(this.appendDebouncer),n.appendDebounceTimes++}this.appendDebouncer=setTimeout(function(){n.appendDebounceTimes=0,w.call(n),i()},this.config.debounceTime)},w=function(){this.appendProgress=!1,this.config.body.grouping?this.list=o.call(this,y.call(this,this.sortInfo,this.list)):this.list=o.call(this,this.list),this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this)},I=function(t,e){var i=this.config.tree.columnKeys,n=void 0,o=void 0;if("undefined"==typeof t)return!1;if(o=this.proxyList[t].__origin_index__,this.list[o][i.children]){this.proxyList=[],"undefined"==typeof e&&(e=!this.list[o][i.collapse]),this.list[o][i.collapse]=e,n=this.list[o][i.selfHash];for(var l=this.list.length;l--;)this.list[l]&&(this.list[l][i.parentHash].substr(0,n.length)===n&&(this.list[l][i.hidden]=e),this.list[l][i.hidden]||this.proxyList.push(this.list[l]));return!0}return!1};t.data={init:i,set:r,get:s,getList:d,getProxyList:a,setValue:f,getValue:x,clearSelect:p,select:m,selectAll:v,add:c,remove:h,deleteRow:u,update:g,sort:y,initData:o,clearGroupingData:n,append:b,toggleCollapse:I}}(),function(){var t=ax5.ui.grid,e=(ax5.util,function(t){return window.btoa(unescape(encodeURIComponent(t)))}),i="data:application/vnd.ms-excel;base64,",n=function(){return"\ufeff\n{{#tables}}{{{body}}}{{/tables}}\n"},o=function(t,o){var l=void 0,a=[].concat(t);l=ax5.mustache.render(n(),{worksheet:function(){var t=[];return a.forEach(function(e,i){t.push({name:"Sheet"+(i+1)})}),t}(),tables:function(){var t=[];return a.forEach(function(e,i){t.push({body:e})}),t}()});var r=navigator.userAgent.indexOf("Chrome")>-1,s=!r&&navigator.userAgent.indexOf("Safari")>-1,d=!!document.documentMode,c=void 0,h=void 0,u=void 0,g=void 0,f=void 0;return navigator.msSaveOrOpenBlob?(c=new Blob([l],{type:"text/html"}),window.navigator.msSaveOrOpenBlob(c,o)):s?(h=window.open("about:blank",this.id+"-excel-export","width=600,height=400"),h.document.write(l),h=null):d&&"undefined"==typeof Blob?(u=jQuery('<iframe id="'+this.id+'-excel-export" style="display:none"></iframe>'),jQuery(document.body).append(u),g=window[this.id+"-excel-export"],g.document.open("text/html","replace"),g.document.write(l),g.document.close(),g.focus(),g.document.execCommand("SaveAs",!0,o),u.remove()):(f=document.body.appendChild(document.createElement("a")),"download"in f&&(f.download=o,f.href=i+e(l),f.click(),document.body.removeChild(f))),!0};t.excel={export:o}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(){return e.number(this.value,{money:!0})};t.formatter={money:i}}(),function(){var t=ax5.ui.grid,e=ax5.util,i={on:function(n,o){var l=this,a=$(n),r=a.offset().left,s=l.$.container.root.offset().left;l.xvar.columnResizerIndex=o;var d={min:-l.colGroup[o]._width+2,max:l.$.container.root.width()-l.colGroup[o]._width};jQuery(document.body).bind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(e){var i=t.util.getMousePosition(e);l.xvar.__da=i.clientX-l.xvar.mousePosition.clientX,d.min>l.xvar.__da?l.xvar.__da=d.min:d.max<l.xvar.__da&&(l.xvar.__da=d.max),l.xvar.columnResizerLived||l.$.resizer.horizontal.addClass("live"),l.xvar.columnResizerLived=!0,l.$.resizer.horizontal.css({left:r+l.xvar.__da-s})}).bind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(t){i.off.call(l),e.stopEvent(t)}).bind("mouseleave.ax5grid-"+this.instanceId,function(t){i.off.call(l),e.stopEvent(t)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){this.$.resizer.horizontal.removeClass("live"),this.xvar.columnResizerLived=!1,"undefined"==typeof this.xvar.__da||this.setColumnWidth(this.colGroup[this.xvar.columnResizerIndex]._width+this.xvar.__da,this.xvar.columnResizerIndex),jQuery(document.body).unbind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},n=function(){var n=this;this.$.container.header.on("click","[data-ax5grid-column-attr]",function(i){var o=this.getAttribute("data-ax5grid-column-key"),l=this.getAttribute("data-ax5grid-column-colindex"),a=n.colGroup[l];if("__checkbox_header__"===o){var r=this.getAttribute("data-ax5grid-selected");r=!!e.isNothing(r)||"true"!==r,$(this).attr("data-ax5grid-selected",r),n.selectAll({selected:r}),r=null}else o&&a&&a.sortable!==!1&&!a.sortFixed&&(a.sortable!==!0&&n.config.sortable!==!0||s.call(n,a.key));t.body.blur.call(n),o=null,l=null,a=null}),this.$.container.header.on("mousedown","[data-ax5grid-column-resizer]",function(o){var l=this.getAttribute("data-ax5grid-column-resizer");n.xvar.mousePosition=t.util.getMousePosition(o),i.on.call(n,this,Number(l)),e.stopEvent(o),l=null}).on("dragstart",function(t){return e.stopEvent(t),!1}),o.call(this)},o=function(){var e=this.config,i=t.util.divideTableByFrozenColumnIndex(this.headerTable,this.xvar.frozenColumnIndex);this.asideHeaderData=function(t){for(var i=[],n={rows:[]},o=0,l=t.rows.length;o<l;o++)if(n.rows[o]={cols:[]},0===o){var a={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},r={};e.showLineNumber&&(r=jQuery.extend({},a,{width:e.lineNumberColumnWidth,_width:e.lineNumberColumnWidth,columnAttr:"lineNumber",key:"__index_header__",label:"&nbsp;"}),i.push(r),n.rows[o].cols.push(r)),e.showRowSelector&&(r=jQuery.extend({},a,{width:e.rowSelectorColumnWidth,_width:e.rowSelectorColumnWidth,columnAttr:"rowSelector",key:"__checkbox_header__",label:""}),i.push(r),n.rows[o].cols.push(r)),a=null}return this.asideColGroup=i,n}.call(this,this.headerTable),this.leftHeaderData=i.leftData,this.headerData=i.rightData},l=function(t){return"__checkbox_header__"===t.key?'<div class="checkBox" style="max-height: '+(t.width-10)+"px;min-height: "+(t.width-10)+'px;"></div>':t.label||"&nbsp;"},a=function(t){var i=this.config,n=this.colGroup;t&&(o.call(this),this.xvar.paintStartRowIndex=void 0);var a=this.asideHeaderData,r=this.leftHeaderData,s=this.headerData,d=i.header.align;this.leftHeaderColGroup=n.slice(0,this.config.frozenColumnIndex),this.headerColGroup=n.slice(this.config.frozenColumnIndex);var c=function(t,o,a){var r=0,s=[];s.push('<table border="0" cellpadding="0" cellspacing="0">'),s.push("<colgroup>");for(var c=0,h=o.length;c<h;c++)s.push('<col style="width:'+o[c]._width+'px;"  />'),r+=o[c]._width;s.push("<col  />"),s.push("</colgroup>");for(var u=0,g=a.rows.length;u<g;u++){var f="";s.push('<tr class="'+f+'">');for(var x=0,p=a.rows[u].cols.length;x<p;x++){var m=a.rows[u].cols[x],v=i.header.columnHeight*m.rowspan-i.header.columnBorderWidth,y=d||m.align;s.push("<td ",'data-ax5grid-column-attr="'+(m.columnAttr||"default")+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+x+'" ',function(){return"undefined"!=typeof m.key?'data-ax5grid-column-key="'+m.key+'" ':""}(),'data-ax5grid-column-colindex="'+m.colIndex+'" ','data-ax5grid-column-rowindex="'+m.rowIndex+'" ','colspan="'+m.colspan+'" ','rowspan="'+m.rowspan+'" ','class="'+function(t){var n="";return t.styleClass&&(n+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key})+" ":t.styleClass+" "),i.header.columnBorderWidth&&(n+="hasBorder "),x==p-1&&(n+="isLastColumn "),n}.call(this,m)+'" ','style="height: '+v+'px;min-height: 1px;">'),s.push(function(){var t=i.header.columnHeight-2*i.header.columnPadding-i.header.columnBorderWidth;return'<span data-ax5grid-cellHolder="" '+(y?'data-ax5grid-text-align="'+y+'"':"")+' style="height: '+(i.header.columnHeight-i.header.columnBorderWidth)+"px;line-height: "+t+'px;">'}(),function(){var t="";return e.isNothing(m.key)||e.isNothing(m.colIndex)||i.sortable!==!0&&m.sortable!==!0||m.sortable===!1||(t+='<span data-ax5grid-column-sort="'+m.colIndex+'" data-ax5grid-column-sort-order="'+(n[m.colIndex].sort||"")+'" />'),t}(),l.call(this,m),"</span>"),e.isNothing(m.colIndex)||i.enableFilter&&s.push('<span data-ax5grid-column-filter="'+m.colIndex+'" data-ax5grid-column-filter-value=""  />'),s.push("</td>")}s.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','style="height: '+i.header.columnHeight+'px;min-height: 1px;" ',"></td>"),s.push("</tr>")}return s.push("</table>"),t.html(s.join("")),function(){for(var n=i.header.columnHeight*a.rows.length-i.header.columnBorderWidth,l=0,r=[],s=0,d=o.length;s<d;s++){var c=o[s];e.isNothing(c.colIndex)||(l+=c._width,r.push('<div data-ax5grid-column-resizer="'+c.colIndex+'" style="height:'+n+"px;left: "+(l-4)+'px;"  />'))}t.append(r)}.call(this),r};i.asidePanelWidth>0&&c.call(this,this.$.panel["aside-header"],this.asideColGroup,a),i.frozenColumnIndex>0&&c.call(this,this.$.panel["left-header"],this.leftHeaderColGroup,r),this.xvar.scrollContentWidth=c.call(this,this.$.panel["header-scroll"],this.headerColGroup,s),i.rightSum},r=function(t){return this.$.panel["header-scroll"].css(t),this},s=function(t){var e="",i={},n=0;for(var o in this.sortInfo)this.sortInfo[o].fixed&&(i[o]=this.sortInfo[o],n++);for(var l=0,a=this.colGroup.length;l<a;l++)this.colGroup[l].key==t?(""==e&&(e="undefined"==typeof this.colGroup[l].sort?"desc":"desc"===this.colGroup[l].sort?"asc":void 0),this.colGroup[l].sort=e):this.config.multiSort||(this.colGroup[l].sort=void 0),"undefined"!=typeof this.colGroup[l].sort&&(i[this.colGroup[l].key]||(i[this.colGroup[l].key]={seq:n++,orderBy:this.colGroup[l].sort}));return this.setColumnSort(i),this},d=function(t){for(var e=0,i=this.colGroup.length;e<i;e++)for(var n in t)this.colGroup[e].key==n&&(this.colGroup[e].sort=t[n].orderBy);return this},c=function(){var t=(this.config,this.colGroup),e=this.headerTable,i=function(t,e){for(var i=[],n=0,o=e.rows.length;n<o;n++){i.push("<tr>");for(var a=0,r=e.rows[n].cols.length;a<r;a++){var s=e.rows[n].cols[a];i.push("<td ",'colspan="'+s.colspan+'" ','rowspan="'+s.rowspan+'" ',">",l.call(this,s),"</td>")}i.push("</tr>")}return i.join("")};return i.call(this,t,e)};t.header={init:n,repaint:a,scrollTo:r,toggleSort:s,applySortStatus:d,getExcelString:c}}(),function(){var t=ax5.ui.grid,e={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){return'<input type="text" data-ax5grid-editor="text" value="'+n+'" >'},init:function(e,i,n,o,l){var a;return o.append(a=jQuery(this.getHtml(e,i,n,l))),this.bindUI(e,i,a,n,o,l),a.on("blur",function(){t.body.inlineEdit.deActive.call(e,"RETURN",i)}),a},bindUI:function(t,e,i,n,o,l){i.focus().select()}},i={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){return'<input type="text" data-ax5grid-editor="money" value="'+n+'" >'},init:function(e,i,n,o,l){var a;return o.append(a=jQuery(this.getHtml(e,i,n,l))),this.bindUI(e,i,a,n,o,l),a.on("blur",function(){t.body.inlineEdit.deActive.call(e,"RETURN",i)}),a},bindUI:function(t,e,i,n,o,l){i.data("binded-ax5ui","ax5formater"),i.ax5formatter({pattern:"money"}),i.focus().select()}},n={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){return'<input type="text" data-ax5grid-editor="number" value="'+n+'" >'},init:function(e,i,n,o,l){var a;return o.append(a=jQuery(this.getHtml(e,i,n,l))),this.bindUI(e,i,a,n,o,l),a.on("blur",function(){t.body.inlineEdit.deActive.call(e,"RETURN",i)}),a},bindUI:function(t,e,i,n,o,l){i.data("binded-ax5ui","ax5formater"),i.ax5formatter({pattern:"number"}),i.focus().select()}},o={useReturnToSave:!0,editMode:"popup",getHtml:function(t,e,i,n){return'<input type="text" data-ax5grid-editor="calendar" value="'+n+'" >'},init:function(t,e,i,n,o){var l;return n.append(l=jQuery(this.getHtml(t,e,i,o))),this.bindUI(t,e,l,i,n,o),l},bindUI:function(e,i,n,o,l,a){var r=e;n.data("binded-ax5ui","ax5picker"),n.ax5picker({direction:"auto",content:{type:"date",formatter:{pattern:"date"}},onStateChanged:function(){
"open"==this.state?this.self.activePicker.attr("data-ax5grid-inline-edit-picker","date"):"close"==this.state&&t.body.inlineEdit.deActive.call(r,"RETURN",i)}}),n.focus().select()}},l={useReturnToSave:!1,editMode:"popup",getHtml:function(t,e,i,n){var o=[];return o.push('<div data-ax5select="ax5grid-editor" data-ax5select-config="{}">'),o.push("</div>"),o.join("")},init:function(t,e,i,n,o){var l;return n.append(l=jQuery(this.getHtml(t,e,i,o))),this.bindUI(t,e,l,i,n,o),l},bindUI:function(e,i,n,o,l,a){var r={columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}};jQuery.extend(!0,r,o.config),r.options.forEach(function(t){t[r.columnKeys.optionValue]==a&&(t[r.columnKeys.optionSelected]=!0)});var s=e;n.data("binded-ax5ui","ax5select"),n.ax5select({direction:"auto",columnKeys:r.columnKeys,options:r.options,onStateChanged:function(){"open"==this.state?this.self.activeSelectOptionGroup.attr("data-ax5grid-inline-edit-picker","select"):"changeValue"==this.state?t.body.inlineEdit.deActive.call(s,"RETURN",i,this.value[0][r.columnKeys.optionValue]):"close"==this.state&&t.body.inlineEdit.deActive.call(s,"ESC",i)}}),n.ax5select("open"),n.ax5select("setValue",a),n.find("a").focus()}},a={editMode:"inline",getHtml:function(t,e,i){var n,o=t.config.body.columnHeight-2*t.config.body.columnPadding-t.config.body.columnBorderWidth;n=e.config&&e.config.trueValue?i==e.config.trueValue?"true":"false":0==i||"false"==i||i<"1"?"false":"true";var l={marginTop:2,height:o-4};return jQuery.extend(!0,l,e.config),l.marginTop=(o-l.height)/2,'<div data-ax5grid-editor="checkbox" data-ax5grid-checked="'+n+'" style="height:'+l.height+"px;width:"+l.height+"px;margin-top:"+l.marginTop+'px;"></div>'}};t.inlineEditor={text:e,money:i,number:n,date:o,select:l,checkbox:a}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(t){var e=function(t){this.page.currentPage!=t&&(this.page.selectPage=t,this.config.page.onChange&&this.config.page.onChange.call({self:this,page:this.page,data:this.data}))},i={first:function(){e.call(this,0)},prev:function(){var t=this.page.currentPage-1;t<0&&(t=0),e.call(this,t)},next:function(){var t=this.page.currentPage+1;t>this.page.totalPages-1&&(t=this.page.totalPages-1),e.call(this,t)},last:function(){e.call(this,this.page.totalPages-1)}};t in i?i[t].call(this):e.call(this,t-1)},n=function(){var e=this;if(this.page){var n={hasPage:!1,currentPage:this.page.currentPage,pageSize:this.page.pageSize,totalElements:this.page.totalElements,totalPages:this.page.totalPages,firstIcon:this.config.page.firstIcon,prevIcon:this.config.page.prevIcon||"«",nextIcon:this.config.page.nextIcon||"»",lastIcon:this.config.page.lastIcon},o=this.config.page.navigationItemCount;n["@paging"]=function(){var t=[],e=n.currentPage-Math.floor(o/2);e<0&&(e=0);var i=n.currentPage+o;i>n.totalPages&&(i=n.totalPages),i-e>o&&(i=e+o),i-e<o&&(e=i-o),e<0&&(e=0);for(var l=e,a=i;l<a;l++)t.push({pageNo:l+1,selected:n.currentPage==l});return t}(),n["@paging"].length>0&&(n.hasPage=!0),this.$.page.navigation.html(t.tmpl.get("page_navigation",n)),this.$.page.navigation.find("[data-ax5grid-page-move]").on("click",function(){var t=this.getAttribute("data-ax5grid-page-move");i.call(e,t)})}else this.$.page.navigation.empty()},o=function(){var i=this.xvar.paintStartRowIndex,n=this.xvar.paintStartRowIndex+this.xvar.paintRowCount-1,o=this.xvar.dataRowCount;n>o&&(n=o),this.$.page.status.html(t.tmpl.get("page_status",{fromRowIndex:e.number(i+1,{money:!0}),toRowIndex:e.number(n,{money:!0}),totalElements:e.number(o,{money:!0}),dataRowCount:o!==this.xvar.dataRealRowCount&&e.number(this.xvar.dataRealRowCount,{money:!0}),progress:this.appendProgress?this.config.appendProgressIcon:""}))};t.page={navigationUpdate:n,statusUpdate:o}}(),function(){var t=ax5.ui.grid,e=ax5.util,i={vertical:function(t,e){var i=e._content_height-e._panel_height,n=e._vertical_scroller_height-e.verticalScrollBarHeight,o=i*t.top/n;return o<0?o=0:i<o&&(o=i),{top:-o}},horizontal:function(t,e){var i=e._content_width-e._panel_width,n=e._horizontal_scroller_width-e.horizontalScrollBarWidth,o=i*t.left/n;return o<0?o=0:i<o&&(o=i),{left:-o}}},n={vertical:function(e,n){var o="vertical",l=n._content_height-n._panel_height,a=n._vertical_scroller_height-n.verticalScrollBarHeight,r=a*e/l,s=void 0;return-r>a&&(r=-a,s=i[o].call(this,{top:-r},{_content_width:n._content_width,_content_height:n._content_height,_panel_width:n._panel_width,_panel_height:n._panel_height,_horizontal_scroller_width:n._horizontal_scroller_width,_vertical_scroller_height:n._vertical_scroller_height,verticalScrollBarHeight:n.verticalScrollBarHeight,horizontalScrollBarWidth:n.horizontalScrollBarWidth}),t.body.scrollTo.call(this,s)),-r},horizontal:function(e,n){var o="horizontal",l=n._content_width-n._panel_width,a=n._horizontal_scroller_width-n.horizontalScrollBarWidth,r=a*e/l,s=void 0;return-r>a&&(r=-a,s=i[o].call(this,{left:-r},{_content_width:n._content_width,_content_height:n._content_height,_panel_width:n._panel_width,_panel_height:n._panel_height,_horizontal_scroller_width:n._horizontal_scroller_width,_vertical_scroller_height:n._vertical_scroller_height,verticalScrollBarHeight:n.verticalScrollBarHeight,horizontalScrollBarWidth:n.horizontalScrollBarWidth}),t.header.scrollTo.call(this,s),t.body.scrollTo.call(this,s)),-r}},o={click:function(e,n,o,l){if((new Date).getTime()-t.scroller.moveout_timer<20)return!1;var a=this,r=e.offset(),s={width:n.outerWidth(),height:n.outerHeight()},d={width:e.innerWidth(),height:e.innerHeight()},c=a.$.scroller.vertical.innerHeight(),h=a.$.panel.body.height(),u=a.$.scroller.horizontal.innerWidth(),g=a.$.panel.body.width(),f=a.xvar.scrollContentHeight,x=a.xvar.scrollContentWidth,p=a.$.scroller["vertical-bar"].outerHeight(),m=a.$.scroller["horizontal-bar"].outerWidth(),v={vertical:function(e){var i=t.util.getMousePosition(e),n=i.clientY-r.top;return n<0?n=0:n+s.height>d.height&&(n=d.height-s.height),{top:n}},horizontal:function(e){var i=t.util.getMousePosition(e),n=i.clientX-r.left;return n<0?n=0:n+s.width>d.width&&(n=d.width-s.width),{left:n}}},y=v[o](l);n.css(y);var b=i[o].call(a,y,{_content_width:x,_content_height:f,_panel_width:g,_panel_height:h,_horizontal_scroller_width:u,_vertical_scroller_height:c,verticalScrollBarHeight:p,horizontalScrollBarWidth:m});"horizontal"===o&&t.header.scrollTo.call(a,b),t.body.scrollTo.call(a,b),b=null},on:function(e,n,l,a){var r=this,s=n.position(),d={width:n.outerWidth(),height:n.outerHeight()},c={width:e.innerWidth(),height:e.innerHeight()},h=r.$.scroller.vertical.innerHeight(),u=r.$.panel.body.height(),g=r.$.scroller.horizontal.innerWidth(),f=r.$.panel.body.width(),x=r.xvar.scrollContentHeight,p=r.xvar.scrollContentWidth,m=r.$.scroller["vertical-bar"].outerHeight(),v=r.$.scroller["horizontal-bar"].outerWidth(),y={vertical:function(e){var i=t.util.getMousePosition(e);r.xvar.__da=i.clientY-r.xvar.mousePosition.clientY;var n=s.top+r.xvar.__da;return n<0?n=0:n+d.height>c.height&&(n=c.height-d.height),{top:n}},horizontal:function(e){var i=t.util.getMousePosition(e);r.xvar.__da=i.clientX-r.xvar.mousePosition.clientX;var n=s.left+r.xvar.__da;return n<0?n=0:n+d.width>c.width&&(n=c.width-d.width),{left:n}}};r.xvar.__da=0,jQuery(document.body).bind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(e){var o=y[l](e);n.css(o);var a=i[l].call(r,o,{_content_width:p,_content_height:x,_panel_width:f,_panel_height:u,_horizontal_scroller_width:g,_vertical_scroller_height:h,verticalScrollBarHeight:m,horizontalScrollBarWidth:v});"horizontal"===l&&t.header.scrollTo.call(r,a),t.body.scrollTo.call(r,a)}).bind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(t){o.off.call(r)}).bind("mouseleave.ax5grid-"+this.instanceId,function(t){o.off.call(r)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){t.scroller.moveout_timer=(new Date).getTime(),jQuery(document.body).unbind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},l={wheel:function(e){var i=this,n=i.$.panel["body-scroll"].position(),o=i.$.panel.body.height(),l=i.$.panel.body.width(),a=i.xvar.scrollContentHeight,s=i.xvar.scrollContentWidth;if(isNaN(a)||isNaN(s))return!1;var d=void 0,c=void 0,h=!1,u=!1;return d=n.left-e.x,c=n.top-e.y,c>=0?(c=0,h=!0):c<=o-a?(c=o-a,c>=0&&(c=0),h=!0):0==e.y&&(h=!0),d>=0?(d=0,u=!0):d<=l-s?(d=l-s,d>=0&&(d=0),u=!0):0==e.x&&(u=!0),t.header.scrollTo.call(this,{left:d}),t.body.scrollTo.call(this,{left:d,top:c}),r.call(this),!h||!u},on:function(){var i=this,n=i.$.panel["body-scroll"].position(),o=i.$.panel.body.height(),a=i.$.panel.body.width(),s=i.xvar.scrollContentHeight,d=i.xvar.scrollContentWidth,c=function(e){var l=t.util.getMousePosition(e),r=void 0,c=void 0;return i.xvar.__x_da=l.clientX-i.xvar.mousePosition.clientX,i.xvar.__y_da=l.clientY-i.xvar.mousePosition.clientY,r=n.left+i.xvar.__x_da,c=n.top+i.xvar.__y_da,c>=0?c=0:c<=o-s&&(c=o-s,c>=0&&(c=0)),r>=0?r=0:r<=a-d&&(r=a-d,r>=0&&(r=0)),{left:r,top:c}};this.xvar.__x_da=0,this.xvar.__y_da=0,this.xvar.touchmoved=!1,jQuery(document.body).on("touchmove.ax5grid-"+this.instanceId,function(n){var o=c(n);t.header.scrollTo.call(i,{left:o.left}),t.body.scrollTo.call(i,o,"noRepaint"),r.call(i),e.stopEvent(n.originalEvent),i.xvar.touchmoved=!0}).on("touchend.ax5grid-"+this.instanceId,function(n){if(i.xvar.touchmoved){var o=c(n);t.header.scrollTo.call(i,{left:o.left}),t.body.scrollTo.call(i,o),r.call(i),e.stopEvent(n.originalEvent),l.off.call(i)}}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){jQuery(document.body).off("touchmove.ax5grid-"+this.instanceId).off("touchend.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},a=function(){var i=this,n=this.config.scroller.trackPadding;0==n?(this.$.scroller["vertical-bar"].css({width:this.config.scroller.size,left:-1}),this.$.scroller["horizontal-bar"].css({height:this.config.scroller.size,top:-1})):(this.$.scroller["vertical-bar"].css({width:this.config.scroller.size-(n+1),left:n/2}),this.$.scroller["horizontal-bar"].css({height:this.config.scroller.size-(n+1),top:n/2})),this.$.scroller["vertical-bar"].on(t.util.ENM.mousedown,function(e){this.xvar.mousePosition=t.util.getMousePosition(e),o.on.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical",e)}.bind(this)).on("dragstart",function(t){return e.stopEvent(t),!1}),this.$.scroller.vertical.on("click",function(t){"vertical"==t.target.getAttribute("data-ax5grid-scroller")&&o.click.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical",t)}.bind(this)),this.$.scroller["horizontal-bar"].on(t.util.ENM.mousedown,function(e){this.xvar.mousePosition=t.util.getMousePosition(e),o.on.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal",e)}.bind(this)).on("dragstart",function(t){return e.stopEvent(t),!1}),this.$.scroller.horizontal.on("click",function(t){"horizontal"==t.target.getAttribute("data-ax5grid-scroller")&&o.click.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal",t)}.bind(this)),this.$.container.body.on("mousewheel DOMMouseScroll",function(t){var i=t.originalEvent,n={x:0,y:0};i.detail?n.y=10*i.detail:"undefined"==typeof i.deltaY?(n.y=-i.wheelDelta,n.x=0):(n.y=i.deltaY,n.x=i.deltaX),l.wheel.call(this,n)&&e.stopEvent(t)}.bind(this)),ax5.info.supportTouch&&this.$.container.body.on("touchstart","[data-ax5grid-panel]",function(e){i.xvar.mousePosition=t.util.getMousePosition(e),l.on.call(i)})},r=function(){var t=this.$.scroller.vertical.height(),e=this.$.scroller.horizontal.width(),i=this.$.panel.body.height(),o=this.$.panel.body.width(),l=this.xvar.scrollContentHeight,a=this.xvar.scrollContentWidth,r=i*t/l,s=o*e/a;r<this.config.scroller.barMinSize&&(r=this.config.scroller.barMinSize),s<this.config.scroller.barMinSize&&(s=this.config.scroller.barMinSize),this.$.scroller["vertical-bar"].css({top:n.vertical.call(this,this.$.panel["body-scroll"].position().top,{_content_width:a,_content_height:l,_panel_width:o,_panel_height:i,_horizontal_scroller_width:e,_vertical_scroller_height:t,verticalScrollBarHeight:r,horizontalScrollBarWidth:s}),height:r}),this.$.scroller["horizontal-bar"].css({left:n.horizontal.call(this,this.$.panel["body-scroll"].position().left,{_content_width:a,_content_height:l,_panel_width:o,_panel_height:i,_horizontal_scroller_width:e,_vertical_scroller_height:t,verticalScrollBarHeight:r,horizontalScrollBarWidth:s}),width:s}),t=null,e=null,i=null,o=null,l=null,a=null,r=null,s=null};t.scroller={moveout_timer:(new Date).getTime(),init:a,resize:r}}(),function(){var t=ax5.ui.grid,e=function(){return'<div data-ax5grid-container="root" data-ax5grid-instance="{{instanceId}}">\n            <div data-ax5grid-container="hidden">\n                <textarea data-ax5grid-form="clipboard"></textarea>\n            </div>\n            <div data-ax5grid-container="header">\n                <div data-ax5grid-panel="aside-header"></div>\n                <div data-ax5grid-panel="left-header"></div>\n                <div data-ax5grid-panel="header">\n                    <div data-ax5grid-panel-scroll="header"></div>\n                </div>\n                <div data-ax5grid-panel="right-header"></div>\n            </div>\n            <div data-ax5grid-container="body">\n                <div data-ax5grid-panel="top-aside-body"></div>\n                <div data-ax5grid-panel="top-left-body"></div>\n                <div data-ax5grid-panel="top-body">\n                    <div data-ax5grid-panel-scroll="top-body"></div>\n                </div>\n                <div data-ax5grid-panel="top-right-body"></div>\n                <div data-ax5grid-panel="aside-body">\n                    <div data-ax5grid-panel-scroll="aside-body"></div>\n                </div>\n                <div data-ax5grid-panel="left-body">\n                    <div data-ax5grid-panel-scroll="left-body"></div>\n                </div>\n                <div data-ax5grid-panel="body">\n                    <div data-ax5grid-panel-scroll="body"></div>\n                </div>\n                <div data-ax5grid-panel="right-body">\n                  <div data-ax5grid-panel-scroll="right-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-aside-body"></div>\n                <div data-ax5grid-panel="bottom-left-body"></div>\n                <div data-ax5grid-panel="bottom-body">\n                    <div data-ax5grid-panel-scroll="bottom-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-right-body"></div>\n            </div>\n            <div data-ax5grid-container="page">\n                <div data-ax5grid-page="holder">\n                    <div data-ax5grid-page="navigation"></div>\n                    <div data-ax5grid-page="status"></div>\n                </div>\n            </div>\n            <div data-ax5grid-container="scroller">\n                <div data-ax5grid-scroller="vertical">\n                    <div data-ax5grid-scroller="vertical-bar"></div>    \n                </div>\n                <div data-ax5grid-scroller="horizontal">\n                    <div data-ax5grid-scroller="horizontal-bar"></div>\n                </div>\n                <div data-ax5grid-scroller="corner"></div>\n            </div>\n            <div data-ax5grid-resizer="vertical"></div>\n            <div data-ax5grid-resizer="horizontal"></div>\n        </div>'},i=function(){return'<div data-ax5grid-page-navigation="holder">\n            {{#hasPage}}\n            <div data-ax5grid-page-navigation="cell">    \n                {{#firstIcon}}<button type="button" data-ax5grid-page-move="first">{{{firstIcon}}}</button>{{/firstIcon}}\n                <button type="button" data-ax5grid-page-move="prev">{{{prevIcon}}}</button>\n            </div>\n            <div data-ax5grid-page-navigation="cell-paging">\n                {{#@paging}}\n                <button type="button" data-ax5grid-page-move="{{pageNo}}" data-ax5grid-page-selected="{{selected}}">{{pageNo}}</button>\n                {{/@paging}}\n            </div>\n            <div data-ax5grid-page-navigation="cell">\n                <button type="button" data-ax5grid-page-move="next">{{{nextIcon}}}</button>\n                {{#lastIcon}}<button type="button" data-ax5grid-page-move="last">{{{lastIcon}}}</button>{{/lastIcon}}\n            </div>\n            {{/hasPage}}\n        </div>'},n=function(){return"<span>{{{progress}}} {{fromRowIndex}} - {{toRowIndex}} of {{totalElements}}{{#dataRowCount}} ({{dataRowCount}}){{/dataRowCount}}</span>"};t.tmpl={main:e,page_navigation:i,page_status:n,get:function(e,i,n){return ax5.mustache.render(t.tmpl[e].call(this,n),i)}}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(t,e){for(var i={rows:[]},n={rows:[]},o=0,l=t.rows.length;o<l;o++){var a=t.rows[o];i.rows[o]={cols:[]},n.rows[o]={cols:[]};for(var r=0,s=a.cols.length;r<s;r++){var d=jQuery.extend({},a.cols[r]),c=d.colIndex,h=d.colIndex+d.colspan;if(c<e)if(h<=e)i.rows[o].cols.push(d);else{var u=jQuery.extend({},d),g=jQuery.extend({},u);u.colspan=e-u.colIndex,g.colIndex=e,g.colspan=d.colspan-u.colspan,i.rows[o].cols.push(u),g.colspan&&n.rows[o].cols.push(g)}else n.rows[o].cols.push(d);d=null,c=null,h=null}a=null}return{leftData:i,rightData:n}},n=function(t,e,i){for(var n={rows:[]},o=0,l=t.rows.length;o<l;o++){var a=t.rows[o];n.rows[o]={cols:[]};for(var r=0,s=a.cols.length;r<s;r++){var d=jQuery.extend({},a.cols[r]),c=d.colIndex,h=d.colIndex+d.colspan;(e<=c||h<=i)&&(e<=c&&h<=i?n.rows[o].cols.push(d):e>c&&h>e?(d.colspan=h-e,n.rows[o].cols.push(d)):h>i&&c<=i&&n.rows[o].cols.push(d))}}return n},o=function(t){var e=void 0,i=t.originalEvent?t.originalEvent:t;return e="changedTouches"in i&&i.changedTouches?i.changedTouches[0]:i,{clientX:e.pageX,clientY:e.pageY}},l={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},a=function(t){var i=e.deepCopy(t),n=this.config,o={rows:[]},l=0,a=function t(e,i,a){for(var r={cols:[]},s=0,d=e.length;s<d;s++){var c=e[s],h=1;c.hidden||(c.colspan=1,c.rowspan=1,c.rowIndex=i,c.colIndex=function(){return a?(l=a.colIndex+s+1,a.colIndex+s):l++}(),r.cols.push(c),"columns"in c?h=t(c.columns,i+1,c):c.width="width"in c?c.width:n.columnMinWidth,c.colspan=h)}return r.cols.length>0?(o.rows[i]||(o.rows[i]={cols:[]}),o.rows[i].cols=o.rows[i].cols.concat(r.cols),r.cols.length-1+h):h};a(i,0);for(var r=0,s=o.rows.length;r<s;r++)for(var d=0,c=o.rows[r].cols.length;d<c;d++)"columns"in o.rows[r].cols[d]||(o.rows[r].cols[d].rowspan=s-r);return o},r=function(t){var i=e.deepCopy(t),n={rows:[]},o=0,l=function t(e,i,l){for(var a={cols:[]},r=0,s=e.length,d=1,c=(function e(n){for(var r=0,s=n.length;r<s;r++){var d=n[r],c=1;d.hidden||("key"in d?(d.colspan=1,d.rowspan=1,d.rowIndex=i,d.colIndex=function(){return l?(o=l.colIndex+r+1,l.colIndex+r):o++}(),a.cols.push(d),"columns"in d&&(c=t(d.columns,i+1,d)),d.colspan=c):"columns"in d&&e(d.columns,i))}});r<s;r++){var h=e[r];d=1,h.hidden||("key"in h?(h.colspan=1,h.rowspan=1,h.rowIndex=i,h.colIndex=function(){return l?(o=l.colIndex+r+1,l.colIndex+r):o++}(),a.cols.push(h),"columns"in h&&(d=t(h.columns,i+1,h)),h.colspan=d):"columns"in h&&c(h.columns,i)),h=null}return a.cols.length>0?(n.rows[i]||(n.rows[i]={cols:[]}),n.rows[i].cols=n.rows[i].cols.concat(a.cols),a.cols.length-1+d):d};return l(i,0),function(t){for(var e=0,i=t.rows.length;e<i;e++){for(var n=t.rows[e],o=0,l=n.cols.length;o<l;o++){var a=n.cols[o];"columns"in a||(a.rowspan=i-e),a=null}n=null}}(n),n},s=function(t){var e={};return t.rows.forEach(function(t){t.cols.forEach(function(t){e[t.rowIndex+"_"+t.colIndex]=jQuery.extend({},t)})}),e},d=function(t){for(var e={rows:[]},i=0,n=t.length;i<n;i++){var o=t[i],l=0;e.rows[i]={cols:[]};for(var a=0,r=o.length;a<r&&!(l>this.colGroup.length);a++){var s=o[a].colspan||1;o[a].label||o[a].key?e.rows[i].cols.push({colspan:s,rowspan:1,colIndex:l,columnAttr:"sum",align:o[a].align,label:o[a].label,key:o[a].key,collector:o[a].collector,formatter:o[a].formatter}):e.rows[i].cols.push({colIndex:l,colspan:s,rowspan:1,label:"&nbsp;"}),l+=s,s=null}if(l<this.colGroup.length)for(var d=l;d<this.colGroup.length;d++)e.rows[i].cols.push({colIndex:d,colspan:1,rowspan:1,label:"&nbsp;"});o=null,l=null}return e},c=function(t){var e={rows:[]},i=0,n=0;e.rows[i]={cols:[]};for(var o=0,l=t.length;o<l&&!(n>this.columns.length);o++){var a=t[o].colspan||1;t[o].label||t[o].key?e.rows[i].cols.push({colspan:a,rowspan:1,rowIndex:0,colIndex:n,columnAttr:"default",align:t[o].align,label:t[o].label,key:t[o].key,collector:t[o].collector,formatter:t[o].formatter}):e.rows[i].cols.push({rowIndex:0,colIndex:n,colspan:a,rowspan:1,label:"&nbsp;"}),n+=a}if(n<this.colGroup.length)for(var r=n;r<this.colGroup.length;r++)e.rows[i].cols.push({rowIndex:0,colIndex:r,colspan:1,rowspan:1,label:"&nbsp;"});return e},h=function(t,e,i){var n=void 0,o=!1,l=[];return this.xvar.frozenRowIndex>t&&l.push("top"),this.xvar.frozenColumnIndex>e&&l.push("left"),l.push("body"),(this.xvar.frozenColumnIndex<=e||this.xvar.frozenRowIndex<=t)&&(n=l.join("-"),l.push("scroll"),o=!0),{panelName:l.join("-"),containerPanelName:n,isScrollPanel:o}},u=function(t){var e=[],i=[].concat(t.split(/[\.\[\]]/g));return i.forEach(function(t){""!==t&&e.push('["'+t.replace(/['\"]/g,"")+'"]')}),i=null,e.join("")};t.util={divideTableByFrozenColumnIndex:i,getTableByStartEndColumnIndex:n,getMousePosition:o,ENM:l,makeHeaderTable:a,makeBodyRowTable:r,makeBodyRowMap:s,makeFootSumTable:d,makeBodyGroupingTable:c,findPanelByColumnIndex:h,getRealPathForDataItem:u}}();
//# sourceMappingURL=ax5grid.min.js.map
