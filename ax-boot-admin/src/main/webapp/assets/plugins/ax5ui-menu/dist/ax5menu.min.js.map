{"version":3,"sources":["ax5menu.min.js","ax5menu.js","ax5menu-tmpl.js"],"names":["MENU","UI","ax5","ui","U","util","addClass","className","version","ax5menu","self","this","cfg","instanceId","getGuid","config","theme","iconWidth","acceleratorWidth","menuBodyPadding","offset","left","top","position","animateTime","items","itemClickAndClose","columnKeys","label","openTimer","closeTimer","queue","menuBar","state","undefined","appEventAttach","active","jQuery","document","unbind","menuId","bind","clickItem","window","e","which","info","eventKeys","ESC","close","onStateChanged","opts","that","call","onLoad","popup","opt","depth","path","data","activeMenu","removed","icons","extend","forEach","n","html","divide","item","length","tmpl","get","body","append","splice","$target","remove","push","find","getAttribute","index","$this","scrollTop","childOpt","_items","_activeMenu","removeClass","attr","@parent","width","outerWidth","height","outerHeight","Number","direction","parent","Function","substring","replace","align","element","target","findParentNode","console","log","getError","check","setValue","checkbox","value","checked","radio","name","type","each","onClick","$window","$document","wh","ww","h","w","l","t","css","init","getOption","event","clientX","clientY","pageY","object","updateTheme","concat","filteringItem","filter","arr","popupEventAttachTimer","clearTimeout","setTimeout","attach","popUpChildMenu","eType","openedIndex","opened","clickParentMenu","el","getCheckValue","checkItems","collectItem","i","isString","main","menu_instance","arguments","isObject","setConfig","apply","menu","tmplMenubar","tmplName","mustache","render"],"mappings":"AAAA,cCCA,WACA,GAEAA,GAFAC,EAAAC,IAAAC,GACAC,EAAAF,IAAAG,IAGAJ,GAAAK,UACAC,UAAA,OACAC,QAAA,cACA,WA4HA,GAAAC,GAAA,WACA,GAAAC,GAAAC,KACAC,EAAAA,MAEAD,MAAAE,WAAAX,IAAAY,UACAH,KAAAI,QACAC,MAAA,UACAC,UAAA,GACAC,iBAAA,IACAC,gBAAA,EAEAC,QAAAC,KAAA,EAAAC,IAAA,GACAC,SAAA,QACAC,YAAA,IACAC,SACAC,mBAAA,EACAC,YACAC,MAAA,QACAH,MAAA,UAIAd,KAAAkB,UAAA,KACAlB,KAAAmB,WAAA,KACAnB,KAAAoB,SACApB,KAAAqB,WACArB,KAAAsB,MAAAC,OAEAtB,EAAAD,KAAAI,MAEA,IAAAoB,GAAA,SAAAC,GACAA,GACAC,OAAAC,UAAAC,OAAA,iBAAA5B,KAAA6B,QAAAC,KAAA,iBAAA9B,KAAA6B,OAAAE,EAAAD,KAAA9B,OACA0B,OAAAM,QAAAJ,OAAA,mBAAA5B,KAAA6B,QAAAC,KAAA,mBAAA9B,KAAA6B,OAAA,SAAAI,GACAA,EAAAC,OAAA3C,IAAA4C,KAAAC,UAAAC,KACAtC,EAAAuC,UAGAZ,OAAAM,QAAAJ,OAAA,kBAAA5B,KAAA6B,QAAAC,KAAA,kBAAA9B,KAAA6B,OAAA,SAAAI,GACAlC,EAAAuC,YAIAZ,OAAAC,UAAAC,OAAA,iBAAA5B,KAAA6B,QACAH,OAAAM,QAAAJ,OAAA,mBAAA5B,KAAA6B,QACAH,OAAAM,QAAAJ,OAAA,kBAAA5B,KAAA6B,UAGAU,EAAA,SAAAC,EAAAC,GAWA,MAVAD,IAAAA,EAAAD,eACAC,EAAAD,eAAAG,KAAAD,EAAAA,GAEAzC,KAAAuC,gBACAvC,KAAAuC,eAAAG,KAAAD,EAAAA,GAGA1C,EAAAuB,MAAAmB,EAAAnB,MACAkB,EAAA,KACAC,EAAA,MACA,GAEAE,EAAA,SAAAF,GAMA,MALAzC,MAAA2C,QACA3C,KAAA2C,OAAAD,KAAAD,EAAAA,GAGAA,EAAA,MACA,GAEAG,EAAA,QAAAA,GAAAC,EAAA/B,EAAAgC,EAAAC,GACA,GAAAC,GAAAH,EACAI,EAAAA,OACAC,EAAAA,MA2JA,OAxJAF,GAAA3C,MAAAwC,EAAAxC,OAAAJ,EAAAI,MACA2C,EAAA/C,KACAkD,MAAAzB,OAAA0B,UAAAnD,EAAAkD,OACA7C,UAAAuC,EAAAvC,WAAAL,EAAAK,UACAC,iBAAAsC,EAAAtC,kBAAAN,EAAAM,kBAGAO,EAAAuC,QAAA,SAAAC,GACAA,EAAAC,MAAAD,EAAAE,QACAF,EAAA,YAAA,EACAA,EAAAC,OACAD,EAAA,SAAAA,EAAAC,KAAAb,MACAe,KAAAH,EACAlD,OAAAH,EACA4C,IAAAA,MAKAS,EAAA,YAAA,IAIAN,EAAA/C,EAAAe,WAAAF,OAAAA,EACAkC,EAAA,UAAAF,EACAE,EAAA,SAAAD,GAAA,OACAC,EAAA,aAAA,WACA,MAAAhD,MAAAC,EAAAe,WAAAF,QAAAd,KAAAC,EAAAe,WAAAF,OAAA4C,OAAA,GAEAT,EAAAvB,OAAArC,EAAAsE,KAAAC,IAAAlB,KAAA1C,KAAA,OAAAgD,EAAA/C,EAAAe,aACAU,OAAAC,SAAAkC,MAAAC,OAAAb,GAIAC,EAAAlD,KAAAoB,MAAA2C,OAAAjB,GACAI,EAAAG,QAAA,SAAAC,GACAA,EAAAU,QAAAC,WAGAjE,KAAAoB,MAAA8C,MACAF,QAAAf,EACAD,KAAAtB,OAAA0B,UAAAJ,KAGAC,EAAAkB,KAAA,0BAAArC,KAAA,YAAA,WACA,GAAAgB,GAAA9C,KAAAoE,aAAA,wBACAC,EAAArE,KAAAoE,aAAA,wBACArB,EAAA/C,KAAAoE,aAAA,uBACAE,EAAAA,OACA7D,EAAAA,OACA8D,EAAAA,OACAC,EAAAA,OACAC,EAAAA,OACAC,EAAAA,MAEA,OAAA5B,GAAA,mBAAAA,KACA2B,EAAA1E,EAAAqB,MAAA0B,GAAAE,KAAA/C,EAAAe,WAAAF,OAAAuD,GAAApE,EAAAe,WAAAF,OACA4D,EAAA3E,EAAAqB,MAAA0B,GAAAkB,QACAU,EAAAP,KAAA,0BAAAQ,YAAA,SACAjD,OAAA1B,MAAAL,SAAA,SAEA+E,EAAAE,KAAA,kCAAAP,IACAK,EAAAE,KAAA,gCAAAP,GAEAI,GAAAA,EAAAf,OAAA,GAEAY,EAAA5C,OAAA1B,MACAS,EAAA6D,EAAA7D,SACA8D,EAAA,SAAAtE,EAAAW,SAAAc,OAAAC,UAAA4C,YAAA,EACAC,GACAK,WACAnE,KAAAD,EAAAC,KACAC,IAAAF,EAAAE,IACAmE,MAAAR,EAAAS,aACAC,OAAAV,EAAAW,eAEAvE,KAAAD,EAAAC,KAAA4D,EAAAS,aAAA9E,EAAAO,gBACAG,IAAAF,EAAAE,IAAAV,EAAAO,gBAAA,EAAA+D,GAGAC,EAAA9C,OAAA0B,QAAA,EAAAP,EAAA2B,GACA5B,EAAAF,KAAA3C,EAAAyE,EAAAC,EAAAS,OAAApC,GAAA,EAAAC,IAGAhD,EAAAqB,MAAA2C,OAAAmB,OAAApC,GAAA,GAAAO,QAAA,SAAAC,GACAA,EAAAU,QAAAC,aAMAnB,EAAA,KACAuB,EAAA,KACAtB,EAAA,KACAuB,EAAA,KACA7D,EAAA,KACA8D,EAAA,KACAC,EAAA,KACAC,EAAA,KACAC,EAAA,OAIAzB,EAAAkB,KAAA,0BAAArC,KAAA,WAAA,WACA,GAAAgB,GAAA9C,KAAAoE,aAAA,wBACAC,EAAArE,KAAAoE,aAAA,wBAEAK,GADAzE,KAAAoE,aAAA,uBACAK,OAEAA,GAAA1E,EAAAqB,MAAA0B,GAAAE,KAAA/C,EAAAe,WAAAF,OAAAuD,GAAApE,EAAAe,WAAAF,OACA2D,GAAAA,EAAAf,OAAA,GAGAhC,OAAA1B,MAAA2E,YAAA,WAKA,GAAA7B,IACAE,EAAAmC,WAAAlC,EAAAtD,SAAA,aAAAqD,EAAAmC,WACA5C,EAAAG,KAAA1C,KAAA,MACAD,KAAAC,KACAc,MAAAA,EACAsE,OAAA,SAAArC,GACA,IAAAA,EAAA,OAAA,CACA,IAAAU,GAAA,IACA,KACAA,EAAA4B,SAAA,GAAA,4BAAAtC,EAAAuC,UAAA,GAAAC,QAAA,MAAA,YAAA,MAAA7C,KAAA3C,GACA,MAAAkC,IAGA,MAAAwB,IACAT,EAAA,UACA1B,MAAA,WAIAkE,EAAA9C,KAAA1C,KAAAiD,EAAAD,GACAL,EAAAD,KAAA1C,MACAD,KAAAC,KACAc,MAAAA,EACA2E,QAAAxC,EAAAW,IAAA,KAGAZ,EAAA,KACAC,EAAA,KACAC,EAAA,KACAL,EAAA,KACA/B,EAAA,KACAgC,EAAA,KACAC,EAAA,KAEA/C,MAEA+B,EAAA,SAAAE,EAAAyD,EAAAjC,GAMA,GALAiC,EAAAjG,EAAAkG,eAAA1D,EAAAyD,OAAA,SAAAA,GACA,GAAAA,EAAAtB,aAAA,wBACA,OAAA,IAGA,CAkBA,GAjBAX,EAAA,SAAAV,GACA,IAAAA,EAAA,OAAA,CACA,IAAAU,GAAAA,MACA,KACAA,EAAA4B,SAAA,GAAA,4BAAAtC,EAAAuC,UAAA,GAAAC,QAAA,MAAA,KAAAtF,EAAAe,WAAAF,MAAA,KAAA,MAAA4B,KAAA3C,GACA,MAAAkC,GACA2D,QAAAC,IAAAtG,IAAA4C,KAAA2D,SAAA,UAAA,MAAA,kBAGA,IACA,MAAArC,GADA,QAIAA,EAAA,OAEAiC,EAAAtB,aAAA,yBAEAX,EAAA,MAAAzD,KAEAyD,GAAAsC,QACA,SAAAjF,GACA,GAAAkF,IACAC,SAAA,SAAAC,GACAlG,KAAAmG,SAAAD,GAEAE,MAAA,SAAAF,GACA,GAAAG,GAAArG,KAAAqG,IACAvF,GAAAuC,QAAA,SAAAC,GACAA,EAAAyC,OAAA,UAAAzC,EAAAyC,MAAAO,MAAAhD,EAAAyC,MAAAM,MAAAA,IACA/C,EAAAyC,MAAAI,SAAA,KAGAnG,KAAAmG,SAAAD,GAGAF,GAAAhG,KAAAsG,OAAAN,EAAAhG,KAAAsG,MAAA5D,KAAA1C,KAAAA,KAAAmG,SACAH,EAAA,MACAtD,KAAAe,EAAAsC,MAAA9F,EAAAa,OAEAb,EAAAc,mBACAhB,EAAAqB,MAAAiC,QAAA,SAAAC,GACAA,EAAAU,QAAAG,KAAA,0BAAAoC,KAAA,WACA,GAAA9C,GAAAH,EAAAN,KAAA/C,EAAAe,WAAAF,OAAAd,KAAAoE,aAAA,wBACAX,GAAAsC,OACArE,OAAA1B,MAAAmE,KAAA,uBAAAS,KAAA,oBAAAnB,EAAAsC,MAAAI,cAOApG,EAAAyG,SACAzG,EAAAyG,QAAA9D,KAAAe,EAAAA,GAEAA,EAAAxD,EAAAe,WAAAF,QAAA,GAAA2C,EAAAxD,EAAAe,WAAAF,OAAA4C,SAAAzD,EAAAc,mBAAAhB,EAAAuC,YAGAvC,GAAAuC,OAKA,OAFAoD,GAAA,KACAjC,EAAA,KACAzD,MAEAwF,EAAA,SAAAvC,EAAAD,GACA,GAAAyD,GAAA/E,OAAAM,QACA0E,EAAAhF,OAAAC,UACAgF,EAAA,SAAA1G,EAAAW,SAAA6F,EAAAzB,SAAA0B,EAAA1B,SACA4B,EAAAH,EAAA3B,QACA+B,EAAA5D,EAAAgC,cACA6B,EAAA7D,EAAA8B,aACAgC,EAAA/D,EAAAtC,KACAsG,EAAAhE,EAAArC,IACAC,EAAAX,EAAAW,UAAA,OA4BA,OA1BAmG,GAAAD,EAAAF,IAEAG,EADA/D,EAAA,WACAA,EAAA,WAAAtC,KAAAoG,EAAA7G,EAAAO,gBAGAoG,EAAAE,GAIAE,EAAAH,EAAAF,IACAK,EAAAL,EAAAE,GAGA5D,EAAAgE,KAAAvG,KAAAqG,EAAApG,IAAAqG,EAAApG,SAAAA,IAEAqC,EAAA,KACAD,EAAA,KACAyD,EAAA,KACAC,EAAA,KACAC,EAAA,KACAC,EAAA,KACAC,EAAA,KACAC,EAAA,KACAC,EAAA,KACAC,EAAA,KACApG,EAAA,KACAZ,KAKAA,MAAAkH,KAAA,WACAnH,EAAA8B,OAAAtC,IAAAY,UAKAH,KAAAuC,eAAAtC,EAAAsC,eACAvC,KAAAwG,QAAAvG,EAAAuG,QACAxG,KAAA2C,OAAA1C,EAAA0C,OAEAJ,EAAAG,KAAA1C,KAAA,MACAD,KAAAC,KACAsB,MAAA,UAYAtB,KAAA4C,MAAA,WAEA,GAAAuE,IACAC,MAAA,SAAAnF,EAAAY,GAKAZ,GACAvB,KAAAuB,EAAAoF,QACA1G,IAAA,SAAAV,EAAAW,SAAAqB,EAAAqF,QAAArF,EAAAsF,MACAzC,MAAA7E,EAAA6E,MACAzE,MAAAJ,EAAAI,OAGA4B,EAAAvB,MAAA,EACAuB,EAAAtB,KAAA,EAEAV,EAAAQ,SACAR,EAAAQ,OAAAC,OAAAuB,EAAAvB,MAAAT,EAAAQ,OAAAC,MACAT,EAAAQ,OAAAE,MAAAsB,EAAAtB,KAAAV,EAAAQ,OAAAE,MAEAkC,EAAAnB,OAAA0B,QAAA,EAAAnB,EAAAY,EAEA,KACA,MAAAA,GADA,QAIAZ,EAAA,OAIAuF,OAAA,SAAAvF,EAAAY,GACAZ,GACAvB,KAAAuB,EAAAvB,KACAC,IAAAsB,EAAAtB,IACAmE,MAAA7C,EAAA6C,OAAA7E,EAAA6E,MACAzE,MAAA4B,EAAA5B,OAAAJ,EAAAI,OAGAJ,EAAAQ,SACAR,EAAAQ,OAAAC,OAAAuB,EAAAvB,MAAAT,EAAAQ,OAAAC,MACAT,EAAAQ,OAAAE,MAAAsB,EAAAtB,KAAAV,EAAAQ,OAAAE,MAGAkC,EAAAnB,OAAA0B,QAAA,EAAAnB,EAAAY,EAEA,KACA,MAAAA,GADA,QAIAZ,EAAA,QAKAwF,EAAA,SAAApH,GACAA,IAAAJ,EAAAI,MAAAA,GAGA,OAAA,UAAA4B,EAAAY,GAEA,IAAAZ,EAAA,MAAAjC,KACA6C,GAAAsE,EAAA,mBAAAlF,GAAAoF,QAAA,SAAA,SAAA3E,KAAA1C,KAAAiC,EAAAY,GACA4E,EAAA5E,EAAAxC,MAEA,IAAAS,MAAA4G,OAAAzH,EAAAa,OACA6G,EAAAA,MA4BA,OA1BA9E,GAAA+E,SACAD,EAAA,SAAAlD,GACA,GAAAoD,KASA,OARApD,GAAApB,QAAA,SAAAC,GACAA,EAAAxC,OAAAwC,EAAAxC,MAAA4C,OAAA,IACAJ,EAAAxC,MAAA6G,EAAArE,EAAAxC,QAEA+B,EAAA+E,OAAAlF,KAAAY,IACAuE,EAAA3D,KAAAZ,KAGAuE,GAEA/G,EAAA6G,EAAA7G,IAGAA,EAAA4C,SACAd,EAAAF,KAAA1C,KAAA6C,EAAA/B,EAAA,GAEAd,KAAA8H,uBAAAC,aAAA/H,KAAA8H,uBACA9H,KAAA8H,sBAAAE,WAAA,WACAxG,EAAAkB,KAAA1C,MAAA,IACA8B,KAAA9B,MAAA,MAGAiC,EAAA,KACAjC,SASAA,KAAAiI,OAAA,WAEA,GAAAd,IACAK,OAAA,SAAAvF,EAAAY,GACAZ,GACAvB,KAAAuB,EAAAvB,KACAC,IAAAsB,EAAAtB,IACAmE,MAAA7C,EAAA6C,OAAA7E,EAAA6E,MACAzE,MAAA4B,EAAA5B,OAAAJ,EAAAI,MACA8E,UAAAlD,EAAAkD,WAAAlF,EAAAkF,WAEAtC,EAAAnB,OAAA0B,QAAA,EAAAP,EAAAZ,EAEA,KACA,MAAAY,GADA,QAIAZ,EAAA,KACAY,EAAA,QAKAqF,EAAA,SAAAxC,EAAA7C,EAAAsF,GACA,GACAnE,GAAAtC,OAAAgE,GACAjF,EAAAuD,EAAAvD,SACAuE,EAAAhB,EAAAiB,cACAZ,EAAAa,OAAAQ,EAAAtB,aAAA,yBACAG,EAAA,SAAAtE,EAAAW,SAAAc,OAAAC,UAAA4C,YAAA,CAGA,IAAAtE,EAAAa,OAAAb,EAAAa,MAAAuD,GAAApE,EAAAe,WAAAF,QAAAb,EAAAa,MAAAuD,GAAApE,EAAAe,WAAAF,OAAA4C,OAAA,CAEA,GAAA3D,EAAAsB,QAAA+G,aAAA/D,EAEA,MADA,SAAA8D,GAAApI,EAAAuC,SACA,CAGAvC,GAAAsB,QAAAqE,OAAAvB,KAAA,0BAAAQ,YAAA,SACA5E,EAAAsB,QAAAgH,QAAA,EACAtI,EAAAsB,QAAA+G,YAAA/D,EAEAL,EAAAY,KAAA,wBAAA,QACAZ,EAAArE,SAAA,SAEAM,EAAAQ,SACAR,EAAAQ,OAAAC,OAAAD,EAAAC,MAAAT,EAAAQ,OAAAC,MACAT,EAAAQ,OAAAE,MAAAF,EAAAE,KAAAV,EAAAQ,OAAAE,MAGAkC,EAAAsE,EAAA,OAAAzE,KAAA1C,MAAAU,KAAAD,EAAAC,KAAAC,IAAAF,EAAAE,IAAAqE,EAAAT,GAAA1B,GAEAD,EAAAF,KAAA3C,EAAA8C,EAAA5C,EAAAa,MAAAuD,GAAApE,EAAAe,WAAAF,OAAA,EAAA,QAAA4E,EAAAtB,aAAA,yBACA5C,EAAAkB,KAAA3C,GAAA,GAGA2F,EAAA,KACA7C,EAAA,KACAmB,EAAA,KACAvD,EAAA,KACAuE,EAAA,KACAX,EAAA,KACAE,EAAA,MAEA+D,EAAA,SAAA5C,EAAA7C,EAAAsF,GACA,GACAnE,GAAAtC,OAAAgE,GAGArB,GAFAL,EAAAvD,SACAuD,EAAAiB,cACAC,OAAAQ,EAAAtB,aAAA,yBACA,UAAAnE,EAAAW,SAAAc,OAAAC,UAAA4C,YAAA,GACAtE,EAAAa,OAAAb,EAAAa,MAAAuD,GAAApE,EAAAe,WAAAF,QAAA,GAAAb,EAAAa,MAAAuD,GAAApE,EAAAe,WAAAF,OAAA4C,QACA3D,EAAAyG,SACAzG,EAAAyG,QAAA9D,KAAAzC,EAAAa,MAAAuD,GAAApE,EAAAa,MAAAuD,IAKA,OAAA,UAAAkE,EAAA1F,GACA,GAGAI,GAFAD,KACAlC,EAAAb,EAAAa,KAsEA,OAnEA,mBAAA+B,KAAAA,MAEAG,EAAA3C,MAAAwC,EAAAxC,OAAAJ,EAAAI,MACA2C,EAAA/C,KACAkD,MAAAzB,OAAA0B,UAAAnD,EAAAkD,OACA7C,UAAAuC,EAAAvC,WAAAL,EAAAK,UACAC,iBAAAsC,EAAAtC,kBAAAN,EAAAM,kBAGAO,EAAAuC,QAAA,SAAAC,GACAA,EAAAC,MAAAD,EAAAE,QACAF,EAAA,YAAA,EACAA,EAAAC,OACAD,EAAA,SAAAA,EAAAC,KAAAb,MACAe,KAAAH,EACAlD,OAAAH,EACA4C,IAAAA,MAKAS,EAAA,YAAA,IAIAN,EAAA/C,EAAAe,WAAAF,OAAAA,EAEAmC,EAAAvB,OAAArC,EAAAsE,KAAAC,IAAAlB,KAAA1C,KAAA,cAAAgD,EAAA/C,EAAAe,aACAjB,EAAAsB,SACAqE,OAAAhE,OAAA6G,GACAF,QAAA,GAEAtI,EAAAsB,QAAAqE,OAAAnC,KAAAN,GAGAlD,EAAAsB,QAAAqE,OAAA5D,KAAA,QAAA,SAAAG,GACA,IAAAA,EAAA,MAAAjC,KACA,IAAA0F,GAAAjG,EAAAkG,eAAA1D,EAAAyD,OAAA,SAAAA,GACA,GAAAA,EAAAtB,aAAA,wBACA,OAAA,GAGAsB,KACA4C,EAAA5C,EAAA7C,EAAA,SACAqF,EAAAxC,EAAA7C,EAAA,UAGA6C,EAAA,OAEA3F,EAAAsB,QAAAqE,OAAA5D,KAAA,YAAA,SAAAG,GACA,IAAAlC,EAAAsB,QAAAgH,OAAA,OAAA,CACA,IAAA3C,GAAAjG,EAAAkG,eAAA1D,EAAAyD,OAAA,SAAAA,GACA,GAAAA,EAAAtB,aAAA,wBACA,OAAA,GAGAsB,IAAAwC,EAAAxC,EAAA7C,EAAA,aAEA6C,EAAA,OAGA6C,EAAA,KACA1F,EAAA,KACAG,EAAA,KACAlC,EAAA,KACAmC,EAAA,KAEAjD,SAQAA,KAAAsC,MAAA,WAoBA,MAlBAvC,GAAAsB,SAAAtB,EAAAsB,QAAAqE,SACA3F,EAAAsB,QAAAqE,OAAAvB,KAAA,0BAAAQ,YAAA,SACA5E,EAAAsB,QAAAgH,QAAA,EACAtI,EAAAsB,QAAA+G,YAAA,MAGA5G,EAAAkB,KAAA1C,MAAA,GAEAA,KAAAoB,MAAAiC,QAAA,SAAAC,GACAA,EAAAU,QAAAC,WAEAjE,KAAAoB,SAEAmB,EAAAG,KAAA1C,KAAA,MACAD,KAAAC,KACAsB,MAAA,UAGAtB,MAOAA,KAAAwI,cAAA,WACA,GAAAC,MACAC,EAAA,SAAA5H,GAEA,IADA,GAAA6H,GAAA7H,EAAA4C,OACAiF,KACA7H,EAAA6H,GAAA5C,OAAAjF,EAAA6H,GAAA5C,MAAAI,UACAsC,EAAA3H,EAAA6H,GAAA5C,MAAAM,OAEA5G,EAAAmJ,SAAAH,EAAA3H,EAAA6H,GAAA5C,MAAAM,SAAAoC,EAAA3H,EAAA6H,GAAA5C,MAAAM,OAAAoC,EAAA3H,EAAA6H,GAAA5C,MAAAM,QACAoC,EAAA3H,EAAA6H,GAAA5C,MAAAM,MAAAnC,KAAApD,EAAA6H,GAAA5C,MAAAG,QAHAuC,EAAA3H,EAAA6H,GAAA5C,MAAAM,MAAAvF,EAAA6H,GAAA5C,MAAAG,OAMApF,EAAA6H,GAAA7H,OAAAA,EAAA6H,GAAA7H,MAAA4C,OAAA,GAAAgF,EAAA5H,EAAA6H,GAAA7H,OAIA4H,GAAAzI,EAAAa,MAEA,KACA,MAAA2H,GADA,QAIAA,EAAA,KACAC,EAAA,OAKA1I,KAAA6I,KAAA,WAEAvJ,EAAAwJ,cAAAxJ,EAAAwJ,kBACAxJ,EAAAwJ,cAAA5E,KAAAlE,MAEA+I,WAAAtJ,EAAAuJ,SAAAD,UAAA,KACA/I,KAAAiJ,UAAAF,UAAA,KAEAG,MAAAlJ,KAAA+I,WAEA,OAAAjJ,OAGAT,EAAAE,IAAAC,GAAA2J,QC9zBA,WACA,GAAA9J,GAAAE,IAAAC,GAAA2J,KAEAxF,EAAA,SAAA3C,GACA,MAAA,4JAGAA,EAAAF,MAHA,s0CAyBAE,EAAAC,MAzBA,whBAmCAD,EAAAF,MAnCA,mGAyCAsI,EAAA,SAAApI,GACA,MAAA,gHAGAA,EAAAF,MAHA,myBAiBAE,EAAAC,MAjBA,gGAoBAD,EAAAF,MApBA,mDA0BAzB,GAAAsE,MACAA,KAAAA,EACAyF,YAAAA,EAEAxF,IAAA,SAAAyF,EAAArG,EAAAhC,GACA,MAAAzB,KAAA+J,SAAAC,OAAAlK,EAAAsE,KAAA0F,GAAA3G,KAAA1C,KAAAgB,GAAAgC","file":"ax5menu.min.js","sourcesContent":["\"use strict\";\n\n// ax5.ui.menu\n(function () {\n    var UI = ax5.ui;\n    var U = ax5.util;\n    var MENU;\n\n    UI.addClass({\n        className: \"menu\",\n        version: \"${VERSION}\"\n    }, function () {\n        /**\n         * @class ax5.ui.menu\n         * @classdesc\n         * @author tom@axisj.com\n         * @example\n         * ```js\n         * var menu = new ax5.ui.menu({\n         *     theme: 'primary',\n         *     iconWidth: 20,\n         *     acceleratorWidth: 100,\n         *     itemClickAndClose: false,\n         *     icons: {\n         *         'arrow': '<i class=\"fa fa-caret-right\"></i>'\n         *     },\n         *     columnKeys: {\n         *         label: 'name',\n         *         items: 'chidren'\n         *     },\n         *     items: [\n         *         {\n         *             icon: '<i class=\"fa fa-archive\"></i>',\n         *             name: \"Menu Parent 0\",\n         *             chidren: [\n         *                 {\n         *                     check: {\n         *                         type: 'checkbox',\n         *                         name: 'A',\n         *                         value: '0',\n         *                         checked: false\n         *                     },\n         *                     name: \"Menu Z\",\n         *                     data: {},\n         *                     role: \"\",\n         *                     accelerator: \"CmdOrCtrl+Z\"\n         *                 },\n         *                 {\n         *                     check: {\n         *                         type: 'checkbox',\n         *                         name: 'A',\n         *                         value: '1',\n         *                         checked: true\n         *                     },\n         *                     name: \"Menu A\",\n         *                     data: {},\n         *                     role: \"\"\n         *                 }\n         *             ],\n         *             filterType: \"A\"\n         *         },\n         *         {\n         *             divide: true,\n         *             filterType: \"A\"\n         *         },\n         *         {\n         *             icon: '<i class=\"fa fa-mixcloud\"></i>',\n         *             name: \"Menu Parent 1\",\n         *             chidren: [\n         *                 {\n         *                     name: \"Menu Z\",\n         *                     data: {},\n         *                     role: \"\",\n         *                     chidren: [\n         *                         {\n         *                             name: \"Menu Z\",\n         *                             data: {},\n         *                             role: \"\"\n         *                         },\n         *                         {\n         *                             name: \"Menu A\",\n         *                             data: {},\n         *                             role: \"\"\n         *                         }\n         *                     ]\n         *                 },\n         *                 {\n         *                     name: \"Menu A\",\n         *                     data: {},\n         *                     role: \"\"\n         *                 }\n         *             ],\n         *             filterType: \"A\"\n         *         },\n         *         {\n         *             check: {\n         *                 type: 'radio',\n         *                 name: 'radioName',\n         *                 value: '1',\n         *                 checked: false\n         *             },\n         *             icon: '<i class=\"fa fa-bluetooth\"></i>',\n         *             name: \"Menu Parent 2\"\n         *         },\n         *         {\n         *             check: {\n         *                 type: 'radio',\n         *                 name: 'radioName',\n         *                 value: '2',\n         *                 checked: false\n         *             },\n         *             name: \"Menu Parent 3\"\n         *         },\n         *         {\n         *             check: {\n         *                 type: 'radio',\n         *                 name: 'radioName',\n         *                 value: '3',\n         *                 checked: false\n         *             },\n         *             name: \"Menu Parent 4\"\n         *         },\n         *         {divide: true},\n         *         {\n         *             html: function () {\n         *                 return '<div style=\"text-align: center;\">' +\n         *                     '<button class=\"btn btn-primary\" data-menu-btn=\"OK\">OK</button> ' +\n         *                     '<button class=\"btn btn-danger\" data-menu-btn=\"CANCEL\">CANCEL</button>' +\n         *                     '</div>';\n         *             }\n         *         }\n         *     ]\n         * });\n         * ```\n         */\n        var ax5menu = function ax5menu() {\n            var self = this,\n                cfg = void 0;\n\n            this.instanceId = ax5.getGuid();\n            this.config = {\n                theme: \"default\",\n                iconWidth: 22,\n                acceleratorWidth: 100,\n                menuBodyPadding: 5,\n                //direction: \"top\", // top|bottom\n                offset: { left: 0, top: 0 },\n                position: \"fixed\",\n                animateTime: 250,\n                items: [],\n                itemClickAndClose: true,\n                columnKeys: {\n                    label: 'label',\n                    items: 'items'\n                }\n            };\n\n            this.openTimer = null;\n            this.closeTimer = null;\n            this.queue = [];\n            this.menuBar = {};\n            this.state = undefined;\n\n            cfg = this.config;\n\n            var appEventAttach = function appEventAttach(active) {\n                if (active) {\n                    jQuery(document).unbind(\"click.ax5menu-\" + this.menuId).bind(\"click.ax5menu-\" + this.menuId, clickItem.bind(this));\n                    jQuery(window).unbind(\"keydown.ax5menu-\" + this.menuId).bind(\"keydown.ax5menu-\" + this.menuId, function (e) {\n                        if (e.which == ax5.info.eventKeys.ESC) {\n                            self.close();\n                        }\n                    });\n                    jQuery(window).unbind(\"resize.ax5menu-\" + this.menuId).bind(\"resize.ax5menu-\" + this.menuId, function (e) {\n                        self.close();\n                    });\n                } else {\n                    jQuery(document).unbind(\"click.ax5menu-\" + this.menuId);\n                    jQuery(window).unbind(\"keydown.ax5menu-\" + this.menuId);\n                    jQuery(window).unbind(\"resize.ax5menu-\" + this.menuId);\n                }\n            },\n                onStateChanged = function onStateChanged(opts, that) {\n                if (opts && opts.onStateChanged) {\n                    opts.onStateChanged.call(that, that);\n                } else if (this.onStateChanged) {\n                    this.onStateChanged.call(that, that);\n                }\n\n                self.state = that.state;\n                opts = null;\n                that = null;\n                return true;\n            },\n                onLoad = function onLoad(that) {\n                if (this.onLoad) {\n                    this.onLoad.call(that, that);\n                }\n\n                that = null;\n                return true;\n            },\n                popup = function popup(opt, items, depth, path) {\n                var data = opt,\n                    activeMenu = void 0,\n                    removed = void 0;\n\n                data.theme = opt.theme || cfg.theme;\n                data.cfg = {\n                    icons: jQuery.extend({}, cfg.icons),\n                    iconWidth: opt.iconWidth || cfg.iconWidth,\n                    acceleratorWidth: opt.acceleratorWidth || cfg.acceleratorWidth\n                };\n\n                items.forEach(function (n) {\n                    if (n.html || n.divide) {\n                        n['@isMenu'] = false;\n                        if (n.html) {\n                            n['@html'] = n.html.call({\n                                item: n,\n                                config: cfg,\n                                opt: opt\n                            });\n                        }\n                    } else {\n                        n['@isMenu'] = true;\n                    }\n                });\n\n                data[cfg.columnKeys.items] = items;\n                data['@depth'] = depth;\n                data['@path'] = path || \"root\";\n                data['@hasChild'] = function () {\n                    return this[cfg.columnKeys.items] && this[cfg.columnKeys.items].length > 0;\n                };\n                activeMenu = jQuery(MENU.tmpl.get.call(this, \"tmpl\", data, cfg.columnKeys));\n                jQuery(document.body).append(activeMenu);\n\n                // remove queue\n\n                removed = this.queue.splice(depth);\n                removed.forEach(function (n) {\n                    n.$target.remove();\n                });\n\n                this.queue.push({\n                    '$target': activeMenu,\n                    'data': jQuery.extend({}, data)\n                });\n\n                activeMenu.find('[data-menu-item-index]').bind(\"mouseover\", function () {\n                    var depth = this.getAttribute(\"data-menu-item-depth\"),\n                        index = this.getAttribute(\"data-menu-item-index\"),\n                        path = this.getAttribute(\"data-menu-item-path\"),\n                        $this = void 0,\n                        offset = void 0,\n                        scrollTop = void 0,\n                        childOpt = void 0,\n                        _items = void 0,\n                        _activeMenu = void 0;\n\n                    if (depth != null && typeof depth != \"undefined\") {\n                        _items = self.queue[depth].data[cfg.columnKeys.items][index][cfg.columnKeys.items];\n                        _activeMenu = self.queue[depth].$target;\n                        _activeMenu.find('[data-menu-item-index]').removeClass(\"hover\");\n                        jQuery(this).addClass(\"hover\");\n\n                        if (_activeMenu.attr(\"data-selected-menu-item-index\") != index) {\n                            _activeMenu.attr(\"data-selected-menu-item-index\", index);\n\n                            if (_items && _items.length > 0) {\n\n                                $this = jQuery(this);\n                                offset = $this.offset();\n                                scrollTop = cfg.position == \"fixed\" ? jQuery(document).scrollTop() : 0;\n                                childOpt = {\n                                    '@parent': {\n                                        left: offset.left,\n                                        top: offset.top,\n                                        width: $this.outerWidth(),\n                                        height: $this.outerHeight()\n                                    },\n                                    left: offset.left + $this.outerWidth() - cfg.menuBodyPadding,\n                                    top: offset.top - cfg.menuBodyPadding - 1 - scrollTop\n                                };\n\n                                childOpt = jQuery.extend(true, opt, childOpt);\n                                popup.call(self, childOpt, _items, Number(depth) + 1, path);\n                            } else {\n                                self.queue.splice(Number(depth) + 1).forEach(function (n) {\n                                    n.$target.remove();\n                                });\n                            }\n                        }\n                    }\n\n                    depth = null;\n                    index = null;\n                    path = null;\n                    $this = null;\n                    offset = null;\n                    scrollTop = null;\n                    childOpt = null;\n                    _items = null;\n                    _activeMenu = null;\n                });\n\n                // mouse out\n                activeMenu.find('[data-menu-item-index]').bind(\"mouseout\", function () {\n                    var depth = this.getAttribute(\"data-menu-item-depth\"),\n                        index = this.getAttribute(\"data-menu-item-index\"),\n                        path = this.getAttribute(\"data-menu-item-path\"),\n                        _items = void 0;\n\n                    _items = self.queue[depth].data[cfg.columnKeys.items][index][cfg.columnKeys.items];\n                    if (_items && _items.length > 0) {} else {\n                        jQuery(this).removeClass(\"hover\");\n                    }\n                });\n\n                // is Root\n                if (depth == 0) {\n                    if (data.direction) activeMenu.addClass(\"direction-\" + data.direction);\n                    onStateChanged.call(this, null, {\n                        self: this,\n                        items: items,\n                        parent: function (path) {\n                            if (!path) return false;\n                            var item = null;\n                            try {\n                                item = Function(\"\", \"return this.config.items[\" + path.substring(5).replace(/\\./g, '].items[') + \"];\").call(self);\n                            } catch (e) {}\n                            return item;\n                        }(data['@path']),\n                        state: \"popup\"\n                    });\n                }\n\n                align.call(this, activeMenu, data);\n                onLoad.call(this, {\n                    self: this,\n                    items: items,\n                    element: activeMenu.get(0)\n                });\n\n                data = null;\n                activeMenu = null;\n                removed = null;\n                opt = null;\n                items = null;\n                depth = null;\n                path = null;\n\n                return this;\n            },\n                clickItem = function clickItem(e, target, item) {\n                target = U.findParentNode(e.target, function (target) {\n                    if (target.getAttribute(\"data-menu-item-index\")) {\n                        return true;\n                    }\n                });\n                if (target) {\n                    item = function (path) {\n                        if (!path) return false;\n                        var item = void 0;\n                        try {\n                            item = Function(\"\", \"return this.config.items[\" + path.substring(5).replace(/\\./g, '].' + cfg.columnKeys.items + '[') + \"];\").call(self);\n                        } catch (e) {\n                            console.log(ax5.info.getError(\"ax5menu\", \"501\", \"menuItemClick\"));\n                        }\n\n                        try {\n                            return item;\n                        } finally {\n                            item = null;\n                        }\n                    }(target.getAttribute(\"data-menu-item-path\"));\n\n                    if (!item) return this;\n\n                    if (item.check) {\n                        (function (items) {\n                            var setValue = {\n                                'checkbox': function checkbox(value) {\n                                    this.checked = !value;\n                                },\n                                'radio': function radio(value) {\n                                    var name = this.name;\n                                    items.forEach(function (n) {\n                                        if (n.check && n.check.type === 'radio' && n.check.name == name) {\n                                            n.check.checked = false;\n                                        }\n                                    });\n                                    this.checked = !value;\n                                }\n                            };\n                            if (setValue[this.type]) setValue[this.type].call(this, this.checked);\n                            setValue = null;\n                        }).call(item.check, cfg.items);\n\n                        if (!cfg.itemClickAndClose) {\n                            self.queue.forEach(function (n) {\n                                n.$target.find('[data-menu-item-index]').each(function () {\n                                    var item = n.data[cfg.columnKeys.items][this.getAttribute(\"data-menu-item-index\")];\n                                    if (item.check) {\n                                        jQuery(this).find(\".item-checkbox-wrap\").attr(\"data-item-checked\", item.check.checked);\n                                    }\n                                });\n                            });\n                        }\n                    }\n\n                    if (self.onClick) {\n                        self.onClick.call(item, item);\n                    }\n                    if ((!item[cfg.columnKeys.items] || item[cfg.columnKeys.items].length == 0) && cfg.itemClickAndClose) self.close();\n                } else {\n                    self.close();\n                }\n\n                target = null;\n                item = null;\n                return this;\n            },\n                align = function align(activeMenu, data) {\n                var $window = jQuery(window),\n                    $document = jQuery(document),\n                    wh = cfg.position == \"fixed\" ? $window.height() : $document.height(),\n                    ww = $window.width(),\n                    h = activeMenu.outerHeight(),\n                    w = activeMenu.outerWidth(),\n                    l = data.left,\n                    t = data.top,\n                    position = cfg.position || \"fixed\";\n\n                if (l + w > ww) {\n                    if (data['@parent']) {\n                        l = data['@parent'].left - w + cfg.menuBodyPadding;\n                    } else {\n                        l = ww - w;\n                    }\n                }\n\n                if (t + h > wh) {\n                    t = wh - h;\n                }\n\n                activeMenu.css({ left: l, top: t, position: position });\n\n                activeMenu = null;\n                data = null;\n                $window = null;\n                $document = null;\n                wh = null;\n                ww = null;\n                h = null;\n                w = null;\n                l = null;\n                t = null;\n                position = null;\n                return this;\n            };\n\n            /// private end\n\n            this.init = function () {\n                self.menuId = ax5.getGuid();\n\n                /**\n                 * config에 선언된 이벤트 함수들을 this로 이동시켜 주어 나중에 인스턴스.on... 으로 처리 가능 하도록 변경\n                 */\n                this.onStateChanged = cfg.onStateChanged;\n                this.onClick = cfg.onClick;\n                this.onLoad = cfg.onLoad;\n\n                onStateChanged.call(this, null, {\n                    self: this,\n                    state: \"init\"\n                });\n            };\n\n            /**\n             * @method ax5.ui.menu.popup\n             * @param {Event|Object} e - Event or Object\n             * @param {Object} [opt]\n             * @param {String} [opt.theme]\n             * @param {Function} [opt.filter]\n             * @returns {ax5.ui.menu} this\n             */\n            this.popup = function () {\n\n                var getOption = {\n                    'event': function event(e, opt) {\n                        //var xOffset = Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);\n                        //var yOffset = Math.max(document.documentElement.scrollTop, document.body.scrollTop);\n                        //console.log(e.pageY);\n\n                        e = {\n                            left: e.clientX,\n                            top: cfg.position == \"fixed\" ? e.clientY : e.pageY,\n                            width: cfg.width,\n                            theme: cfg.theme\n                        };\n\n                        e.left -= 5;\n                        e.top -= 5;\n\n                        if (cfg.offset) {\n                            if (cfg.offset.left) e.left += cfg.offset.left;\n                            if (cfg.offset.top) e.top += cfg.offset.top;\n                        }\n                        opt = jQuery.extend(true, e, opt);\n\n                        try {\n                            return opt;\n                        } finally {\n                            e = null;\n                            //opt = null;\n                        }\n                    },\n                    'object': function object(e, opt) {\n                        e = {\n                            left: e.left,\n                            top: e.top,\n                            width: e.width || cfg.width,\n                            theme: e.theme || cfg.theme\n                        };\n\n                        if (cfg.offset) {\n                            if (cfg.offset.left) e.left += cfg.offset.left;\n                            if (cfg.offset.top) e.top += cfg.offset.top;\n                        }\n\n                        opt = jQuery.extend(true, e, opt);\n\n                        try {\n                            return opt;\n                        } finally {\n                            e = null;\n                            //opt = null;\n                        }\n                    }\n                },\n                    updateTheme = function updateTheme(theme) {\n                    if (theme) cfg.theme = theme;\n                };\n\n                return function (e, opt) {\n\n                    if (!e) return this;\n                    opt = getOption[typeof e.clientX == \"undefined\" ? \"object\" : \"event\"].call(this, e, opt);\n                    updateTheme(opt.theme);\n\n                    var items = [].concat(cfg.items),\n                        _filteringItem = void 0;\n\n                    if (opt.filter) {\n                        _filteringItem = function filteringItem(_items) {\n                            var arr = [];\n                            _items.forEach(function (n) {\n                                if (n.items && n.items.length > 0) {\n                                    n.items = _filteringItem(n.items);\n                                }\n                                if (opt.filter.call(n)) {\n                                    arr.push(n);\n                                }\n                            });\n                            return arr;\n                        };\n                        items = _filteringItem(items);\n                    }\n\n                    if (items.length) {\n                        popup.call(this, opt, items, 0); // 0 is seq of queue\n\n                        if (this.popupEventAttachTimer) clearTimeout(this.popupEventAttachTimer);\n                        this.popupEventAttachTimer = setTimeout(function () {\n                            appEventAttach.call(this, true); // 이벤트 연결\n                        }.bind(this), 500);\n                    }\n\n                    e = null;\n                    return this;\n                };\n            }();\n\n            /**\n             * @method ax5.ui.menu.attach\n             * @param {Element|jQueryObject} el\n             * @returns {ax5.ui.menu} this\n             */\n            this.attach = function () {\n\n                var getOption = {\n                    'object': function object(e, opt) {\n                        e = {\n                            left: e.left,\n                            top: e.top,\n                            width: e.width || cfg.width,\n                            theme: e.theme || cfg.theme,\n                            direction: e.direction || cfg.direction\n                        };\n                        opt = jQuery.extend(true, opt, e);\n\n                        try {\n                            return opt;\n                        } finally {\n                            e = null;\n                            opt = null;\n                        }\n                    }\n                };\n\n                var popUpChildMenu = function popUpChildMenu(target, opt, eType) {\n                    var $target = jQuery(target),\n                        offset = $target.offset(),\n                        height = $target.outerHeight(),\n                        index = Number(target.getAttribute(\"data-menu-item-index\")),\n                        scrollTop = cfg.position == \"fixed\" ? jQuery(document).scrollTop() : 0;\n\n                    if (cfg.items && cfg.items[index][cfg.columnKeys.items] && cfg.items[index][cfg.columnKeys.items].length) {\n\n                        if (self.menuBar.openedIndex == index) {\n                            if (eType == \"click\") self.close();\n                            return false;\n                        }\n\n                        self.menuBar.target.find('[data-menu-item-index]').removeClass(\"hover\");\n                        self.menuBar.opened = true;\n                        self.menuBar.openedIndex = index;\n\n                        $target.attr(\"data-menu-item-opened\", \"true\");\n                        $target.addClass(\"hover\");\n\n                        if (cfg.offset) {\n                            if (cfg.offset.left) offset.left += cfg.offset.left;\n                            if (cfg.offset.top) offset.top += cfg.offset.top;\n                        }\n\n                        opt = getOption[\"object\"].call(this, { left: offset.left, top: offset.top + height - scrollTop }, opt);\n\n                        popup.call(self, opt, cfg.items[index][cfg.columnKeys.items], 0, 'root.' + target.getAttribute(\"data-menu-item-index\")); // 0 is seq of queue\n                        appEventAttach.call(self, true); // 이벤트 연결\n                    }\n\n                    target = null;\n                    opt = null;\n                    $target = null;\n                    offset = null;\n                    height = null;\n                    index = null;\n                    scrollTop = null;\n                };\n                var clickParentMenu = function clickParentMenu(target, opt, eType) {\n                    var $target = jQuery(target),\n                        offset = $target.offset(),\n                        height = $target.outerHeight(),\n                        index = Number(target.getAttribute(\"data-menu-item-index\")),\n                        scrollTop = cfg.position == \"fixed\" ? jQuery(document).scrollTop() : 0;\n                    if (cfg.items && (!cfg.items[index][cfg.columnKeys.items] || cfg.items[index][cfg.columnKeys.items].length == 0)) {\n                        if (self.onClick) {\n                            self.onClick.call(cfg.items[index], cfg.items[index]);\n                        }\n                    }\n                };\n\n                return function (el, opt) {\n                    var data = {},\n                        items = cfg.items,\n                        activeMenu;\n\n                    if (typeof opt === \"undefined\") opt = {};\n\n                    data.theme = opt.theme || cfg.theme;\n                    data.cfg = {\n                        icons: jQuery.extend({}, cfg.icons),\n                        iconWidth: opt.iconWidth || cfg.iconWidth,\n                        acceleratorWidth: opt.acceleratorWidth || cfg.acceleratorWidth\n                    };\n\n                    items.forEach(function (n) {\n                        if (n.html || n.divide) {\n                            n['@isMenu'] = false;\n                            if (n.html) {\n                                n['@html'] = n.html.call({\n                                    item: n,\n                                    config: cfg,\n                                    opt: opt\n                                });\n                            }\n                        } else {\n                            n['@isMenu'] = true;\n                        }\n                    });\n\n                    data[cfg.columnKeys.items] = items;\n\n                    activeMenu = jQuery(MENU.tmpl.get.call(this, \"tmplMenubar\", data, cfg.columnKeys));\n                    self.menuBar = {\n                        target: jQuery(el),\n                        opened: false\n                    };\n                    self.menuBar.target.html(activeMenu);\n\n                    // click, mouseover\n                    self.menuBar.target.bind(\"click\", function (e) {\n                        if (!e) return this;\n                        var target = U.findParentNode(e.target, function (target) {\n                            if (target.getAttribute(\"data-menu-item-index\")) {\n                                return true;\n                            }\n                        });\n                        if (target) {\n                            clickParentMenu(target, opt, \"click\");\n                            popUpChildMenu(target, opt, \"click\");\n                        }\n\n                        target = null;\n                    });\n                    self.menuBar.target.bind(\"mouseover\", function (e) {\n                        if (!self.menuBar.opened) return false;\n                        var target = U.findParentNode(e.target, function (target) {\n                            if (target.getAttribute(\"data-menu-item-index\")) {\n                                return true;\n                            }\n                        });\n                        if (target) popUpChildMenu(target, opt, \"mouseover\");\n\n                        target = null;\n                    });\n\n                    el = null;\n                    opt = null;\n                    data = null;\n                    items = null;\n                    activeMenu = null;\n\n                    return this;\n                };\n            }();\n\n            /**\n             * @method ax5.ui.menu.close\n             * @returns {ax5.ui.menu} this\n             */\n            this.close = function () {\n\n                if (self.menuBar && self.menuBar.target) {\n                    self.menuBar.target.find('[data-menu-item-index]').removeClass(\"hover\");\n                    self.menuBar.opened = false;\n                    self.menuBar.openedIndex = null;\n                }\n\n                appEventAttach.call(this, false); // 이벤트 제거\n\n                this.queue.forEach(function (n) {\n                    n.$target.remove();\n                });\n                this.queue = [];\n\n                onStateChanged.call(this, null, {\n                    self: this,\n                    state: \"close\"\n                });\n\n                return this;\n            };\n\n            /**\n             * @method ax5.ui.menu.getCheckValue\n             * @returns {Object} statusCheckItem\n             */\n            this.getCheckValue = function () {\n                var checkItems = {},\n                    _collectItem = function collectItem(items) {\n                    var i = items.length;\n                    while (i--) {\n                        if (items[i].check && items[i].check.checked) {\n                            if (!checkItems[items[i].check.name]) checkItems[items[i].check.name] = items[i].check.value;else {\n                                if (U.isString(checkItems[items[i].check.name])) checkItems[items[i].check.name] = [checkItems[items[i].check.name]];\n                                checkItems[items[i].check.name].push(items[i].check.value);\n                            }\n                        }\n                        if (items[i].items && items[i].items.length > 0) _collectItem(items[i].items);\n                    }\n                };\n\n                _collectItem(cfg.items);\n\n                try {\n                    return checkItems;\n                } finally {\n                    checkItems = null;\n                    _collectItem = null;\n                }\n            };\n\n            // 클래스 생성자\n            this.main = function () {\n\n                UI.menu_instance = UI.menu_instance || [];\n                UI.menu_instance.push(this);\n\n                if (arguments && U.isObject(arguments[0])) {\n                    this.setConfig(arguments[0]);\n                }\n            }.apply(this, arguments);\n        };\n        return ax5menu;\n    }());\n\n    MENU = ax5.ui.menu;\n})();\n\n// todo : menu 드랍다운 아이콘 설정 기능 추가\n// ax5.ui.menu.tmpl\n(function () {\n    var MENU = ax5.ui.menu;\n\n    var tmpl = function tmpl(columnKeys) {\n        return \"\\n        <div class=\\\"ax5-ui-menu {{theme}}\\\" {{#width}}style=\\\"width:{{width}}px;\\\"{{/width}}>\\n            <div class=\\\"ax-menu-body\\\">\\n                {{#\" + columnKeys.items + \"}}\\n                    {{^@isMenu}}\\n                        {{#divide}}\\n                        <div class=\\\"ax-menu-item-divide\\\" data-menu-item-index=\\\"{{@i}}\\\"></div>\\n                        {{/divide}}\\n                        {{#html}}\\n                        <div class=\\\"ax-menu-item-html\\\" data-menu-item-index=\\\"{{@i}}\\\">{{{@html}}}</div>\\n                        {{/html}}\\n                    {{/@isMenu}}\\n                    {{#@isMenu}}\\n                    <div class=\\\"ax-menu-item\\\" data-menu-item-depth=\\\"{{@depth}}\\\" data-menu-item-index=\\\"{{@i}}\\\" data-menu-item-path=\\\"{{@path}}.{{@i}}\\\">\\n                        <span class=\\\"ax-menu-item-cell ax-menu-item-checkbox\\\">\\n                            {{#check}}\\n                            <span class=\\\"item-checkbox-wrap useCheckBox\\\" {{#checked}}data-item-checked=\\\"true\\\"{{/checked}}></span>\\n                            {{/check}}\\n                            {{^check}}\\n                            <span class=\\\"item-checkbox-wrap\\\"></span>\\n                            {{/check}}\\n                        </span>\\n                        {{#icon}}\\n                        <span class=\\\"ax-menu-item-cell ax-menu-item-icon\\\" style=\\\"width:{{cfg.iconWidth}}px;\\\">{{{.}}}</span>\\n                        {{/icon}}\\n                        <span class=\\\"ax-menu-item-cell ax-menu-item-label\\\">{{{\" + columnKeys.label + \"}}}</span>\\n                        {{#accelerator}}\\n                        <span class=\\\"ax-menu-item-cell ax-menu-item-accelerator\\\" style=\\\"width:{{cfg.acceleratorWidth}}px;\\\"><span class=\\\"item-wrap\\\">{{.}}</span></span>\\n                        {{/accelerator}}\\n                        {{#@hasChild}}\\n                        <span class=\\\"ax-menu-item-cell ax-menu-item-handle\\\">{{{cfg.icons.arrow}}}</span>\\n                        {{/@hasChild}}\\n                    </div>\\n                    {{/@isMenu}}\\n\\n                {{/\" + columnKeys.items + \"}}\\n            </div>\\n            <div class=\\\"ax-menu-arrow\\\"></div>\\n        </div>\\n        \";\n    };\n    var tmplMenubar = function tmplMenubar(columnKeys) {\n        return \"\\n        <div class=\\\"ax5-ui-menubar {{theme}}\\\">\\n            <div class=\\\"ax-menu-body\\\">\\n                {{#\" + columnKeys.items + \"}}\\n                    {{^@isMenu}}\\n                        {{#divide}}\\n                        <div class=\\\"ax-menu-item-divide\\\" data-menu-item-index=\\\"{{@i}}\\\"></div>\\n                        {{/divide}}\\n                        {{#html}}\\n                        <div class=\\\"ax-menu-item-html\\\" data-menu-item-index=\\\"{{@i}}\\\">{{{@html}}}</div>\\n                        {{/html}}\\n                    {{/@isMenu}}\\n                    {{#@isMenu}}\\n                    <div class=\\\"ax-menu-item\\\" data-menu-item-index=\\\"{{@i}}\\\">\\n                        {{#icon}}\\n                        <span class=\\\"ax-menu-item-cell ax-menu-item-icon\\\" style=\\\"width:{{cfg.iconWidth}}px;\\\">{{{.}}}</span>\\n                        {{/icon}}\\n                        <span class=\\\"ax-menu-item-cell ax-menu-item-label\\\">{{{\" + columnKeys.label + \"}}}</span>\\n                    </div>\\n                    {{/@isMenu}}\\n                {{/\" + columnKeys.items + \"}}\\n            </div>\\n        </div>\\n        \";\n    };\n\n    MENU.tmpl = {\n        \"tmpl\": tmpl,\n        \"tmplMenubar\": tmplMenubar,\n\n        get: function get(tmplName, data, columnKeys) {\n            return ax5.mustache.render(MENU.tmpl[tmplName].call(this, columnKeys), data);\n        }\n    };\n})();","// ax5.ui.menu\n(function () {\n    var UI = ax5.ui;\n    var U = ax5.util;\n    var MENU;\n\n    UI.addClass({\n        className: \"menu\",\n        version: \"${VERSION}\"\n    }, (function () {\n        /**\n         * @class ax5.ui.menu\n         * @classdesc\n         * @author tom@axisj.com\n         * @example\n         * ```js\n         * var menu = new ax5.ui.menu({\n         *     theme: 'primary',\n         *     iconWidth: 20,\n         *     acceleratorWidth: 100,\n         *     itemClickAndClose: false,\n         *     icons: {\n         *         'arrow': '<i class=\"fa fa-caret-right\"></i>'\n         *     },\n         *     columnKeys: {\n         *         label: 'name',\n         *         items: 'chidren'\n         *     },\n         *     items: [\n         *         {\n         *             icon: '<i class=\"fa fa-archive\"></i>',\n         *             name: \"Menu Parent 0\",\n         *             chidren: [\n         *                 {\n         *                     check: {\n         *                         type: 'checkbox',\n         *                         name: 'A',\n         *                         value: '0',\n         *                         checked: false\n         *                     },\n         *                     name: \"Menu Z\",\n         *                     data: {},\n         *                     role: \"\",\n         *                     accelerator: \"CmdOrCtrl+Z\"\n         *                 },\n         *                 {\n         *                     check: {\n         *                         type: 'checkbox',\n         *                         name: 'A',\n         *                         value: '1',\n         *                         checked: true\n         *                     },\n         *                     name: \"Menu A\",\n         *                     data: {},\n         *                     role: \"\"\n         *                 }\n         *             ],\n         *             filterType: \"A\"\n         *         },\n         *         {\n         *             divide: true,\n         *             filterType: \"A\"\n         *         },\n         *         {\n         *             icon: '<i class=\"fa fa-mixcloud\"></i>',\n         *             name: \"Menu Parent 1\",\n         *             chidren: [\n         *                 {\n         *                     name: \"Menu Z\",\n         *                     data: {},\n         *                     role: \"\",\n         *                     chidren: [\n         *                         {\n         *                             name: \"Menu Z\",\n         *                             data: {},\n         *                             role: \"\"\n         *                         },\n         *                         {\n         *                             name: \"Menu A\",\n         *                             data: {},\n         *                             role: \"\"\n         *                         }\n         *                     ]\n         *                 },\n         *                 {\n         *                     name: \"Menu A\",\n         *                     data: {},\n         *                     role: \"\"\n         *                 }\n         *             ],\n         *             filterType: \"A\"\n         *         },\n         *         {\n         *             check: {\n         *                 type: 'radio',\n         *                 name: 'radioName',\n         *                 value: '1',\n         *                 checked: false\n         *             },\n         *             icon: '<i class=\"fa fa-bluetooth\"></i>',\n         *             name: \"Menu Parent 2\"\n         *         },\n         *         {\n         *             check: {\n         *                 type: 'radio',\n         *                 name: 'radioName',\n         *                 value: '2',\n         *                 checked: false\n         *             },\n         *             name: \"Menu Parent 3\"\n         *         },\n         *         {\n         *             check: {\n         *                 type: 'radio',\n         *                 name: 'radioName',\n         *                 value: '3',\n         *                 checked: false\n         *             },\n         *             name: \"Menu Parent 4\"\n         *         },\n         *         {divide: true},\n         *         {\n         *             html: function () {\n         *                 return '<div style=\"text-align: center;\">' +\n         *                     '<button class=\"btn btn-primary\" data-menu-btn=\"OK\">OK</button> ' +\n         *                     '<button class=\"btn btn-danger\" data-menu-btn=\"CANCEL\">CANCEL</button>' +\n         *                     '</div>';\n         *             }\n         *         }\n         *     ]\n         * });\n         * ```\n         */\n        var ax5menu = function () {\n            let self = this,\n                cfg;\n\n            this.instanceId = ax5.getGuid();\n            this.config = {\n                theme: \"default\",\n                iconWidth: 22,\n                acceleratorWidth: 100,\n                menuBodyPadding: 5,\n                //direction: \"top\", // top|bottom\n                offset: {left: 0, top: 0},\n                position: \"fixed\",\n                animateTime: 250,\n                items: [],\n                itemClickAndClose: true,\n                columnKeys: {\n                    label: 'label',\n                    items: 'items'\n                }\n            };\n\n            this.openTimer = null;\n            this.closeTimer = null;\n            this.queue = [];\n            this.menuBar = {};\n            this.state = undefined;\n\n            cfg = this.config;\n\n            let appEventAttach = function (active) {\n                    if (active) {\n                        jQuery(document).unbind(\"click.ax5menu-\" + this.menuId).bind(\"click.ax5menu-\" + this.menuId, clickItem.bind(this));\n                        jQuery(window).unbind(\"keydown.ax5menu-\" + this.menuId).bind(\"keydown.ax5menu-\" + this.menuId, function (e) {\n                            if (e.which == ax5.info.eventKeys.ESC) {\n                                self.close();\n                            }\n                        });\n                        jQuery(window).unbind(\"resize.ax5menu-\" + this.menuId).bind(\"resize.ax5menu-\" + this.menuId, function (e) {\n                            self.close();\n                        });\n                    }\n                    else {\n                        jQuery(document).unbind(\"click.ax5menu-\" + this.menuId);\n                        jQuery(window).unbind(\"keydown.ax5menu-\" + this.menuId);\n                        jQuery(window).unbind(\"resize.ax5menu-\" + this.menuId);\n                    }\n                },\n                onStateChanged = function (opts, that) {\n                    if (opts && opts.onStateChanged) {\n                        opts.onStateChanged.call(that, that);\n                    }\n                    else if (this.onStateChanged) {\n                        this.onStateChanged.call(that, that);\n                    }\n\n                    self.state = that.state;\n                    opts = null;\n                    that = null;\n                    return true;\n                },\n                onLoad = function (that) {\n                    if (this.onLoad) {\n                        this.onLoad.call(that, that);\n                    }\n\n                    that = null;\n                    return true;\n                },\n                popup = function (opt, items, depth, path) {\n                    let data = opt,\n                        activeMenu,\n                        removed\n                        ;\n\n                    data.theme = opt.theme || cfg.theme;\n                    data.cfg = {\n                        icons: jQuery.extend({}, cfg.icons),\n                        iconWidth: opt.iconWidth || cfg.iconWidth,\n                        acceleratorWidth: opt.acceleratorWidth || cfg.acceleratorWidth\n                    };\n\n                    items.forEach(function (n) {\n                        if (n.html || n.divide) {\n                            n['@isMenu'] = false;\n                            if (n.html) {\n                                n['@html'] = n.html.call({\n                                    item: n,\n                                    config: cfg,\n                                    opt: opt\n                                });\n                            }\n                        }\n                        else {\n                            n['@isMenu'] = true;\n                        }\n                    });\n\n                    data[cfg.columnKeys.items] = items;\n                    data['@depth'] = depth;\n                    data['@path'] = path || \"root\";\n                    data['@hasChild'] = function () {\n                        return this[cfg.columnKeys.items] && this[cfg.columnKeys.items].length > 0;\n                    };\n                    activeMenu = jQuery(MENU.tmpl.get.call(this, \"tmpl\", data, cfg.columnKeys));\n                    jQuery(document.body).append(activeMenu);\n\n                    // remove queue\n\n                    removed = this.queue.splice(depth);\n                    removed.forEach(function (n) {\n                        n.$target.remove();\n                    });\n\n                    this.queue.push({\n                        '$target': activeMenu,\n                        'data': jQuery.extend({}, data)\n                    });\n\n                    activeMenu.find('[data-menu-item-index]').bind(\"mouseover\", function () {\n                        let depth = this.getAttribute(\"data-menu-item-depth\"),\n                            index = this.getAttribute(\"data-menu-item-index\"),\n                            path = this.getAttribute(\"data-menu-item-path\"),\n                            $this,\n                            offset,\n                            scrollTop,\n                            childOpt,\n                            _items,\n                            _activeMenu;\n\n                        if (depth != null && typeof depth != \"undefined\") {\n                            _items = self.queue[depth].data[cfg.columnKeys.items][index][cfg.columnKeys.items];\n                            _activeMenu = self.queue[depth].$target;\n                            _activeMenu.find('[data-menu-item-index]').removeClass(\"hover\");\n                            jQuery(this).addClass(\"hover\");\n\n                            if (_activeMenu.attr(\"data-selected-menu-item-index\") != index) {\n                                _activeMenu.attr(\"data-selected-menu-item-index\", index);\n\n                                if (_items && _items.length > 0) {\n\n                                    $this = jQuery(this);\n                                    offset = $this.offset();\n                                    scrollTop = (cfg.position == \"fixed\" ? jQuery(document).scrollTop() : 0);\n                                    childOpt = {\n                                        '@parent': {\n                                            left: offset.left,\n                                            top: offset.top,\n                                            width: $this.outerWidth(),\n                                            height: $this.outerHeight()\n                                        },\n                                        left: offset.left + $this.outerWidth() - cfg.menuBodyPadding,\n                                        top: offset.top - cfg.menuBodyPadding - 1 - scrollTop\n                                    };\n\n                                    childOpt = jQuery.extend(true, opt, childOpt);\n                                    popup.call(self, childOpt, _items, (Number(depth) + 1), path);\n                                }\n                                else {\n                                    self.queue.splice(Number(depth) + 1).forEach(function (n) {\n                                        n.$target.remove();\n                                    });\n                                }\n                            }\n                        }\n\n                        depth = null;\n                        index = null;\n                        path = null;\n                        $this = null;\n                        offset = null;\n                        scrollTop = null;\n                        childOpt = null;\n                        _items = null;\n                        _activeMenu = null;\n                    });\n\n                    // mouse out\n                    activeMenu.find('[data-menu-item-index]').bind(\"mouseout\", function () {\n                        let depth = this.getAttribute(\"data-menu-item-depth\"),\n                            index = this.getAttribute(\"data-menu-item-index\"),\n                            path = this.getAttribute(\"data-menu-item-path\"),\n                            _items;\n\n                        _items = self.queue[depth].data[cfg.columnKeys.items][index][cfg.columnKeys.items];\n                        if (_items && _items.length > 0) {\n\n                        } else {\n                            jQuery(this).removeClass(\"hover\");\n                        }\n                    });\n\n                    // is Root\n                    if (depth == 0) {\n                        if (data.direction) activeMenu.addClass(\"direction-\" + data.direction);\n                        onStateChanged.call(this, null, {\n                            self: this,\n                            items: items,\n                            parent: (function (path) {\n                                if (!path) return false;\n                                var item = null;\n                                try {\n                                    item = (Function(\"\", \"return this.config.items[\" + path.substring(5).replace(/\\./g, '].items[') + \"];\")).call(self);\n                                } catch (e) {\n\n                                }\n                                return item;\n                            })(data['@path']),\n                            state: \"popup\"\n                        });\n                    }\n\n                    align.call(this, activeMenu, data);\n                    onLoad.call(this, {\n                        self: this,\n                        items: items,\n                        element: activeMenu.get(0)\n                    });\n\n                    data = null;\n                    activeMenu = null;\n                    removed = null;\n                    opt = null;\n                    items = null;\n                    depth = null;\n                    path = null;\n\n                    return this;\n                },\n                clickItem = function (e, target, item) {\n                    target = U.findParentNode(e.target, function (target) {\n                        if (target.getAttribute(\"data-menu-item-index\")) {\n                            return true;\n                        }\n                    });\n                    if (target) {\n                        item = (function (path) {\n                            if (!path) return false;\n                            let item;\n                            try {\n                                item = (Function(\"\", \"return this.config.items[\" + path.substring(5).replace(/\\./g, '].' + cfg.columnKeys.items + '[') + \"];\")).call(self);\n                            } catch (e) {\n                                console.log(ax5.info.getError(\"ax5menu\", \"501\", \"menuItemClick\"));\n                            }\n\n                            try {\n                                return item;\n                            }\n                            finally {\n                                item = null;\n                            }\n                        })(target.getAttribute(\"data-menu-item-path\"));\n\n                        if (!item) return this;\n\n                        if (item.check) {\n                            (function (items) {\n                                var setValue = {\n                                    'checkbox': function (value) {\n                                        this.checked = !value;\n                                    },\n                                    'radio': function (value) {\n                                        var name = this.name;\n                                        items.forEach(function (n) {\n                                            if (n.check && n.check.type === 'radio' && n.check.name == name) {\n                                                n.check.checked = false;\n                                            }\n                                        });\n                                        this.checked = !value;\n                                    }\n                                };\n                                if (setValue[this.type]) setValue[this.type].call(this, this.checked);\n                                setValue = null;\n                            }).call(item.check, cfg.items);\n\n                            if (!cfg.itemClickAndClose) {\n                                self.queue.forEach(function (n) {\n                                    n.$target.find('[data-menu-item-index]').each(function () {\n                                        var item = n.data[cfg.columnKeys.items][this.getAttribute(\"data-menu-item-index\")];\n                                        if (item.check) {\n                                            jQuery(this).find(\".item-checkbox-wrap\").attr(\"data-item-checked\", item.check.checked);\n                                        }\n                                    });\n                                });\n                            }\n                        }\n\n                        if (self.onClick) {\n                            self.onClick.call(item, item);\n                        }\n                        if ((!item[cfg.columnKeys.items] || item[cfg.columnKeys.items].length == 0) && cfg.itemClickAndClose) self.close();\n                    }\n                    else {\n                        self.close();\n                    }\n\n                    target = null;\n                    item = null;\n                    return this;\n                },\n                align = function (activeMenu, data) {\n                    let $window = jQuery(window),\n                        $document = jQuery(document),\n                        wh = (cfg.position == \"fixed\") ? $window.height() : $document.height(),\n                        ww = $window.width(),\n                        h = activeMenu.outerHeight(),\n                        w = activeMenu.outerWidth(),\n                        l = data.left,\n                        t = data.top,\n                        position = cfg.position || \"fixed\";\n\n                    if (l + w > ww) {\n                        if (data['@parent']) {\n                            l = data['@parent'].left - w + cfg.menuBodyPadding;\n                        }\n                        else {\n                            l = ww - w;\n                        }\n                    }\n\n                    if (t + h > wh) {\n                        t = wh - h;\n                    }\n\n                    activeMenu.css({left: l, top: t, position: position});\n\n                    activeMenu = null;\n                    data = null;\n                    $window = null;\n                    $document = null;\n                    wh = null;\n                    ww = null;\n                    h = null;\n                    w = null;\n                    l = null;\n                    t = null;\n                    position = null;\n                    return this;\n                };\n\n            /// private end\n\n            this.init = function () {\n                self.menuId = ax5.getGuid();\n\n                /**\n                 * config에 선언된 이벤트 함수들을 this로 이동시켜 주어 나중에 인스턴스.on... 으로 처리 가능 하도록 변경\n                 */\n                this.onStateChanged = cfg.onStateChanged;\n                this.onClick = cfg.onClick;\n                this.onLoad = cfg.onLoad;\n\n                onStateChanged.call(this, null, {\n                    self: this,\n                    state: \"init\"\n                });\n            };\n\n            /**\n             * @method ax5.ui.menu.popup\n             * @param {Event|Object} e - Event or Object\n             * @param {Object} [opt]\n             * @param {String} [opt.theme]\n             * @param {Function} [opt.filter]\n             * @returns {ax5.ui.menu} this\n             */\n            this.popup = (function () {\n\n                let getOption = {\n                        'event': function (e, opt) {\n                            //var xOffset = Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);\n                            //var yOffset = Math.max(document.documentElement.scrollTop, document.body.scrollTop);\n                            //console.log(e.pageY);\n\n                            e = {\n                                left: e.clientX,\n                                top: (cfg.position == \"fixed\") ? e.clientY : e.pageY,\n                                width: cfg.width,\n                                theme: cfg.theme\n                            };\n\n                            e.left -= 5;\n                            e.top -= 5;\n\n                            if (cfg.offset) {\n                                if (cfg.offset.left) e.left += cfg.offset.left;\n                                if (cfg.offset.top) e.top += cfg.offset.top;\n                            }\n                            opt = jQuery.extend(true, e, opt);\n\n                            try {\n                                return opt;\n                            }\n                            finally {\n                                e = null;\n                                //opt = null;\n                            }\n                        },\n                        'object': function (e, opt) {\n                            e = {\n                                left: e.left,\n                                top: e.top,\n                                width: e.width || cfg.width,\n                                theme: e.theme || cfg.theme\n                            };\n\n                            if (cfg.offset) {\n                                if (cfg.offset.left) e.left += cfg.offset.left;\n                                if (cfg.offset.top) e.top += cfg.offset.top;\n                            }\n\n                            opt = jQuery.extend(true, e, opt);\n\n                            try {\n                                return opt;\n                            }\n                            finally {\n                                e = null;\n                                //opt = null;\n                            }\n                        }\n                    },\n                    updateTheme = function (theme) {\n                        if (theme) cfg.theme = theme;\n                    };\n\n                return function (e, opt) {\n\n                    if (!e) return this;\n                    opt = getOption[((typeof e.clientX == \"undefined\") ? \"object\" : \"event\")].call(this, e, opt);\n                    updateTheme(opt.theme);\n\n                    let items = [].concat(cfg.items),\n                        filteringItem;\n\n                    if (opt.filter) {\n                        filteringItem = function (_items) {\n                            let arr = [];\n                            _items.forEach(function (n) {\n                                if (n.items && n.items.length > 0) {\n                                    n.items = filteringItem(n.items);\n                                }\n                                if (opt.filter.call(n)) {\n                                    arr.push(n);\n                                }\n                            });\n                            return arr;\n                        };\n                        items = filteringItem(items);\n                    }\n\n                    if (items.length) {\n                        popup.call(this, opt, items, 0); // 0 is seq of queue\n\n                        if(this.popupEventAttachTimer) clearTimeout(this.popupEventAttachTimer);\n                        this.popupEventAttachTimer = setTimeout((function () {\n                            appEventAttach.call(this, true); // 이벤트 연결\n                        }).bind(this), 500);\n                    }\n\n                    e = null;\n                    return this;\n                }\n            })();\n\n            /**\n             * @method ax5.ui.menu.attach\n             * @param {Element|jQueryObject} el\n             * @returns {ax5.ui.menu} this\n             */\n            this.attach = (function () {\n\n                var getOption = {\n                    'object': function (e, opt) {\n                        e = {\n                            left: e.left,\n                            top: e.top,\n                            width: e.width || cfg.width,\n                            theme: e.theme || cfg.theme,\n                            direction: e.direction || cfg.direction\n                        };\n                        opt = jQuery.extend(true, opt, e);\n\n                        try {\n                            return opt;\n                        }\n                        finally {\n                            e = null;\n                            opt = null;\n                        }\n                    }\n                };\n\n                var popUpChildMenu = function (target, opt, eType) {\n                    var\n                        $target = jQuery(target),\n                        offset = $target.offset(),\n                        height = $target.outerHeight(),\n                        index = Number(target.getAttribute(\"data-menu-item-index\")),\n                        scrollTop = (cfg.position == \"fixed\") ? jQuery(document).scrollTop() : 0;\n\n\n                    if (cfg.items && cfg.items[index][cfg.columnKeys.items] && cfg.items[index][cfg.columnKeys.items].length) {\n\n                        if (self.menuBar.openedIndex == index) {\n                            if (eType == \"click\") self.close();\n                            return false;\n                        }\n\n                        self.menuBar.target.find('[data-menu-item-index]').removeClass(\"hover\");\n                        self.menuBar.opened = true;\n                        self.menuBar.openedIndex = index;\n\n                        $target.attr(\"data-menu-item-opened\", \"true\");\n                        $target.addClass(\"hover\");\n\n                        if (cfg.offset) {\n                            if (cfg.offset.left) offset.left += cfg.offset.left;\n                            if (cfg.offset.top) offset.top += cfg.offset.top;\n                        }\n\n                        opt = getOption[\"object\"].call(this, {left: offset.left, top: offset.top + height - scrollTop}, opt);\n\n                        popup.call(self, opt, cfg.items[index][cfg.columnKeys.items], 0, 'root.' + target.getAttribute(\"data-menu-item-index\")); // 0 is seq of queue\n                        appEventAttach.call(self, true); // 이벤트 연결\n                    }\n\n                    target = null;\n                    opt = null;\n                    $target = null;\n                    offset = null;\n                    height = null;\n                    index = null;\n                    scrollTop = null;\n                };\n                var clickParentMenu = function (target, opt, eType) {\n                    var\n                        $target = jQuery(target),\n                        offset = $target.offset(),\n                        height = $target.outerHeight(),\n                        index = Number(target.getAttribute(\"data-menu-item-index\")),\n                        scrollTop = (cfg.position == \"fixed\") ? jQuery(document).scrollTop() : 0;\n                    if (cfg.items && (!cfg.items[index][cfg.columnKeys.items] || cfg.items[index][cfg.columnKeys.items].length == 0)) {\n                        if (self.onClick) {\n                            self.onClick.call(cfg.items[index], cfg.items[index]);\n                        }\n                    }\n                };\n\n                return function (el, opt) {\n                    var\n                        data = {},\n                        items = cfg.items,\n                        activeMenu;\n\n                    if (typeof opt === \"undefined\") opt = {};\n\n                    data.theme = opt.theme || cfg.theme;\n                    data.cfg = {\n                        icons: jQuery.extend({}, cfg.icons),\n                        iconWidth: opt.iconWidth || cfg.iconWidth,\n                        acceleratorWidth: opt.acceleratorWidth || cfg.acceleratorWidth\n                    };\n\n                    items.forEach(function (n) {\n                        if (n.html || n.divide) {\n                            n['@isMenu'] = false;\n                            if (n.html) {\n                                n['@html'] = n.html.call({\n                                    item: n,\n                                    config: cfg,\n                                    opt: opt\n                                });\n                            }\n                        }\n                        else {\n                            n['@isMenu'] = true;\n                        }\n                    });\n\n                    data[cfg.columnKeys.items] = items;\n\n                    activeMenu = jQuery(MENU.tmpl.get.call(this, \"tmplMenubar\", data, cfg.columnKeys));\n                    self.menuBar = {\n                        target: jQuery(el),\n                        opened: false\n                    };\n                    self.menuBar.target.html(activeMenu);\n\n                    // click, mouseover\n                    self.menuBar.target.bind(\"click\", function (e) {\n                        if (!e) return this;\n                        var target = U.findParentNode(e.target, function (target) {\n                            if (target.getAttribute(\"data-menu-item-index\")) {\n                                return true;\n                            }\n                        });\n                        if (target) {\n                            clickParentMenu(target, opt, \"click\");\n                            popUpChildMenu(target, opt, \"click\");\n                        }\n\n                        target = null;\n                    });\n                    self.menuBar.target.bind(\"mouseover\", function (e) {\n                        if (!self.menuBar.opened) return false;\n                        var target = U.findParentNode(e.target, function (target) {\n                            if (target.getAttribute(\"data-menu-item-index\")) {\n                                return true;\n                            }\n                        });\n                        if (target) popUpChildMenu(target, opt, \"mouseover\");\n\n                        target = null;\n                    });\n\n                    el = null;\n                    opt = null;\n                    data = null;\n                    items = null;\n                    activeMenu = null;\n\n                    return this;\n                }\n            })();\n\n            /**\n             * @method ax5.ui.menu.close\n             * @returns {ax5.ui.menu} this\n             */\n            this.close = function () {\n\n                if (self.menuBar && self.menuBar.target) {\n                    self.menuBar.target.find('[data-menu-item-index]').removeClass(\"hover\");\n                    self.menuBar.opened = false;\n                    self.menuBar.openedIndex = null;\n                }\n\n                appEventAttach.call(this, false); // 이벤트 제거\n\n                this.queue.forEach(function (n) {\n                    n.$target.remove();\n                });\n                this.queue = [];\n\n                onStateChanged.call(this, null, {\n                    self: this,\n                    state: \"close\"\n                });\n\n                return this;\n            };\n\n            /**\n             * @method ax5.ui.menu.getCheckValue\n             * @returns {Object} statusCheckItem\n             */\n            this.getCheckValue = function () {\n                var checkItems = {},\n                    collectItem = function (items) {\n                        var i = items.length;\n                        while (i--) {\n                            if (items[i].check && items[i].check.checked) {\n                                if (!checkItems[items[i].check.name]) checkItems[items[i].check.name] = items[i].check.value;\n                                else {\n                                    if (U.isString(checkItems[items[i].check.name])) checkItems[items[i].check.name] = [checkItems[items[i].check.name]];\n                                    checkItems[items[i].check.name].push(items[i].check.value);\n                                }\n                            }\n                            if (items[i].items && items[i].items.length > 0) collectItem(items[i].items);\n                        }\n                    };\n\n                collectItem(cfg.items);\n\n                try {\n                    return checkItems;\n                }\n                finally {\n                    checkItems = null;\n                    collectItem = null;\n                }\n            };\n\n            // 클래스 생성자\n            this.main = (function () {\n\n                UI.menu_instance = UI.menu_instance || [];\n                UI.menu_instance.push(this);\n\n                if (arguments && U.isObject(arguments[0])) {\n                    this.setConfig(arguments[0]);\n                }\n            }).apply(this, arguments);\n        };\n        return ax5menu;\n    })());\n\n    MENU = ax5.ui.menu;\n})();\n\n// todo : menu 드랍다운 아이콘 설정 기능 추가","// ax5.ui.menu.tmpl\n(function () {\n    var MENU = ax5.ui.menu;\n    \n    var tmpl = function (columnKeys) {\n        return `\n        <div class=\"ax5-ui-menu {{theme}}\" {{#width}}style=\"width:{{width}}px;\"{{/width}}>\n            <div class=\"ax-menu-body\">\n                {{#${columnKeys.items}}}\n                    {{^@isMenu}}\n                        {{#divide}}\n                        <div class=\"ax-menu-item-divide\" data-menu-item-index=\"{{@i}}\"></div>\n                        {{/divide}}\n                        {{#html}}\n                        <div class=\"ax-menu-item-html\" data-menu-item-index=\"{{@i}}\">{{{@html}}}</div>\n                        {{/html}}\n                    {{/@isMenu}}\n                    {{#@isMenu}}\n                    <div class=\"ax-menu-item\" data-menu-item-depth=\"{{@depth}}\" data-menu-item-index=\"{{@i}}\" data-menu-item-path=\"{{@path}}.{{@i}}\">\n                        <span class=\"ax-menu-item-cell ax-menu-item-checkbox\">\n                            {{#check}}\n                            <span class=\"item-checkbox-wrap useCheckBox\" {{#checked}}data-item-checked=\"true\"{{/checked}}></span>\n                            {{/check}}\n                            {{^check}}\n                            <span class=\"item-checkbox-wrap\"></span>\n                            {{/check}}\n                        </span>\n                        {{#icon}}\n                        <span class=\"ax-menu-item-cell ax-menu-item-icon\" style=\"width:{{cfg.iconWidth}}px;\">{{{.}}}</span>\n                        {{/icon}}\n                        <span class=\"ax-menu-item-cell ax-menu-item-label\">{{{${columnKeys.label}}}}</span>\n                        {{#accelerator}}\n                        <span class=\"ax-menu-item-cell ax-menu-item-accelerator\" style=\"width:{{cfg.acceleratorWidth}}px;\"><span class=\"item-wrap\">{{.}}</span></span>\n                        {{/accelerator}}\n                        {{#@hasChild}}\n                        <span class=\"ax-menu-item-cell ax-menu-item-handle\">{{{cfg.icons.arrow}}}</span>\n                        {{/@hasChild}}\n                    </div>\n                    {{/@isMenu}}\n\n                {{/${columnKeys.items}}}\n            </div>\n            <div class=\"ax-menu-arrow\"></div>\n        </div>\n        `;\n    };\n    var tmplMenubar =  function (columnKeys) {\n        return `\n        <div class=\"ax5-ui-menubar {{theme}}\">\n            <div class=\"ax-menu-body\">\n                {{#${columnKeys.items}}}\n                    {{^@isMenu}}\n                        {{#divide}}\n                        <div class=\"ax-menu-item-divide\" data-menu-item-index=\"{{@i}}\"></div>\n                        {{/divide}}\n                        {{#html}}\n                        <div class=\"ax-menu-item-html\" data-menu-item-index=\"{{@i}}\">{{{@html}}}</div>\n                        {{/html}}\n                    {{/@isMenu}}\n                    {{#@isMenu}}\n                    <div class=\"ax-menu-item\" data-menu-item-index=\"{{@i}}\">\n                        {{#icon}}\n                        <span class=\"ax-menu-item-cell ax-menu-item-icon\" style=\"width:{{cfg.iconWidth}}px;\">{{{.}}}</span>\n                        {{/icon}}\n                        <span class=\"ax-menu-item-cell ax-menu-item-label\">{{{${columnKeys.label}}}}</span>\n                    </div>\n                    {{/@isMenu}}\n                {{/${columnKeys.items}}}\n            </div>\n        </div>\n        `;\n    };\n\n    MENU.tmpl = {\n        \"tmpl\" : tmpl,\n        \"tmplMenubar\" : tmplMenubar,\n\n        get: function (tmplName, data, columnKeys) {\n            return ax5.mustache.render(MENU.tmpl[tmplName].call(this, columnKeys), data);\n        }\n    };\n})();"]}